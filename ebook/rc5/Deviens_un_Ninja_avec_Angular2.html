<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<meta name="author" content="Ninja Squad">
<meta name="copyright" content="Ninja Squad">
<title>Deviens un ninja avec Angular2</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Deviens un ninja avec Angular2</h1>
<div class="details">
<span id="author" class="author">Ninja Squad</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#intro">1. Introduction</a></li>
<li><a href="#es6">2. Une rapide introduction à ECMASCRIPT&#160;6</a>
<ul class="sectlevel2">
<li><a href="#_transpileur">2.1. Transpileur</a></li>
<li><a href="#__code_let_code">2.2. <code>let</code></a></li>
<li><a href="#_constantes">2.3. Constantes</a></li>
<li><a href="#_création_d_objets">2.4. Création d&#8217;objets</a></li>
<li><a href="#_affectations_déstructurées">2.5. Affectations déstructurées</a></li>
<li><a href="#_paramètres_optionnels_et_valeurs_par_défaut">2.6. Paramètres optionnels et valeurs par défaut</a></li>
<li><a href="#__em_rest_operator_em">2.7. <em>Rest operator</em></a></li>
<li><a href="#_classes">2.8. Classes</a></li>
<li><a href="#__em_promises_em">2.9. <em>Promises</em></a></li>
<li><a href="#__em_arrow_functions_em">2.10. (<em>arrow functions</em>)</a></li>
<li><a href="#__em_set_em_et_em_map_em">2.11. <em>Set</em> et <em>Map</em></a></li>
<li><a href="#_template_de_string">2.12. Template de string</a></li>
<li><a href="#modules">2.13. Modules</a></li>
<li><a href="#_conclusion">2.14. Conclusion</a></li>
</ul>
</li>
<li><a href="#types">3. Un peu plus loin qu&#8217;ES6</a>
<ul class="sectlevel2">
<li><a href="#_types_dynamiques_statiques_et_optionnels">3.1. Types dynamiques, statiques et optionnels</a></li>
<li><a href="#_hello_typescript">3.2. Hello TypeScript</a></li>
<li><a href="#_un_exemple_concret_d_injection_de_dépendance">3.3. Un exemple concret d&#8217;injection de dépendance</a></li>
</ul>
</li>
<li><a href="#typescript">4. Découvrir TypeScript</a>
<ul class="sectlevel2">
<li><a href="#_les_types_de_typescript">4.1. Les types de TypeScript</a></li>
<li><a href="#_valeurs_énumérées_em_enum_em">4.2. Valeurs énumérées (<em>enum</em>)</a></li>
<li><a href="#_return_types">4.3. Return types</a></li>
<li><a href="#_interfaces">4.4. Interfaces</a></li>
<li><a href="#_paramètre_optionnel">4.5. Paramètre optionnel</a></li>
<li><a href="#_des_fonctions_en_propriété">4.6. Des fonctions en propriété</a></li>
<li><a href="#_classes_2">4.7. Classes</a></li>
<li><a href="#_utiliser_d_autres_bibliothèques">4.8. Utiliser d&#8217;autres bibliothèques</a></li>
<li><a href="#_decorateurs">4.9. Decorateurs</a></li>
</ul>
</li>
<li><a href="#web-components">5. Le monde merveilleux des Web Components</a>
<ul class="sectlevel2">
<li><a href="#_le_nouveau_monde">5.1. Le nouveau Monde</a></li>
<li><a href="#_custom_elements">5.2. Custom elements</a></li>
<li><a href="#_shadow_dom">5.3. Shadow DOM</a></li>
<li><a href="#_template">5.4. Template</a></li>
<li><a href="#_html_imports">5.5. HTML imports</a></li>
<li><a href="#_polymer_et_x_tag">5.6. Polymer et X-tag</a></li>
</ul>
</li>
<li><a href="#philosophy">6. La philosophie d&#8217;Angular&#160;2</a></li>
<li><a href="#zero-to-something">7. Commencer de zéro</a>
<ul class="sectlevel2">
<li><a href="#_créer_une_application_avec_typescript">7.1. Créer une application avec TypeScript</a></li>
<li><a href="#_notre_premier_composant">7.2. Notre premier composant</a></li>
<li><a href="#_notre_premier_module_angular">7.3. Notre premier module Angular</a></li>
<li><a href="#_démarrer_l_application">7.4. Démarrer l&#8217;application</a></li>
<li><a href="#_commencer_de_zéro_avec_angular_cli">7.5. Commencer de zéro avec angular-cli</a></li>
</ul>
</li>
<li><a href="#templates">8. La syntaxe des templates</a>
<ul class="sectlevel2">
<li><a href="#_interpolation">8.1. Interpolation</a></li>
<li><a href="#_utiliser_d_autres_composants_dans_nos_templates">8.2. Utiliser d&#8217;autres composants dans nos templates</a></li>
<li><a href="#__em_binding_em_de_propriété">8.3. <em>Binding</em> de propriété</a></li>
<li><a href="#_Événements">8.4. Événements</a></li>
<li><a href="#_expressions_vs_instructions">8.5. Expressions vs instructions</a></li>
<li><a href="#local-variables">8.6. Variables locales</a></li>
<li><a href="#_directives_de_structure">8.7. Directives de structure</a></li>
<li><a href="#_autres_directives_de_templating">8.8. Autres directives de templating</a></li>
<li><a href="#_syntaxe_canonique">8.9. Syntaxe canonique</a></li>
<li><a href="#_résumé">8.10. Résumé</a></li>
</ul>
</li>
<li><a href="#dependency-injection">9. Injection de dépendances</a>
<ul class="sectlevel2">
<li><a href="#_cuisine_et_dépendances">9.1. Cuisine et Dépendances</a></li>
<li><a href="#_développement_facile">9.2. Développement facile</a></li>
<li><a href="#_configuration_facile">9.3. Configuration facile</a></li>
<li><a href="#_autres_types_de_provider">9.4. Autres types de provider</a></li>
<li><a href="#_injecteurs_hiérarchiques">9.5. Injecteurs hiérarchiques</a></li>
<li><a href="#_injection_sans_types">9.6. Injection sans types</a></li>
</ul>
</li>
<li><a href="#pipes">10. <em>Pipes</em></a>
<ul class="sectlevel2">
<li><a href="#_ceci_n_est_pas_une_pipe">10.1. Ceci n&#8217;est pas une pipe</a></li>
<li><a href="#_json">10.2. json</a></li>
<li><a href="#_slice">10.3. slice</a></li>
<li><a href="#_uppercase_majuscule">10.4. uppercase ("majuscule")</a></li>
<li><a href="#_lowercase_minuscule">10.5. lowercase ("minuscule")</a></li>
<li><a href="#_replace_remplacer">10.6. replace ("remplacer")</a></li>
<li><a href="#_number_nombre">10.7. number ("nombre")</a></li>
<li><a href="#_percent_pourcent">10.8. percent ("pourcent")</a></li>
<li><a href="#_currency_devise_monétaire">10.9. currency ("devise monétaire")</a></li>
<li><a href="#_date">10.10. date</a></li>
<li><a href="#_async">10.11. async</a></li>
<li><a href="#_créer_tes_propres_em_pipes_em">10.12. Créer tes propres <em>pipes</em></a></li>
</ul>
</li>
<li><a href="#reactive-programming">11. Programmation réactive</a>
<ul class="sectlevel2">
<li><a href="#_ok_on_vous_rappellera">11.1. OK, on vous rappellera</a></li>
<li><a href="#_principes_généraux">11.2. Principes généraux</a></li>
<li><a href="#_rxjs">11.3. RxJS</a></li>
<li><a href="#_programmation_réactive_en_angular_2">11.4. Programmation réactive en Angular&#160;2</a></li>
</ul>
</li>
<li><a href="#building-components">12. Créer des composants et directives</a>
<ul class="sectlevel2">
<li><a href="#_introduction">12.1. Introduction</a></li>
<li><a href="#_directives">12.2. Directives</a></li>
<li><a href="#_composants">12.3. Composants</a></li>
</ul>
</li>
<li><a href="#styles">13. Style des composants et encapsulation</a>
<ul class="sectlevel2">
<li><a href="#_stratégie_em_native_em">13.1. Stratégie <em>Native</em></a></li>
<li><a href="#_stratégie_em_emulated_em_émulée">13.2. Stratégie <em>Emulated</em> ("émulée")</a></li>
<li><a href="#_stratégie_em_none_em_aucune">13.3. Stratégie <em>None</em> ("aucune")</a></li>
<li><a href="#_style_l_hôte">13.4. Style l&#8217;hôte</a></li>
</ul>
</li>
<li><a href="#services">14. Services</a>
<ul class="sectlevel2">
<li><a href="#_service_title">14.1. Service Title</a></li>
<li><a href="#_créer_son_propre_service">14.2. Créer son propre service</a></li>
</ul>
</li>
<li><a href="#tests">15. Tester ton application</a>
<ul class="sectlevel2">
<li><a href="#_tester_c_est_douter">15.1. Tester c&#8217;est douter</a></li>
<li><a href="#_test_unitaire">15.2. Test unitaire</a></li>
<li><a href="#_dépendances_factices">15.3. Dépendances factices</a></li>
<li><a href="#_tester_des_composants">15.4. Tester des composants</a></li>
<li><a href="#_tester_avec_des_templates_ou_providers_factices">15.5. Tester avec des templates ou providers factices</a></li>
<li><a href="#_tests_end_to_end_de_bout_en_bout">15.6. Tests end-to-end ("de bout en bout")</a></li>
</ul>
</li>
<li><a href="#forms">16. Formulaires</a>
<ul class="sectlevel2">
<li><a href="#_form_form_form_idable">16.1. Form, form, form-idable&#160;!</a></li>
<li><a href="#_formulaire_piloté_par_le_template">16.2. Formulaire piloté par le template</a></li>
<li><a href="#_formulaire_piloté_par_le_code">16.3. Formulaire piloté par le code</a></li>
<li><a href="#_un_peu_de_validation">16.4. Un peu de validation</a></li>
<li><a href="#_erreurs_et_soumission">16.5. Erreurs et soumission</a></li>
<li><a href="#_un_peu_de_style">16.6. Un peu de style</a></li>
<li><a href="#_créer_un_validateur_spécifique">16.7. Créer un validateur spécifique</a></li>
<li><a href="#_combiner_les_approches_pilotée_par_le_code_et_pilotée_par_le_template_pour_la_validation">16.8. Combiner les approches pilotée par le code et pilotée par le template pour la validation</a></li>
<li><a href="#_regrouper_des_champs">16.9. Regrouper des champs</a></li>
<li><a href="#_réagir_aux_modifications">16.10. Réagir aux modifications</a></li>
<li><a href="#_conclusion_2">16.11. Conclusion</a></li>
</ul>
</li>
<li><a href="#http">17. Envoyer et recevoir des données par HTTP</a>
<ul class="sectlevel2">
<li><a href="#_obtenir_des_données">17.1. Obtenir des données</a></li>
<li><a href="#_transformer_des_données">17.2. Transformer des données</a></li>
<li><a href="#_options_avancées">17.3. Options avancées</a></li>
<li><a href="#_jsonp">17.4. Jsonp</a></li>
<li><a href="#_tests">17.5. Tests</a></li>
</ul>
</li>
<li><a href="#router">18. Routeur</a>
<ul class="sectlevel2">
<li><a href="#_en_route">18.1. En route</a></li>
<li><a href="#_navigation">18.2. Navigation</a></li>
</ul>
</li>
<li><a href="#zones">19. Les Zones et la magie d&#8217;Angular</a>
<ul class="sectlevel2">
<li><a href="#_angularjs_1_x_et_le_em_digest_cycle_em">19.1. AngularJS&#160;1.x et le <em>digest cycle</em></a></li>
<li><a href="#_angular_2_et_les_zones">19.2. Angular&#160;2 et les zones</a></li>
</ul>
</li>
<li><a href="#ending">20. Ce n&#8217;est qu&#8217;un au revoir</a></li>
<li><a href="#changelog">21. Historique des versions</a>
<ul class="sectlevel2">
<li><a href="#_v1_2_2016_08_25">21.1. v1.2 - 2016-08-25</a></li>
<li><a href="#_v1_1_2016_05_11">21.2. v1.1 - 2016-05-11</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="intro">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Alors comme ça on veut devenir un ninja&#160;?!
Ça tombe bien, tu es entre de bonnes mains&#160;!</p>
</div>
<div class="paragraph">
<p>Mais pour y parvenir, nous avons un bon bout de chemin à parcourir ensemble,
semé d&#8217;embûches et de connaissances à acquérir :).</p>
</div>
<div class="paragraph">
<p>On vit une époque excitante pour le développement web.
Il y a un nouvel Angular, une réécriture complète de ce bon vieil AngularJS.
Pourquoi une réécriture complète&#160;? AngularJS&#160;1.x ne suffisait-il donc pas&#160;?</p>
</div>
<div class="paragraph">
<p>J&#8217;adore cet ancien AngularJS. Dans notre petite entreprise, on l&#8217;a utilisé pour construire plusieurs projets,
on a contribué du code au cœur du framework, on a formé des centaines de développeurs (oui, des centaines, littéralement),
et on a même écrit <a href="https://books.ninja-squad.com/angularjs">un livre</a> sur le sujet.</p>
</div>
<div class="paragraph">
<p>AngularJS est incroyablement productif une fois maîtrisé.
Mais cela ne nous empêche pas de constater ses faiblesses.
AngularJS n&#8217;est pas parfait, avec des concepts très difficiles à cerner, et des pièges ardus à éviter.</p>
</div>
<div class="paragraph">
<p>Et qui plus est, le web a bien évolué depuis qu&#8217;AngularJS a été conçu.
JavaScript a changé.
De nouveaux frameworks sont apparus, avec de belles idées, ou de meilleures implémentations.
Nous ne sommes pas le genre de développeurs à te conjurer d&#8217;utiliser tel outil plutôt que tel autre.
Nous connaissons juste très bien quelques outils, et savons ce qui peut correspondre au projet.
AngularJS était un de ces outils, qui nous permettait de construire des applications web bien testées, et de les construire vite.
On a aussi essayé de le plier quand il n&#8217;était pas forcément l&#8217;outil idéal. Merci de ne pas nous condamner, ça arrive aux meilleurs d&#8217;entre nous, n&#8217;est-ce pas&#160;? ;p</p>
</div>
<div class="paragraph">
<p>Angular&#160;2 sera-t-il l&#8217;outil que l&#8217;on utilisera sans aucune hésitation dans nos projets futurs&#160;?
C&#8217;est difficile à dire pour le moment, parce que ce framework est encore tout jeune, et que son écosystème est à peine bourgeonnant.</p>
</div>
<div class="paragraph">
<p>En tout cas, Angular&#160;2 a beaucoup de points positifs, et une vision dont peu de frameworks peuvent se targuer.
Il a été conçu pour le web de demain, avec ECMAScript&#160;6, les Web Components, et le mobile en tête.
Quand il a été annoncé, j&#8217;ai d&#8217;abord été triste, comme beaucoup de gens, en réalisant que cette version 2.0 n&#8217;allait pas être une simple évolution (et désolé si tu viens de l&#8217;apprendre).</p>
</div>
<div class="paragraph">
<p>Mais j&#8217;étais aussi très curieux de voir quelles idées allait apporter la talentueuse équipe de Google.</p>
</div>
<div class="paragraph">
<p>Alors j&#8217;ai commencé à écrire ce livre, dès les premiers commits,
lisant les documents de conception, regardant les vidéos de conférences, et analysant chaque commit depuis le début.
J&#8217;avais écrit mon premier livre sur AngularJS&#160;1.x quand c&#8217;était déjà un animal connu et bien apprivoisé.
Ce livre-ci est très différent, commencé quand rien n&#8217;était encore clair dans la tête même des concepteurs.
Parce que je savais que j&#8217;allais apprendre beaucoup, sur Angular évidemment,
mais aussi sur les concepts qui allaient définir le futur du développement web, et certains n&#8217;ont rien à voir avec Angular.
Et ce fut le cas. J&#8217;ai du creuser pas mal,
et j&#8217;espère que tu vas apprécier revivre ces découvertes avec moi, et comprendre comment ces concepts s&#8217;articulent avec Angular.</p>
</div>
<div class="paragraph">
<p>L&#8217;ambition de cet ebook est d&#8217;évoluer avec Angular.
S&#8217;il s&#8217;avère qu&#8217;Angular devient le grand framework qu&#8217;on espère,
tu en recevras des mises à jour avec des bonnes pratiques et de nouvelles fonctionnalités quand elles émergeront
(et avec moins de fautes de frappe, parce qu&#8217;il en reste probablement malgré nos nombreuses relectures&#8230;&#8203;).
Et j&#8217;adorerais avoir tes retours, si certains chapitres ne sont pas assez clairs,
si tu as repéré une erreur, ou si tu as une meilleure solution pour certains points.</p>
</div>
<div class="paragraph">
<p>Je suis cependant assez confiant sur nos exemples de code,
parce qu&#8217;ils sont extraits d&#8217;un vrai projet, et sont couverts par des centaines de tests unitaires.
C&#8217;était la seule façon d&#8217;écrire un livre sur un framework en gestation, et de repérer les problèmes
qui arrivaient inévitablement avec chaque release.</p>
</div>
<div class="paragraph">
<p>Même si au final tu n&#8217;es pas convaincu par Angular, je suis à peu près sûr que tu vas apprendre deux-trois trucs en chemin.</p>
</div>
<div class="paragraph">
<p>Si tu as acheté le "pack pro" (merci&#160;!), tu pourras construire une petite application morceau par morceau, tout au long du livre.
Cette application s&#8217;appelle <strong>PonyRacer</strong>, c&#8217;est un site web où tu peux parier sur des courses de poneys.
Tu peux même <a href="http://ponyracer.ninja-squad.com">tester cette application ici</a>&#160;!
Vas-y, je t&#8217;attend.</p>
</div>
<div class="paragraph">
<p>Cool, non&#160;?</p>
</div>
<div class="paragraph">
<p>Mais en plus d&#8217;être super cool, c&#8217;est une application complète.
Tu devras écrire des composants, des formulaires, des tests,
tu devras utiliser le routeur, appeler une API HTTP (fournie), et même faire des Web Sockets.
Elle intègre tous les morceaux dont tu auras besoin pour construire une vraie application.</p>
</div>
<div class="paragraph">
<p>Chaque exercice viendra avec son squelette, un ensemble d&#8217;instructions et quelques tests.
Quand tu auras tous les tests en succès, tu auras terminé l&#8217;exercice&#160;!</p>
</div>
<div class="paragraph">
<p>Si tu n&#8217;as pas acheté le "pack pro" (tu devrais), ne t&#8217;inquiète pas&#160;:
tu apprendras tout ce dont tu auras besoin.
Mais tu ne construiras pas cette application incroyable avec de beaux poneys en pixel art.
Quel dommage :)&#160;!</p>
</div>
<div class="paragraph">
<p>Tu te rendras vite compte qu&#8217;au-delà d&#8217;Angular, nous avons essayé d&#8217;expliquer les concepts au cœur du framework.
Les premiers chapitres ne parlent même pas d&#8217;Angular&#160;: ce sont ceux que j&#8217;appelle les "chapitres conceptuels",
ils te permettront de monter en puissance avec les nouveautés intéressantes de notre domaine.</p>
</div>
<div class="paragraph">
<p>Ensuite, nous construirons progressivement notre connaissance du framework, avec les composants, les templates, les <em>pipes</em>, les formulaires, http, le routeur, les tests&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Et enfin, nous nous attaquerons à quelques sujets avancés.
Mais c&#8217;est une autre histoire.</p>
</div>
<div class="paragraph">
<p>Passons cette trop longue introduction,
et jetons-nous sur un sujet qui va définitivement changer notre façon de coder&#160;: ECMAScript&#160;6.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Cet ebook utilise Angular 2 version 2.0.0-rc.5 dans les exemples.
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="es6">2. Une rapide introduction à ECMASCRIPT&#160;6</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Si tu lis ce livre, on peut imaginer que tu as déjà entendu parler de JavaScript. Ce qu&#8217;on appelle JavaScript (JS) est une des implémentations d&#8217;une spécification standardisée, appelée ECMAScript. La version de la spécification que tu connais le plus est probablement la version 5&#160;: c&#8217;est celle utilisée depuis de nombreuses années.</p>
</div>
<div class="paragraph">
<p>Depuis quelque temps, une nouvelle version de cette spécification est en travaux&#160;: ECMASCRIPT&#160;6, ES6, ou ECMASCRIPT&#160;2015. Je l&#8217;appellerai désormais systématiquement ES6, parce que c&#8217;est son petit nom le plus populaire. Elle ajoute une tonne de fonctionnalités à JavaScript, comme les classes, les constantes, les <em>arrow functions</em>, les générateurs&#8230;&#8203; Il y a tellement de choses qu&#8217;on ne peut pas tout couvrir, sauf à y consacrer entièrement ce livre. Mais Angular&#160;2 a été conçu pour bénéficier de cette nouvelle version de JavaScript. Même si tu peux toujours utiliser ton bon vieux JavaScript, tu auras plein d&#8217;avantages à utiliser ES6. Ainsi, nous allons consacrer ce chapitre à découvrir ES6, et voir comment il peut nous être utile pour construire une application Angular&#160;2.</p>
</div>
<div class="paragraph">
<p>On va laisser beaucoup d&#8217;aspects de côté, et on ne sera pas exhaustifs sur ce qu&#8217;on verra. Si tu connais déjà ES6, tu peux directement sauter ce chapitre. Sinon, tu vas apprendre des trucs plutôt incroyables qui te serviront à l&#8217;avenir même si tu n&#8217;utilises finalement pas Angular&#160;!</p>
</div>
<div class="sect2">
<h3 id="_transpileur">2.1. Transpileur</h3>
<div class="paragraph">
<p>ES6 vient d&#8217;atteindre son état final, il n&#8217;est pas encore supporté par tous les navigateurs. Et bien sûr, certains navigateurs vont être en retard (mais, pour une fois, Microsoft fait un bon travail avec Edge). Ainsi, à quoi bon présenter cela s&#8217;il faut être prudent sur ce qu&#8217;on peut utiliser ou non&#160;? Et tu as raison, car rares sont les applications qui peuvent se permettre d&#8217;ignorer les navigateurs devenus obsolètes. Mais comme tous les développeurs qui ont essayé ES6 ont hâte de l&#8217;utiliser dans leurs applications, la communauté a trouvé une solution&#160;: un transpileur.</p>
</div>
<div class="paragraph">
<p>Un transpileur prend du code source ES6 en entrée et génère du code ES5, qui peut tourner dans n&#8217;importe quel navigateur. Il génère même les fichiers <em>source map</em>, qui permettent de débugger directement le code ES6 depuis le navigateur. Au moment de l&#8217;écriture de ces lignes, il y a deux outils principaux pour transpiler de l&#8217;ES6&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/google/traceur-compiler">Traceur</a>, un projet Google.</p>
</li>
<li>
<p><a href="https://babeljs.io/">Babeljs</a>, un projet démarré par Sebastian McKenzie, un jeune développeur de 17 ans (oui, ça fait mal), et qui a reçu beaucoup de contributions extérieures.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Chacun a ses avantages et ses inconvénients. Par exemple Babeljs produit un code source plus lisible que Traceur. Mais Traceur est un projet Google, alors évidemment, Angular et Traceur vont bien ensemble. Le code source d&#8217;Angular&#160;2 était d&#8217;ailleurs transpilé avec Traceur, avant de basculer en TypeScript.
TypeScript est un langage open source développé par Microsoft. C&#8217;est un sur-ensemble typé de JavaScript qui compile vers du JavaScript standard, mais nous étudierons cela très bientôt.</p>
</div>
<div class="paragraph">
<p>Pour parler franchement, Babel est biiiiien plus populaire que Traceur, on aurait donc tendance à te le conseiller.
Le projet devient peu à peu le standard de-facto.</p>
</div>
<div class="paragraph">
<p>Si tu veux jouer avec ES6, ou le mettre en place dans un de tes projets, jette un œil à ces transpileurs, et ajoute une étape à la construction de ton projet. Elle prendra tes fichiers sources ES6 et générera l&#8217;équivalent en ES5. Ça fonctionne très bien mais, évidemment, certaines fonctionnalités nouvelles sont difficiles ou impossibles à transformer, parce qu&#8217;elles n&#8217;existent tout simplement pas en ES5. Néanmoins l&#8217;état d&#8217;avancement actuel de ces transpileurs est largement suffisant pour les utiliser sans se faire de souci, alors jetons un coup d&#8217;œil à ces nouveautés ES6.</p>
</div>
</div>
<div class="sect2">
<h3 id="__code_let_code">2.2. <code>let</code></h3>
<div class="paragraph">
<p>Si tu fais du JS depuis quelques temps, tu sais que la déclaration de variable avec <code>var</code> peut être délicate. Dans à peu près tous les autres langages, une variable existe à partir de la ligne contenant la déclaration de cette variable. Mais en JS, il y a un concept nommé <em>hoisting</em> ("remontée") qui déclare la variable au tout début de la fonction, même si tu l&#8217;as écrite plus loin.</p>
</div>
<div class="paragraph">
<p>Ainsi, déclarer une variable <code>name</code> dans le bloc <code>if</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">getPonyFullName</span>(pony) {
  <span class="keyword">if</span> (pony.isChampion) {
    <span class="keyword">var</span> name = <span class="string"><span class="delimiter">'</span><span class="content">Champion </span><span class="delimiter">'</span></span> + pony.name;
    <span class="keyword">return</span> name;
  }
  <span class="keyword">return</span> pony.name;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>est équivalent à la déclarer tout en haut de la fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">getPonyFullName</span>(pony) {
  <span class="keyword">var</span> name;
  <span class="keyword">if</span> (pony.isChampion) {
    name = <span class="string"><span class="delimiter">'</span><span class="content">Champion </span><span class="delimiter">'</span></span> + pony.name;
    <span class="keyword">return</span> name;
  }
  <span class="comment">// name is still accessible here</span>
  <span class="keyword">return</span> pony.name;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>ES6 introduit un nouveau mot-clé pour la déclaration de variable, <code>let</code>, qui se comporte enfin comme on pourrait s&#8217;y attendre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">getPonyFullName</span>(pony) {
  <span class="keyword">if</span> (pony.isChampion) {
    let name = <span class="string"><span class="delimiter">'</span><span class="content">Champion </span><span class="delimiter">'</span></span> + pony.name;
    <span class="keyword">return</span> name;
  }
  <span class="comment">// name is not accessible here</span>
  <span class="keyword">return</span> pony.name;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;accès à la variable <code>name</code> est maintenant restreint à son bloc. <code>let</code> a été pensé pour remplacer définitivement <code>var</code> à long terme, donc tu peux abandonner ce bon vieux <code>var</code> au profit de <code>let</code>. La bonne nouvelle est que ça doit être indolore, et que si ça ne l&#8217;est pas, c&#8217;est que tu as mis le doigt sur un défaut de ton code&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_constantes">2.3. Constantes</h3>
<div class="paragraph">
<p>Tant qu&#8217;on est sur le sujet des nouveaux mot-clés et des variables, il y en a un autre qui peut être intéressant. ES6 introduit aussi <code>const</code> pour déclarer des&#8230;&#8203; constantes&#160;! Si tu déclares une variable avec <code>const</code>, elle doit obligatoirement être initialisée, et tu ne pourras plus lui affecter de nouvelle valeur par la suite.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const PONIES_IN_RACE = <span class="integer">6</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">PONIES_IN_RACE = <span class="integer">7</span>; <span class="comment">// SyntaxError</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>J&#8217;ai utilisé ici l&#8217;écriture en <a href="https://fr.wikipedia.org/wiki/Snake_case">snake_case</a>, en MAJUSCULE, pour nommer la constante, comme on le ferait en Java. Il n&#8217;y a aucune obligation à le faire, mais ça semble naturel d&#8217;avoir une convention d&#8217;écriture pour les constantes&#160;: trouve la tienne et tiens-toi à ce choix&#160;!</p>
</div>
<div class="paragraph">
<p>Comme pour les variables déclarées avec <code>let</code>, les constantes ne sont pas hoisted ("remontées") et sont bien déclarées dans leur bloc.</p>
</div>
<div class="paragraph">
<p>Il y a un détail qui peut cependant surprendre le profane. Tu peux initialiser une constante avec un objet et modifier par la suite le contenu de l&#8217;objet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const PONY = {};
PONY.color = <span class="string"><span class="delimiter">'</span><span class="content">blue</span><span class="delimiter">'</span></span>; <span class="comment">// works</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais tu ne peux pas assigner à la constante un nouvel objet&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const PONY = {};</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">PONY = {<span class="key">color</span>: <span class="string"><span class="delimiter">'</span><span class="content">blue</span><span class="delimiter">'</span></span>}; <span class="comment">// SyntaxError</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Même chose avec les tableaux&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const PONIES = [];
PONIES.push({ <span class="key">color</span>: <span class="string"><span class="delimiter">'</span><span class="content">blue</span><span class="delimiter">'</span></span> }); <span class="comment">// works</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">PONIES = []; <span class="comment">// SyntaxError</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_création_d_objets">2.4. Création d&#8217;objets</h3>
<div class="paragraph">
<p>Ce n&#8217;est pas un nouveau mot-clé, mais ça peut te faire tiquer en lisant du code ES6. Il y a un nouveau raccourci pour créer des objets, quand la propriété de l&#8217;objet que tu veux créer a le même nom que la variable utilisée comme valeur pour l&#8217;attribut.</p>
</div>
<div class="paragraph">
<p>Exemple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">createPony</span>() {
  let name = <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span>;
  let color = <span class="string"><span class="delimiter">'</span><span class="content">blue</span><span class="delimiter">'</span></span>;
  <span class="keyword">return</span> { <span class="key">name</span>: name, <span class="key">color</span>: color };
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>peut être simplifié en&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">createPony</span>() {
  let name = <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span>;
  let color = <span class="string"><span class="delimiter">'</span><span class="content">blue</span><span class="delimiter">'</span></span>;
  <span class="keyword">return</span> { name, color };
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_affectations_déstructurées">2.5. Affectations déstructurées</h3>
<div class="paragraph">
<p>Celui-là aussi peut te faire tiquer en lisant du code ES6. Il y a maintenant un raccourci pour affecter des variables à partir d&#8217;objets ou de tableaux.</p>
</div>
<div class="paragraph">
<p>En ES5&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> httpOptions = { <span class="key">timeout</span>: <span class="integer">2000</span>, <span class="key">isCache</span>: <span class="predefined-constant">true</span> };
<span class="comment">// later</span>
<span class="keyword">var</span> httpTimeout = httpOptions.timeout;
<span class="keyword">var</span> httpCache = httpOptions.isCache;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, en ES6, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let httpOptions = { <span class="key">timeout</span>: <span class="integer">2000</span>, <span class="key">isCache</span>: <span class="predefined-constant">true</span> };
<span class="comment">// later</span>
let { <span class="key">timeout</span>: httpTimeout, <span class="key">isCache</span>: httpCache } = httpOptions;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et tu auras le même résultat. Ca peut être perturbant, parce que la clé est la propriété à lire dans l&#8217;objet et la valeur est la variable à affecter. Mais ça fonctionne bien&#160;! Et même mieux&#160;: si la variable que tu veux affecter a le même nom que la propriété de l&#8217;objet à lire, tu peux écrire simplement&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let httpOptions = { <span class="key">timeout</span>: <span class="integer">2000</span>, <span class="key">isCache</span>: <span class="predefined-constant">true</span> };
<span class="comment">// later</span>
let { timeout, isCache } = httpOptions;
<span class="comment">// you now have a variable named 'timeout'</span>
<span class="comment">// and one named 'isCache' with correct values</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Le truc cool est que ça marche aussi avec des objets imbriqués&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let httpOptions = { <span class="key">timeout</span>: <span class="integer">2000</span>, <span class="key">cache</span>: { <span class="key">age</span>: <span class="integer">2</span> } };
<span class="comment">// later</span>
let { <span class="key">cache</span>: { age } } = httpOptions;
<span class="comment">// you now have a variable named 'age' with value 2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Et la même chose est possible avec des tableaux&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let timeouts = [<span class="integer">1000</span>, <span class="integer">2000</span>, <span class="integer">3000</span>];
<span class="comment">// later</span>
let [shortTimeout, mediumTimeout] = timeouts;
<span class="comment">// you now have a variable named 'shortTimeout' with value 1000</span>
<span class="comment">// and a variable named 'mediumTimeout' with value 2000</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Et bien sûr ça fonctionne avec des tableaux de tableaux, des tableaux dans des objets, etc&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Cette fonctionnalité est pratique pour déclarer plusieurs variables à partir d&#8217;un objet retourné par une fonction. Imagine une fonction <code>randomPonyInRace</code> qui retourne un poney et sa position dans la course.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">randomPonyInRace</span>() {
  let pony = { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span> };
  let position = <span class="integer">2</span>;
  <span class="comment">// ...</span>
  <span class="keyword">return</span> { pony, position };
}

let { position, pony } = randomPonyInRace();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette nouvelle fonctionnalité de déstructuration assigne la <code>position</code> retournée par la méthode à la variable <code>position</code>, et le poney à la variable <code>pony</code>. Et si tu n&#8217;as pas usage de la position, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">randomPonyInRace</span>() {
  let pony = { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span> };
  let position = <span class="integer">2</span>;
  <span class="comment">// ...</span>
  <span class="keyword">return</span> { pony, position };
}

let { pony } = randomPonyInRace();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et tu auras seulement une variable <code>pony</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_paramètres_optionnels_et_valeurs_par_défaut">2.6. Paramètres optionnels et valeurs par défaut</h3>
<div class="paragraph">
<p>JS a la particularité de permettre aux développeurs d&#8217;appeler une fonction avec un nombre d&#8217;arguments variable&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>si tu passes plus d&#8217;arguments que déclarés par la fonction, les arguments supplémentaires sont tout simplement ignorés (pour être tout à fait exact, tu peux quand même les utiliser dans la fonction avec la variable spéciale <code>arguments</code>).</p>
</li>
<li>
<p>si tu passes moins d&#8217;arguments que déclarés par la fonction, les paramètres manquants auront la valeur <code>undefined</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ce dernier cas est celui qui nous intéresse. Souvent, on passe moins d&#8217;arguments quand les paramètres sont optionnels, comme dans l&#8217;exemple suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">getPonies</span>(size, page) {
  size = size || <span class="integer">10</span>;
  page = page || <span class="integer">1</span>;
  <span class="comment">// ...</span>
  server.get(size, page);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les paramètres optionnels ont la plupart du temps une valeur par défaut. L&#8217;opérateur OR (<code>||</code>) va retourner l&#8217;opérande de droite si celui de gauche est <code>undefined</code>, comme ça serait le cas si le paramètre n&#8217;a pas été fourni par l&#8217;appelant (pour être précis, si l&#8217;opérande de gauche est <em>falsy</em>, c&#8217;est-à-dire <code>undefined</code>, <code>0</code>, <code>false</code>, <code>""</code>, etc&#8230;&#8203;). Avec cette astuce, la fonction <code>getPonies</code> peut ainsi être invoquée&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">getPonies(<span class="integer">20</span>, <span class="integer">2</span>);
getPonies(); <span class="comment">// same as getPonies(10, 1);</span>
getPonies(<span class="integer">15</span>); <span class="comment">// same as getPonies(15, 1);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela fonctionnait, mais ce n&#8217;était pas évident de savoir que les paramètres étaient optionnels, sauf à lire le corps de la fonction. ES6 offre désormais une façon plus formelle de déclarer des paramètres optionnels, dès la déclaration de la fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">getPonies</span>(size = <span class="integer">10</span>, page = <span class="integer">1</span>) {
  <span class="comment">// ...</span>
  server.get(size, page);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant il est limpide que la valeur par défaut de <code>size</code> sera 10 et celle de <code>page</code> sera <code>1</code> s&#8217;ils ne sont pas fournis.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Il y a cependant une subtile différence, car maintenant <code>0</code> ou <code>""</code> sont des valeurs valides, et ne seront pas remplacées par les valeurs par défaut, comme <code>size = size || 10</code> l&#8217;aurait fait. C&#8217;est donc plutôt équivalent à <code>size = size === undefined ? 10: size;</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La valeur par défaut peut aussi être un appel de fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">getPonies</span>(size = defaultSize(), page = <span class="integer">1</span>) {
  <span class="comment">// the defaultSize method will be called if size is not provided</span>
  <span class="comment">// ...</span>
  server.get(size, page);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou même d&#8217;autres variables, d&#8217;autres variables globales, ou d&#8217;autres paramètres de la même fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">getPonies</span>(size = defaultSize(), page = size - <span class="integer">1</span>) {
  <span class="comment">// if page is not provided, it will be set to the value</span>
  <span class="comment">// of the size parameter minus one.</span>
  <span class="comment">// ...</span>
  server.get(size, page);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que si tu essayes d&#8217;utiliser des paramètres sur la droite, leur valeur sera toujours <code>undefined</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">getPonies</span>(size = page, page = <span class="integer">1</span>) {
  <span class="comment">// size will always be undefined, as the page parameter is on its right.</span>
  server.get(size, page);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce mécanisme de valeur par défaut ne s&#8217;applique pas qu&#8217;aux paramètres de fonction, mais aussi aux valeurs de variables, par exemple dans le cas d&#8217;une affectation déstructurée&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let { timeout = <span class="integer">1000</span> } = httpOptions;
<span class="comment">// you now have a variable named 'timeout',</span>
<span class="comment">// with the value of 'httpOptions.timeout' if it exists</span>
<span class="comment">// or 1000 if not</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="__em_rest_operator_em">2.7. <em>Rest operator</em></h3>
<div class="paragraph">
<p>ES6 introduit aussi une nouvelle syntaxe pour déclarer un nombre variable de paramètres dans une fonction. Comme on le disait précédemment, tu peux toujours passer des arguments supplémentaires à un appel de fonction, et y accéder avec la variable spéciale <code>arguments</code>. Tu peux faire quelque chose comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">addPonies</span>(ponies) {
  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="integer">0</span>; i &lt; <span class="local-variable">arguments</span>.length; i++) {
    poniesInRace.push(<span class="local-variable">arguments</span>[i]);
  }
}

addPonies(<span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Pinkie Pie</span><span class="delimiter">'</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais tu seras d&#8217;accord pour dire que ce n&#8217;est ni élégant, ni évident&#160;: le paramètre <code>ponies</code> n&#8217;est jamais utilisé, et rien n&#8217;indique que l&#8217;on peut fournir plusieurs poneys.</p>
</div>
<div class="paragraph">
<p>ES6 propose une syntaxe bien meilleure, grâce au <em>rest operator</em> ("opérateur de reste").</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">addPonies</span>(...ponies) {
  <span class="keyword">for</span> (let pony of ponies) {
    poniesInRace.push(pony);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ponies</code> est désormais un véritable tableau, sur lequel on peut itérer.
La boucle <code>for &#8230;&#8203; of</code> utilisée pour l&#8217;itération est aussi une nouveauté d&#8217;ES6.
Elle permet d&#8217;être sûr de n&#8217;itérer que sur les valeurs de la collection,
et non pas sur ses propriétés comme <code>for &#8230;&#8203; in</code>.
Ne trouves-tu pas que notre code est maintenant bien plus beau et lisible&#160;?</p>
</div>
<div class="paragraph">
<p>Le <em>rest operator</em> peut aussi fonctionner avec des affectations déstructurées&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let [winner, ...losers] = poniesInRace;
<span class="comment">// assuming 'poniesInRace' is an array containing several ponies</span>
<span class="comment">// 'winner' will have the first pony,</span>
<span class="comment">// and 'losers' will be an array of the other ones</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Le <em>rest operator</em> ne doit pas être confondu avec le <em>spread operator</em> ("opérateur d&#8217;étalement"), même si, on te l&#8217;accorde, ils se ressemblent dangereusement&#160;! Le <em>spread operator</em> est son opposé&#160;: il prend un tableau, et l&#8217;étale en arguments variables. Le seul cas d&#8217;utilisation qui me vient à l&#8217;esprit serait pour les fonctions comme <code>min</code> ou <code>max</code>, qui peuvent recevoir des arguments variables, et que tu voudrais appeler avec un tableau&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let ponyPrices = [<span class="integer">12</span>, <span class="integer">3</span>, <span class="integer">4</span>];
let minPrice = Math.min(...ponyPrices);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_classes">2.8. Classes</h3>
<div class="paragraph">
<p>Une des fonctionnalités les plus emblématiques, et qui va largement être utilisée dans l&#8217;écriture d&#8217;applications Angular&#160;: ES6 introduit les classes en JavaScript&#160;! Tu pourras désormais facilement faire de l&#8217;héritage de classes en JavaScript. Tu pouvais déjà, avec l&#8217;héritage prototypal, mais ce n&#8217;était pas chose facile, surtout pour les débutants&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Maintenant c&#8217;est les doigts dans le nez, regarde&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> Pony {
  constructor(color) {
    <span class="local-variable">this</span>.color = color;
  }

  toString() {
    <span class="keyword">return</span> <span class="error">`</span><span class="predefined">$</span>{<span class="local-variable">this</span>.color} pony<span class="error">`</span>;
    <span class="comment">// see that? It is another cool feature of ES6, called template literals</span>
    <span class="comment">// we'll talk about these quickly!</span>
  }
}
let bluePony = <span class="keyword">new</span> Pony(<span class="string"><span class="delimiter">'</span><span class="content">blue</span><span class="delimiter">'</span></span>);
console.log(bluePony.toString()); <span class="comment">// blue pony</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Les déclarations de classes, contrairement aux déclarations de fonctions, ne sont pas <em>hoisted</em> ("remontées"), donc tu dois déclarer une classe avant de l&#8217;utiliser. Tu as probablement remarqué la fonction spéciale <code>constructor</code>. C&#8217;est le constructeur, la fonction appelée à la création d&#8217;un nouvel objet avec le mot-clé <code>new</code>. Dans l&#8217;exemple, il requiert une couleur, et nous créons une nouvelle instance de la classe <code>Pony</code> avec la couleur "blue". Une classe peut aussi avoir des méthodes, appelables sur une instance, comme la méthode <code>toString()</code> dans l&#8217;exemple.</p>
</div>
<div class="paragraph">
<p>Une classe peut aussi avoir des attributs et des méthodes statiques&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> Pony {
  <span class="reserved">static</span> defaultSpeed() {
    <span class="keyword">return</span> <span class="integer">10</span>;
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ces méthodes statiques ne peuvent être appelées que sur la classe directement&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let speed = Pony.defaultSpeed();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une classe peut avoir des accesseurs (<em>getters, setters</em>), si tu veux implémenter du code sur ces opérations&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> Pony {
  get color() {
    console.log(<span class="string"><span class="delimiter">'</span><span class="content">get color</span><span class="delimiter">'</span></span>);
    <span class="keyword">return</span> <span class="local-variable">this</span>._color;
  }

  set color(newColor) {
    console.log(<span class="error">`</span>set color <span class="predefined">$</span>{newColor}<span class="error">`</span>);
    <span class="local-variable">this</span>._color = newColor;
  }
}
let pony = <span class="keyword">new</span> Pony();
pony.color = <span class="string"><span class="delimiter">'</span><span class="content">red</span><span class="delimiter">'</span></span>;
<span class="comment">// 'set color red'</span>
console.log(pony.color);
<span class="comment">// 'get color'</span>
<span class="comment">// 'red'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Et bien évidemment, si tu as des classes, l&#8217;héritage est possible en ES6.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> Animal {
  speed() {
    <span class="keyword">return</span> <span class="integer">10</span>;
  }
}
<span class="reserved">class</span> Pony <span class="reserved">extends</span> Animal {

}
let pony = <span class="keyword">new</span> Pony();
console.log(pony.speed()); <span class="comment">// 10, as Pony inherits the parent method</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Animal est appelée la classe de base, et Pony la classe dérivée. Comme tu l&#8217;as vu, la classe dérivée possède toutes les méthodes de la classe de base. Mais elle peut aussi les redéfinir&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> Animal {
  speed() {
    <span class="keyword">return</span> <span class="integer">10</span>;
  }
}
<span class="reserved">class</span> Pony <span class="reserved">extends</span> Animal {
  speed() {
    <span class="keyword">return</span> <span class="reserved">super</span>.speed() + <span class="integer">10</span>;
  }
}
let pony = <span class="keyword">new</span> Pony();
console.log(pony.speed()); <span class="comment">// 20, as Pony overrides the parent method</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, le mot-clé <code>super</code> permet d&#8217;invoquer la méthode de la classe de base, avec <code>super.speed()</code> par exemple.</p>
</div>
<div class="paragraph">
<p>Ce mot-clé <code>super</code> peut aussi être utilisé dans les constructeurs, pour invoquer le constructeur de la classe de base&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> Animal {
  constructor(speed) {
    <span class="local-variable">this</span>.speed = speed;
  }
}
<span class="reserved">class</span> Pony <span class="reserved">extends</span> Animal {
  constructor(speed, color) {
    <span class="reserved">super</span>(speed);
    <span class="local-variable">this</span>.color = color;
  }
}
let pony = <span class="keyword">new</span> Pony(<span class="integer">20</span>, <span class="string"><span class="delimiter">'</span><span class="content">blue</span><span class="delimiter">'</span></span>);
console.log(pony.speed); <span class="comment">// 20</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="__em_promises_em">2.9. <em>Promises</em></h3>
<div class="paragraph">
<p>Les <em>promises</em> ("promesses") ne sont pas si nouvelles, et tu les connais ou les utilises peut-être déjà, parce qu&#8217;elles tenaient une place importante dans AngularJS&#160;1.x. Mais comme nous les utiliserons beaucoup avec Angular&#160;2, et même si tu n&#8217;utilises que du pur JS sans Angular, on pense que c&#8217;est important de s&#8217;y attarder un peu.</p>
</div>
<div class="paragraph">
<p>L&#8217;objectif des <em>promises</em> est de simplifier la programmation asynchrone. Notre code JS est plein d&#8217;asynchronisme, comme des requêtes AJAX, et en général on utilise des <em>callbacks</em> pour gérer le résultat et l&#8217;erreur. Mais le code devient vite confus, avec des <em>callbacks</em> dans des <em>callbacks</em>, qui le rendent illisible et peu maintenable. Les <em>promises</em> sont plus pratiques que les <em>callbacks</em>, parce qu&#8217;elles permettent d&#8217;écrire du code à plat, et le rendent ainsi plus simple à comprendre. Prenons un cas d&#8217;utilisation simple, où on doit récupérer un utilisateur, puis ses droits, puis mettre à jour un menu quand on a récupéré tout ça&#160;.</p>
</div>
<div class="paragraph">
<p>Avec des <em>callbacks</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">getUser(login, <span class="keyword">function</span> (user) {
  getRights(user, <span class="keyword">function</span> (rights) {
    updateMenu(rights);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec des <em>promises</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">getUser(login)
  .then(<span class="keyword">function</span> (user) {
    <span class="keyword">return</span> getRights(user);
  })
  .then(<span class="keyword">function</span> (rights) {
    updateMenu(rights);
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>J&#8217;aime cette version, parce qu&#8217;elle s&#8217;exécute comme elle se lit&#160;: je veux récupérer un utilisateur, puis ses droits, puis mettre à jour le menu.</p>
</div>
<div class="paragraph">
<p>Une <em>promise</em> est un objet <em>thenable</em>, ce qui signifie simplement qu&#8217;il a une méthode <code>then</code>. Cette méthode prend deux arguments&#160;: un callback de succès et un callback d&#8217;erreur. Une <em>promise</em> a trois états&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>pending</em> ("en cours")&#160;: quand la <em>promise</em> n&#8217;est pas réalisée, par exemple quand l&#8217;appel serveur n&#8217;est pas encore terminé.</p>
</li>
<li>
<p><em>fulfilled</em> ("réalisée")&#160;: quand la <em>promise</em> s&#8217;est réalisée avec succès, par exemple quand l&#8217;appel HTTP serveur a retourné un status 200-OK.</p>
</li>
<li>
<p><em>rejected</em> ("rejetée")&#160;: quand la <em>promise</em> a échoué, par exemple si l&#8217;appel HTTP serveur a retourné un status 404-NotFound.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Quand la promesse est réalisée (<em>fulfilled</em>), alors le callback de succès est invoqué, avec le résultat en argument. Si la promesse est rejetée (<em>rejected</em>), alors le callback d&#8217;erreur est invoqué, avec la valeur rejetée ou une erreur en argument.</p>
</div>
<div class="paragraph">
<p>Alors, comment crée-t-on une <em>promise</em>&#160;? C&#8217;est simple, il y a une nouvelle classe <code>Promise</code>, dont le constructeur attend une fonction avec deux paramètres, <code>resolve</code> et <code>reject</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let <span class="function">getUser</span> = <span class="keyword">function</span> (login) {
  <span class="keyword">return</span> <span class="keyword">new</span> Promise(<span class="keyword">function</span> (resolve, reject) {
    <span class="comment">// async stuff, like fetching users from server, returning a response</span>
    <span class="keyword">if</span> (response.status === <span class="integer">200</span>) {
      resolve(response.data);
    } <span class="keyword">else</span> {
      reject(<span class="string"><span class="delimiter">'</span><span class="content">No user</span><span class="delimiter">'</span></span>);
    }
  });
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une fois la <em>promise</em> créée, tu peux enregistrer des <em>callbacks</em>, via la méthode <code>then</code>. Cette méthode peut recevoir deux arguments, les deux <em>callbacks</em> que tu veux voir invoqués en cas de succès ou en cas d&#8217;échec. Dans l&#8217;exemple suivant, nous passons simplement un seul <em>callback</em> de succès, ignorant ainsi une erreur potentielle&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">getUser(login)
  .then(<span class="keyword">function</span> (user) {
    console.log(user);
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand la promesse sera réalisée, le callback de succès (qui se contente ici de tracer l&#8217;utilisateur en console) sera invoqué.</p>
</div>
<div class="paragraph">
<p>La partie la plus cool c&#8217;est que le code peut s&#8217;écrire à plat. Si par exemple ton <em>callback</em> de succès retourne lui aussi une <em>promise</em>, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">getUser(login)
  .then(<span class="keyword">function</span> (user) {
    <span class="keyword">return</span> getRights(user) <span class="comment">// getRights is returning a promise</span>
      .then(<span class="keyword">function</span> (rights) {
        <span class="keyword">return</span> updateMenu(rights);
      });
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou plus élégamment&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">getUser(login)
  .then(<span class="keyword">function</span> (user) {
    <span class="keyword">return</span> getRights(user); <span class="comment">// getRights is returning a promise</span>
  })
  .then(<span class="keyword">function</span> (rights) {
    <span class="keyword">return</span> updateMenu(rights);
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un autre truc cool est la gestion d&#8217;erreur&#160;: tu peux définir une gestion d&#8217;erreur par <em>promise</em>, ou globale à toute la chaîne.</p>
</div>
<div class="paragraph">
<p>Une gestion d&#8217;erreur par <em>promise</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">getUser(login)
  .then(<span class="keyword">function</span> (user) {
    <span class="keyword">return</span> getRights(user);
  }, <span class="keyword">function</span> (error) {
    console.log(error); <span class="comment">// will be called if getUser fails</span>
    <span class="keyword">return</span> Promise.reject(error);
  })
  .then(<span class="keyword">function</span> (rights) {
    <span class="keyword">return</span> updateMenu(rights);
  }, <span class="keyword">function</span> (error) {
    console.log(error); <span class="comment">// will be called if getRights fails</span>
    <span class="keyword">return</span> Promise.reject(error);
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une gestion d&#8217;erreur globale pour toute la chaîne&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">getUser(login)
  .then(<span class="keyword">function</span> (user) {
    <span class="keyword">return</span> getRights(user);
  })
  .then(<span class="keyword">function</span> (rights) {
    <span class="keyword">return</span> updateMenu(rights);
  })
  .<span class="keyword">catch</span>(<span class="keyword">function</span> (error) {
    console.log(error); <span class="comment">// will be called if getUser or getRights fails</span>
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu devrais sérieusement t&#8217;intéresser aux <em>promises</em>, parce que ça va devenir la nouvelle façon d&#8217;écrire des APIs, et toutes les bibliothèques vont bientôt les utiliser. Même les bibliothèques standards&#160;: c&#8217;est le cas de la nouvelle <a href="https://fetch.spec.whatwg.org/">Fetch API</a> par exemple.</p>
</div>
</div>
<div class="sect2">
<h3 id="__em_arrow_functions_em">2.10. (<em>arrow functions</em>)</h3>
<div class="paragraph">
<p>Un truc que j&#8217;adore dans ES6 est la nouvelle syntaxe <em>arrow function</em> ("fonction flèche"), utilisant l&#8217;opérateur <em>fat arrow</em> ("grosse flèche")&#160;: <code>&#8658;</code>. C&#8217;est super utile pour les <em>callbacks</em> et les fonctions anonymes&#160;!</p>
</div>
<div class="paragraph">
<p>Prenons notre exemple précédent avec des <em>promises</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">getUser(login)
  .then(<span class="keyword">function</span> (user) {
    <span class="keyword">return</span> getRights(user); <span class="comment">// getRights is returning a promise</span>
  })
  .then(<span class="keyword">function</span> (rights) {
    <span class="keyword">return</span> updateMenu(rights);
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il peut être réécrit avec des <em>arrow functions</em> comme ceci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">getUser(login)
  .then(user =&gt; getRights(user))
  .then(rights =&gt; updateMenu(rights))</code></pre>
</div>
</div>
<div class="paragraph">
<p>N&#8217;est-ce pas super cool&#160;?!</p>
</div>
<div class="paragraph">
<p>Note que le <code>return</code> est implicite s&#8217;il n&#8217;y a pas de bloc&#160;: pas besoin d&#8217;écrire <code>user &#8658; return getRights(user)</code>. Mais si nous avions un bloc, nous aurions besoin d&#8217;un <code>return</code> explicite&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">getUser(login)
  .then(user =&gt; {
    console.log(user);
    <span class="keyword">return</span> getRights(user);
  })
  .then(rights =&gt; updateMenu(rights))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et les <em>arrow functions</em> ont une particularité bien agréable que n&#8217;ont pas les fonctions normales&#160;: le <code>this</code> reste attaché lexicalement, ce qui signifie que ces <em>arrow functions</em> n&#8217;ont pas un nouveau <code>this</code> comme les fonctions normales. Prenons un exemple où on itère sur un tableau avec la fonction <code>map</code> pour y trouver le maximum.</p>
</div>
<div class="paragraph">
<p>En ES5&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> maxFinder = {
  <span class="key">max</span>: <span class="integer">0</span>,
  <span class="function">find</span>: <span class="keyword">function</span> (numbers) {
    <span class="comment">// let's iterate</span>
    numbers.forEach(
      <span class="keyword">function</span> (element) {
        <span class="comment">// if the element is greater, set it as the max</span>
        <span class="keyword">if</span> (element &gt; <span class="local-variable">this</span>.max) {
          <span class="local-variable">this</span>.max = element;
        }
      });
  }
};

maxFinder.find([<span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>]);
<span class="comment">// log the result</span>
console.log(maxFinder.max);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ca semble pas mal, non&#160;? Mais en fait ça ne marche pas&#8230;&#8203;
Si tu as de bons yeux, tu as remarqué que le <code>forEach</code> dans la fonction <code>find</code> utilise <code>this</code>,
mais ce <code>this</code> n&#8217;est lié à aucun objet.
Donc <code>this.max</code> n&#8217;est en fait pas le <code>max</code> de l&#8217;objet <code>maxFinder</code>&#8230;&#8203;
On pourrait corriger ça facilement avec un alias&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> maxFinder = {
  <span class="key">max</span>: <span class="integer">0</span>,
  <span class="function">find</span>: <span class="keyword">function</span> (numbers) {
    <span class="keyword">var</span> self = <span class="local-variable">this</span>;
    numbers.forEach(
      <span class="keyword">function</span> (element) {
        <span class="keyword">if</span> (element &gt; self.max) {
          self.max = element;
        }
      });
  }
};

maxFinder.find([<span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>]);
<span class="comment">// log the result</span>
console.log(maxFinder.max);</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou en <em>bindant</em> le <code>this</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> maxFinder = {
  <span class="key">max</span>: <span class="integer">0</span>,
  <span class="function">find</span>: <span class="keyword">function</span> (numbers) {
    numbers.forEach(
      <span class="keyword">function</span> (element) {
        <span class="keyword">if</span> (element &gt; <span class="local-variable">this</span>.max) {
          <span class="local-variable">this</span>.max = element;
        }
      }.bind(<span class="local-variable">this</span>));
  }
};

maxFinder.find([<span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>]);
<span class="comment">// log the result</span>
console.log(maxFinder.max);</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou en le passant en second paramètre de la fonction <code>forEach</code> (ce qui est justement sa raison d&#8217;être)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> maxFinder = {
  <span class="key">max</span>: <span class="integer">0</span>,
  <span class="function">find</span>: <span class="keyword">function</span> (numbers) {
    numbers.forEach(
      <span class="keyword">function</span> (element) {
        <span class="keyword">if</span> (element &gt; <span class="local-variable">this</span>.max) {
          <span class="local-variable">this</span>.max = element;
        }
      }, <span class="local-variable">this</span>);
  }
};

maxFinder.find([<span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>]);
<span class="comment">// log the result</span>
console.log(maxFinder.max);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais il y a maintenant une solution bien plus élégante avec les <em>arrow functions</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let maxFinder = {
  <span class="key">max</span>: <span class="integer">0</span>,
  <span class="function">find</span>: <span class="keyword">function</span> (numbers) {
    numbers.forEach(element =&gt; {
      <span class="keyword">if</span> (element &gt; <span class="local-variable">this</span>.max) {
        <span class="local-variable">this</span>.max = element;
      }
    });
  }
};

maxFinder.find([<span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>]);
<span class="comment">// log the result</span>
console.log(maxFinder.max);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les <em>arrow functions</em> sont donc idéales pour les fonctions anonymes en <em>callback</em>&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="__em_set_em_et_em_map_em">2.11. <em>Set</em> et <em>Map</em></h3>
<div class="paragraph">
<p>On va faire court&#160;: on a maintenant de vraies collections en ES6. Youpi \o/!</p>
</div>
<div class="paragraph">
<p>On utilisait jusque-là de simples objets JavaScript pour jouer le rôle de <em>map</em> ("dictionnaire"), c&#8217;est à dire un objet JS standard, dont les clés étaient nécessairement des chaînes de caractères. Mais nous pouvons maintenant utiliser la nouvelle classe <em>Map</em> &#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let cedric = { <span class="key">id</span>: <span class="integer">1</span>, <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Cedric</span><span class="delimiter">'</span></span> };
let users = <span class="keyword">new</span> Map();
users.set(cedric.id, cedric); <span class="comment">// adds a user</span>
console.log(users.has(cedric.id)); <span class="comment">// true</span>
console.log(users.size); <span class="comment">// 1</span>
users.<span class="keyword">delete</span>(cedric.id); <span class="comment">// removes the user</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On a aussi une classe <code>Set</code> ("ensemble")&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let cedric = { <span class="key">id</span>: <span class="integer">1</span>, <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Cedric</span><span class="delimiter">'</span></span> };
let users = <span class="keyword">new</span> Set();
users.add(cedric); <span class="comment">// adds a user</span>
console.log(users.has(cedric)); <span class="comment">// true</span>
console.log(users.size); <span class="comment">// 1</span>
users.<span class="keyword">delete</span>(cedric); <span class="comment">// removes the user</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux aussi itérer sur une collection, avec la nouvelle syntaxe <code>for &#8230;&#8203; of</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">for</span> (let user of users) {
  console.log(user.name);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu verras que cette syntaxe <code>for &#8230;&#8203; of</code> est celle choisie par l&#8217;équipe Angular pour itérer sur une collection dans un template.</p>
</div>
</div>
<div class="sect2">
<h3 id="_template_de_string">2.12. Template de string</h3>
<div class="paragraph">
<p>Construire des strings a toujours été pénible en JavaScript, où nous devions généralement utiliser des concaténations&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let fullname = <span class="string"><span class="delimiter">'</span><span class="content">Miss </span><span class="delimiter">'</span></span> + firstname + <span class="string"><span class="delimiter">'</span><span class="content"> </span><span class="delimiter">'</span></span> + lastname;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les templates de string sont une nouvelle fonctionnalité mineure mais bien pratique, où on doit utiliser des accents graves (<em>backticks</em> <code>`</code>) au lieu des habituelles apostrophes (<em>quote</em> <code>'</code>) ou apostrophes doubles (<em>double-quotes</em> <code>"</code>), fournissant un moteur de template basique avec support du multi-ligne&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let fullname = <span class="error">`</span>Miss <span class="predefined">$</span>{firstname} <span class="predefined">$</span>{lastname}<span class="error">`</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le support du multi-ligne est particulièrement adapté à l&#8217;écriture de morceaux d&#8217;HTML, comme nous le ferons dans nos composants Angular&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let template = <span class="error">`</span><span class="tag">&lt;div&gt;</span>
  <span class="tag">&lt;h1&gt;</span>Hello<span class="tag">&lt;/h1&gt;</span>
<span class="tag">&lt;/div&gt;</span><span class="error">`</span>;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="modules">2.13. Modules</h3>
<div class="paragraph">
<p>Il a toujours manqué en JavaScript une façon standard de ranger ses fonctions dans un espace de nommage, et de charger dynamiquement du code.
NodeJS a été un leader sur le sujet, avec un écosystème très riche de modules utilisant la convention CommonJS. Côté navigateur, il y a aussi l&#8217;API <a href="https://github.com/amdjs/amdjs-api/blob/master/AMD.md">AMD</a> (Asynchronous Module Definition), utilisé par <a href="http://requirejs.org/">RequireJS</a>. Mais aucun n&#8217;était un vrai standard, ce qui nous conduit à des débats incessants sur la meilleure solution.</p>
</div>
<div class="paragraph">
<p>ES6 a pour objectif de créer une syntaxe avec le meilleur des deux mondes, sans se préoccuper de l&#8217;implémentation utilisée. Le <a href="http://www.ecma-international.org/memento/TC39.htm">comité Ecma TC39</a> (qui est responsable des évolutions d&#8217;ES6 et auteur de la spécification du langage) voulait une syntaxe simple (c&#8217;est indéniablement l&#8217;atout de CommonJS), mais avec le support du chargement asynchrone (comme AMD), et avec quelques bonus comme la possibilité d&#8217;analyser statiquement le code par des outils et une gestion claire des dépendances cycliques. Cette nouvelle syntaxe se charge de déclarer ce que tu exportes depuis tes modules, et ce que tu importes dans d&#8217;autres modules.</p>
</div>
<div class="paragraph">
<p>Cette gestion des modules est fondamentale dans Angular&#160;2, parce que tout y est défini dans des modules, qu&#8217;il faut importer dès qu&#8217;on veut les utiliser. Supposons qu&#8217;on veuille exposer une fonction pour parier sur un poney donné dans une course, et une fonction pour lancer la course.</p>
</div>
<div class="paragraph">
<p>Dans <code>races_service.js</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">export</span> <span class="keyword">function</span> <span class="function">bet</span>(race, pony) {
  <span class="comment">// ...</span>
}
<span class="reserved">export</span> <span class="keyword">function</span> <span class="function">start</span>(race) {
  <span class="comment">// ...</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, c&#8217;est plutôt simple&#160;: le nouveau mot-clé <code>export</code> fait son travail et exporte les deux fonctions.</p>
</div>
<div class="paragraph">
<p>Maintenant, supposons qu&#8217;un composant de notre application veuille appeler ces deux fonctions.</p>
</div>
<div class="paragraph">
<p>Dans un autre fichier&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { bet, start } from <span class="string"><span class="delimiter">'</span><span class="content">./races_service</span><span class="delimiter">'</span></span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// later</span>
bet(race, pony1);
start(race);</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est ce qu&#8217;on appelle un <em>named export</em> ("export nommé"). Ici on importe les deux fonctions, et on doit spécifier le nom du fichier contenant ces deux fonctions, ici 'races_service'.
Evidemment, on peut importer une seule des deux fonctions, si besoin avec un alias&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { start as startRace } from <span class="string"><span class="delimiter">'</span><span class="content">./races_service</span><span class="delimiter">'</span></span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// later</span>
startRace(race);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et si tu veux importer toutes les fonctions du module, tu peux utiliser le caractère joker <code>*</code>.</p>
</div>
<div class="paragraph">
<p>Comme tu le ferais dans d&#8217;autres langages, il faut utiliser le caractère joker <code>*</code> avec modération, seulement si tu as besoin de toutes les fonctions, ou la plupart. Et comme tout ceci sera prochainement géré par ton IDE préféré qui prendra en charge la gestion automatique des imports, on n&#8217;aura plus à se soucier d&#8217;importer les seules bonnes fonctions.</p>
</div>
<div class="paragraph">
<p>Avec un caractère joker, tu dois utiliser un alias, et j&#8217;aime plutôt ça, parce que ça rend le reste du code plus lisible&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> * as racesService from <span class="string"><span class="delimiter">'</span><span class="content">./races_service</span><span class="delimiter">'</span></span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// later</span>
racesService.bet(race, pony1);
racesService.start(race);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si ton module n&#8217;expose qu&#8217;une seule fonction, ou valeur, ou classe, tu n&#8217;as pas besoin d&#8217;utiliser un <em>named export</em>, et tu peux bénéficier de l&#8217;export par défaut, avec le mot-clé <code>default</code>. C&#8217;est pratique pour les classes notamment&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// pony.js</span>
<span class="reserved">export</span> <span class="keyword">default</span> <span class="reserved">class</span> Pony {
}
<span class="comment">// races_service.js</span>
<span class="reserved">import</span> Pony from <span class="string"><span class="delimiter">'</span><span class="content">./pony</span><span class="delimiter">'</span></span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note l&#8217;absence d&#8217;accolade pour importer un export par défaut. Tu peux l&#8217;importer avec l&#8217;alias que tu veux, mais pour être cohérent, c&#8217;est mieux de l&#8217;importer avec le nom du module (sauf évidemment si tu importes plusieurs modules portant le même nom, auquel cas tu devras donner un alias pour les distinguer). Et bien sûr tu peux mélanger l&#8217;export par défaut et l&#8217;export nommé, mais un module ne pourra avoir qu&#8217;un seul export par défaut.</p>
</div>
<div class="paragraph">
<p>En Angular&#160;2, tu utiliseras beaucoup de ces imports dans ton application. Chaque composant et service sera une classe, généralement isolée dans son propre fichier et exportée, et ensuite importée à la demande dans chaque autre composant.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion">2.14. Conclusion</h3>
<div class="paragraph">
<p>Voilà qui conclue notre rapide introduction à ES6. On a zappé quelques parties, mais si tu as bien assimilé ce chapitre, tu n&#8217;auras aucun problème à coder ton application en ES6. Si tu veux approfondir, je te recommande chaudement <a href="http://exploringjs.com/">Exploring JS</a> par <a href="https://twitter.com/rauschma">Axel Rauschmayer</a>, ou <a href="https://leanpub.com/understandinges6">Understanding ES6</a> par <a href="https://twitter.com/slicknet">Nicholas C. Zakas</a>. Ces deux ebooks peuvent être lus gratuitement en ligne, mais pense à soutenir ces auteurs qui ont fait un beau travail&#160;! En l&#8217;occurrence, j&#8217;ai relu récemment <a href="http://speakingjs.com">Speaking JS</a>, le précédent livre d&#8217;Axel, et j&#8217;ai encore appris quelques trucs, donc si tu veux rafraîchir tes connaissances en JS, je te le conseille vivement&#160;!</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="types">3. Un peu plus loin qu&#8217;ES6</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_types_dynamiques_statiques_et_optionnels">3.1. Types dynamiques, statiques et optionnels</h3>
<div class="paragraph">
<p>Tu sais probablement que les applications Angular&#160;2 peuvent être écrites en ES5, ES6, ou TypeScript. Et tu te demandes peut-être qu&#8217;est-ce que TypeScript, et ce qu&#8217;il apporte de plus.</p>
</div>
<div class="paragraph">
<p>JavaScript est dynamiquement typé. Tu peux donc faire des trucs comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let pony = <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span>;
pony = <span class="integer">2</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ça fonctionne. Ça offre pleins de possibilités&#160;: tu peux ainsi passer n&#8217;importe quel objet à une fonction, tant que cet objet a les propriétés requises par la fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let pony = { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span>, <span class="key">color</span>: <span class="string"><span class="delimiter">'</span><span class="content">blue</span><span class="delimiter">'</span></span> };
let horse = { <span class="key">speed</span>: <span class="integer">40</span>, <span class="key">color</span>: <span class="string"><span class="delimiter">'</span><span class="content">black</span><span class="delimiter">'</span></span> };
let printColor = animal =&gt; console.log(animal.color);
<span class="comment">// works as long as the object has a `color` property</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette nature dynamique est formidable, mais elle est aussi un handicap dans certains cas, comparée à d&#8217;autres langages plus fortement typés. Le cas le plus évident est quand tu dois appeler une fonction inconnue d&#8217;une autre API en JS&#160;: tu dois lire la documentation (ou pire le code de la fonction) pour deviner à quoi doivent ressembler les paramètres. Dans notre exemple précédent, la méthode <code>printColor</code> attend un paramètre avec une propriété <code>color</code>, mais encore faut-il le savoir. Et c&#8217;est encore plus difficile dans notre travail quotidien, où on multiplie les utilisations de bibliothèques et services développés par d&#8217;autres. Un des co-fondateurs de Ninja Squad se plaint souvent du manque de type en JS, et déclare qu&#8217;il n&#8217;est pas aussi productif, et qu&#8217;il ne produit pas du code aussi bon qu&#8217;il le ferait dans un environnement plus statiquement typé. Et il n&#8217;a pas entièrement tort, même s&#8217;il trolle aussi par plaisir&#160;! Sans les informations de type, les IDEs n&#8217;ont aucun indice pour savoir si tu écris quelque chose de faux, et les outils ne peuvent pas t&#8217;aider à trouver des bugs dans ton code. Bien sûr, nos applications sont testées, et Angular a toujours facilité les tests, mais c&#8217;est pratiquement impossible d&#8217;avoir une parfaite couverture de tests.</p>
</div>
<div class="paragraph">
<p>Cela nous amène au sujet de la maintenabilité. Le code JS peut être difficile à maintenir, malgré les tests et la documentation. Refactoriser une grosse application JS n&#8217;est pas chose aisée, comparativement à ce qui peut être fait dans des langages statiquement typés. La maintenabilité est un sujet important, et les types aident les outils, ainsi que les développeurs, à éviter les erreurs lors de l&#8217;écriture et la modification de code. Google a toujours été enclin à proposer des solutions dans cette direction&#160;: c&#8217;est compréhensible, étant donné qu&#8217;ils gèrent des applications parmi les plus grosses du monde, avec GMail, Google apps, Maps&#8230;&#8203; Alors ils ont essayé plusieurs approches pour améliorer la maintenablité des applications <em>front-end</em>&#160;: GWT, Google Closure, Dart&#8230;&#8203; Elles devaient toutes faciliter l&#8217;écriture de grosses applications web.</p>
</div>
<div class="paragraph">
<p>Avec Angular&#160;2, l&#8217;équipe Google voulait nous aider à écrire du meilleur JS, en ajoutant des informations de type à notre code. Ce n&#8217;est pas un concept nouveau pour JS, c&#8217;était même le sujet de la spécification ECMASCRIPT&#160;4, qui a été abandonnée. Au départ ils annoncèrent AtScript, un sur-ensemble d&#8217;ES6 avec des annotations (des annotations de type et d&#8217;autres, dont je parlerai plus tard). Ils annoncèrent ensuite le support de TypeScript, le langage de Microsoft, avec des annotations de type additionnelles. Et enfin, quelques mois plus tard, l&#8217;équipe TypeScript annonçait, après un travail étroit avec l&#8217;équipe de Google, que la nouvelle version du langage (1.5) aurait toutes les nouvelles fonctionnalités d&#8217;AtScript. L&#8217;équipe Angular déclara alors qu&#8217;AtScript était officiellement abandonné, et que TypeScript était désormais la meilleure façon d&#8217;écrire des applications Angular&#160;2&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_hello_typescript">3.2. Hello TypeScript</h3>
<div class="paragraph">
<p>Je pense que c&#8217;était la meilleure chose à faire pour plusieurs raisons. D&#8217;abord, personne n&#8217;a vraiment envie d&#8217;apprendre une nouvelle extension de langage. Et TypeScript existait déjà, avec une communauté et un écosystème actifs. Je ne l&#8217;avais jamais vraiment utilisé avant Angular&#160;2, mais j&#8217;en avais entendu du bien, de personnes différentes. TypeScript est un projet de Microsoft, mais ce n&#8217;est pas le Microsoft de l&#8217;ère Ballmer et Gates. C&#8217;est le Microsoft de Nadella, celui qui s&#8217;ouvre à la communauté, et donc, à l&#8217;open-source. Google en a conscience, et c&#8217;est tout à leur avantage de contribuer à un projet existant, plutôt que de maintenir le leur. Le framework TypeScript gagnera de son côté en visibilité&#160;: <em>win-win</em> comme dirait ton manager.</p>
</div>
<div class="paragraph">
<p>Mais la raison principale de parier sur TypeScript est le système de types qu&#8217;il offre. C&#8217;est un système optionnel qui vient t&#8217;aider sans t&#8217;entraver. De fait, après avoir codé quelque temps avec, il s&#8217;est fait complètement oublier&#160;: tu peux faire des applications Angular&#160;2 en utilisant les trucs de TypeScript les plus utiles (j&#8217;y reviendrai) et en ignorant tout le reste avec du pur JavaScript (ES6 dans mon cas). Mais j&#8217;aime ce qu&#8217;ils ont fait, et on jettera un coup d&#8217;oeil à TypeScript dans le chapitre suivant. Tu pourras ainsi lire et comprendre n&#8217;importe quel code Angular&#160;2, et tu pourras décider de l&#8217;utiliser, ou pas, ou juste un peu, dans tes applications.</p>
</div>
<div class="paragraph">
<p>Si tu te demandes "mais pourquoi avoir du code fortement typé dans une application Angular&#160;2&#160;?", prenons un exemple. Angular 1 et 2 ont été construits sur le puissant concept d&#8217;injection de dépendance. Tu le connais déjà peut-être, parce que c&#8217;est un <em>design pattern</em> classique, utilisé dans beaucoup de frameworks et langages, et notamment AngularJS&#160;1.x comme je le disais.</p>
</div>
</div>
<div class="sect2">
<h3 id="_un_exemple_concret_d_injection_de_dépendance">3.3. Un exemple concret d&#8217;injection de dépendance</h3>
<div class="paragraph">
<p>Pour synthétiser ce qu&#8217;est l&#8217;injection de dépendance, prenons un composant d&#8217;une application, disons <code>RaceList</code>, permettant d&#8217;accéder à la liste des courses que le service <code>RaceService</code> peut retourner. Tu peux écrire <code>RaceList</code> comme ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> RaceList {
  constructor() {
    <span class="local-variable">this</span>.raceService = <span class="keyword">new</span> RaceService();
    <span class="comment">// let's say that list() returns a promise</span>
    <span class="local-variable">this</span>.raceService.list()
    <span class="comment">// we store the races returned into a member of `RaceList`</span>
      .then(races =&gt; <span class="local-variable">this</span>.races = races);
      <span class="comment">// arrow functions, FTW!</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais ce code a plusieurs défauts. L&#8217;un d&#8217;eux est la testabilité&#160;: c&#8217;est compliqué de remplacer <code>raceService</code> par un faux service (un bouchon, un <em>mock</em>), pour tester notre composant.</p>
</div>
<div class="paragraph">
<p>Si nous utilisons le <em>pattern</em> d&#8217;injection de dépendance (<em>Dependency Injection</em>, DI), nous déléguons la création de <code>RaceService</code> à un framework, lui réclamant simplement une instance. Le framework est ainsi en charge de la création de la dépendance, et il peut nous "l&#8217;injecter", par exemple dans le constructeur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> RaceList {
  constructor(raceService) {
    <span class="local-variable">this</span>.raceService = raceService;
    <span class="local-variable">this</span>.raceService.list()
      .then(races =&gt; <span class="local-variable">this</span>.races = races);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Désormais, quand on teste cette classe, on peut facilement passer un faux service au constructeur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// in a test</span>
let fakeService = {
  <span class="key">list</span>: () =&gt; {
    <span class="comment">// returns a fake promise</span>
  }
};
let raceList = <span class="keyword">new</span> RaceList(fakeService);
<span class="comment">// now we are sure that the race list</span>
<span class="comment">// is the one we want for the test</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais comment le framework sait-il quel composant injecter dans le constructeur&#160;? Bonne question&#160;! AngularJS&#160;1.x se basait sur le nom du paramètre, mais cela a une sérieuse limitation&#160;: la minification du code va changer le nom du paramètre. Pour contourner ce problème, tu pouvais utiliser la notation à base de tableau, ou ajouter des métadonnées à la classe&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">RaceList.<span class="predefined">$inject</span> = [<span class="string"><span class="delimiter">'</span><span class="content">RaceService</span><span class="delimiter">'</span></span>];</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il nous fallait donc ajouter des métadonnées pour que le framework comprenne ce qu&#8217;il fallait injecter dans nos classes. Et c&#8217;est exactement ce que proposent les annotations de type&#160;: une métadonnée donnant un indice nécessaire au framework pour réaliser la bonne injection. En Angular&#160;2, avec TypeScript, voilà à quoi pourrait ressembler notre composant <code>RaceList</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> RaceList {
  <span class="key">raceService</span>: RaceService;
  races: Array&lt;string&gt;;

  constructor(raceService: RaceService) {
    <span class="comment">// the interesting part is `: RaceService`</span>
    <span class="local-variable">this</span>.raceService = raceService;
    <span class="local-variable">this</span>.raceService.list()
      .then(races =&gt; <span class="local-variable">this</span>.races = races);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant l&#8217;injection peut se faire sans ambiguité&#160;! Tu n&#8217;es pas obligé d&#8217;utiliser TypeScript en Angular&#160;2, mais clairement ton code sera plus élégant avec. Tu peux toujours faire la même chose en pur ES6 ou ES5, mais tu devras ajouter manuellement des métadonnées d&#8217;une autre façon (on y reviendra en détail).</p>
</div>
<div class="paragraph">
<p>C&#8217;est pourquoi nous allons passer un peu de temps à apprendre TypeScript (TS). Angular&#160;2 est clairement construit pour tirer parti d&#8217;ES6 et TS 1.5+, et rendre notre vie de développeur plus facile en l&#8217;utilisant. Et l&#8217;équipe Angular a envie de soumettre le système de type au comité de standardisation, donc peut-être qu&#8217;un jour il sera normal d&#8217;avoir de vrais types en JS.</p>
</div>
<div class="paragraph">
<p>Il est temps désormais de se lancer dans TypeScript&#160;!</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="typescript">4. Découvrir TypeScript</h2>
<div class="sectionbody">
<div class="paragraph">
<p>TypeScript, qui existe depuis 2012, est un sur-ensemble de JavaScript, ajoutant quelques trucs à ES5. Le plus important étant le système de type, lui donnant même son nom. Depuis la version 1.5, sortie en 2015, cette bibliothèque essaie d&#8217;être un sur-ensemble d&#8217;ES6, incluant toutes les fonctionnalités vues précédemment, et quelques nouveautés, comme les décorateurs.
Ecrire du TypeScript ressemble à écrire du JavaScript. Par convention les fichiers sources TypeScript ont l&#8217;extension <code>.ts</code>, et seront compilés en JavaScript standard, en général lors du build, avec le compilateur TypeScript. Le code généré reste très lisible.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">npm install -g typescript
tsc test.ts</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais commençons par le début.</p>
</div>
<div class="sect2">
<h3 id="_les_types_de_typescript">4.1. Les types de TypeScript</h3>
<div class="paragraph">
<p>La syntaxe pour ajouter des informations de type en TypeScript est basique&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let variable: type;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les différents types sont simples à retenir&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let poneyNumber: number = <span class="integer">0</span>;
let poneyName: string = <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans ces cas, les types sont facultatifs, car le compilateur TS peut les deviner depuis leur valeur (c&#8217;est ce qu&#8217;on appelle l&#8217;inférence de type).</p>
</div>
<div class="paragraph">
<p>Le type peut aussi être défini dans ton application, avec par exemple la classe suivante <code>Pony</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let pony: Pony = <span class="keyword">new</span> Pony();</code></pre>
</div>
</div>
<div class="paragraph">
<p>TypeScript supporte aussi ce que certains langages appellent des types génériques, par exemple avec un <code>Array</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let ponies: Array&lt;Pony&gt; = [<span class="keyword">new</span> Pony()];</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cet <code>Array</code> ne peut contenir que des poneys, ce qu&#8217;indique la notation générique <code>&lt;&gt;</code>. On peut se demander quel est l&#8217;intérêt d&#8217;imposer cela. Ajouter de telles informations de type aidera le compilateur à détecter des erreurs&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">ponies.push(<span class="string"><span class="delimiter">'</span><span class="content">hello</span><span class="delimiter">'</span></span>); <span class="comment">// error TS2345</span>
<span class="comment">// Argument of type 'string' is not assignable to parameter of type 'Pony'.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Et comment faire si tu as besoin d&#8217;une variable pouvant recevoir plusieurs types&#160;? TS a un type spécial pour cela, nommé <code>any</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let changing: any = <span class="integer">2</span>;
changing = <span class="predefined-constant">true</span>; <span class="comment">// no problem</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est pratique si tu ne connais pas le type d&#8217;une valeur, soit parce qu&#8217;elle vient d&#8217;un bout de code dynamique, ou en sortie d&#8217;une bibliothèque obscure.</p>
</div>
<div class="paragraph">
<p>Si ta variable ne doit recevoir que des valeurs de type <code>number</code> ou <code>boolean</code>, tu peux utiliser l&#8217;union de types&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let changing: number|<span class="reserved">boolean</span> = <span class="integer">2</span>;
changing = <span class="predefined-constant">true</span>; <span class="comment">// no problem</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_valeurs_énumérées_em_enum_em">4.2. Valeurs énumérées (<em>enum</em>)</h3>
<div class="paragraph">
<p>TypeScript propose aussi des valeurs énumérées&#160;: <code>enum</code>. Par exemple, une course de poneys dans ton application peut être soit <code>ready</code>, <code>started</code> ou <code>done</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">enum</span> RaceStatus {Ready, Started, Done}
    let race: Race = <span class="keyword">new</span> Race();
    race.status = RaceStatus.Ready;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un <code>enum</code> est en fait une valeur numérique, commençant à 0. Tu peux cependant définir la valeur que tu veux&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">enum</span> Medal {Gold = <span class="integer">1</span>, Silver, Bronze}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_return_types">4.3. Return types</h3>
<div class="paragraph">
<p>Tu peux aussi spécifier le type de retour d&#8217;une fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">startRace</span>(race: Race): Race {
  race.status = RaceStatus.Started;
  <span class="keyword">return</span> race;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si la fonction ne retourne rien, tu peux le déclarer avec <code>void</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">startRace</span>(race: Race): <span class="keyword">void</span> {
  race.status = RaceStatus.Started;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_interfaces">4.4. Interfaces</h3>
<div class="paragraph">
<p>C&#8217;est déjà une bonne première étape. Mais comme je le disais plus tôt, JavaScript est formidable par sa nature dynamique. Une fonction marchera si elle reçoit un objet possédant la bonne propriété&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">addPointsToScore</span>(player, points) {
  player.score += points;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette fonction peut être appliquée à n&#8217;importe quel objet ayant une propriété <code>score</code>. Maintenant comment traduit-on cela en TypeScript&#160;? Facile&#160;!, on définit une interface, un peu comme la "forme" de l&#8217;objet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">addPointsToScore</span>(player: { <span class="key">score</span>: number; }, <span class="key">points</span>: number): <span class="keyword">void</span> {
  player.score += points;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela signifie que le paramètre doit avoir une propriété nommée <code>score</code> de type <code>number</code>. Tu peux évidement aussi nommer ces interfaces&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">interface</span> HasScore {
  <span class="key">score</span>: number;
}
    <span class="keyword">function</span> <span class="function">addPointsToScore</span>(player: HasScore, <span class="key">points</span>: number): <span class="keyword">void</span> {
      player.score += points;
    }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_paramètre_optionnel">4.5. Paramètre optionnel</h3>
<div class="paragraph">
<p>Y&#8217;a un autre truc sympa en JavaScript&#160;: les paramètres optionnels. Si tu ne les passes pas à l&#8217;appel de la fonction, leur valeur sera <code>undefined</code>. Mais en TypeScript, si tu déclares une fonction avec des paramètres typés, le compilateur te gueulera dessus si tu les oublies&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">addPointsToScore(player); <span class="comment">// error TS2346</span>
<span class="comment">// Supplied parameters do not match any signature of call target.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour montrer qu&#8217;un paramètre est optionnel dans une fonction (ou une propriété dans une interface), tu ajoutes <code>?</code> après le paramètre. Ici, le paramètre <code>points</code> est optionnel&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">addPointsToScore</span>(player: HasScore, points?: number): <span class="keyword">void</span> {
  points = points || <span class="integer">0</span>;
  player.score += points;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_des_fonctions_en_propriété">4.6. Des fonctions en propriété</h3>
<div class="paragraph">
<p>Tu peux aussi décrire un paramètre comme devant posséder une fonction spécifique plutôt qu&#8217;une propriété&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">startRunning</span>(pony) {
  pony.run(<span class="integer">10</span>);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>La définition de cette interface serait&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">interface</span> CanRun {
  run(meters: number): <span class="keyword">void</span>;
}
    <span class="keyword">function</span> <span class="function">startRunning</span>(pony: CanRun): <span class="keyword">void</span> {
      pony.run(<span class="integer">10</span>);
    }

    let pony = {
      <span class="key">run</span>: (meters) =&gt; logger.log(<span class="error">`</span>pony runs <span class="predefined">$</span>{meters}m<span class="error">`</span>)
    };
    startRunning(pony);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_classes_2">4.7. Classes</h3>
<div class="paragraph">
<p>Une classe peut implémenter une interface. Pour nous, un poney peut courir, donc on pourrait écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> Pony <span class="reserved">implements</span> CanRun {
  run(meters) {
    logger.log(<span class="error">`</span>pony runs <span class="predefined">$</span>{meters}m<span class="error">`</span>);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le compilateur nous obligera à implémenter la méthode <code>run</code> dans la classe. Si nous l&#8217;implémentons mal, par exemple en attendant une <code>string</code> au lieu d&#8217;un <code>number</code>, le compilateur va crier&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> IllegalPony <span class="reserved">implements</span> CanRun {
  run(meters: string) {
    console.log(<span class="error">`</span>pony runs <span class="predefined">$</span>{meters}m<span class="error">`</span>);
  }
}
<span class="comment">// error TS2420: Class 'IllegalPony' incorrectly implements interface 'CanRun'.</span>
<span class="comment">// Types of property 'run' are incompatible.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux aussi implémenter plusieurs interfaces si ça te fait plaisir&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> HungryPony <span class="reserved">implements</span> CanRun, CanEat {
  run(meters) {
    logger.log(<span class="error">`</span>pony runs <span class="predefined">$</span>{meters}m<span class="error">`</span>);
  }

  eat() {
    logger.log(<span class="error">`</span>pony eats<span class="error">`</span>);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et une interface peut en étendre une ou plusieurs autres&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">interface</span> Animal <span class="reserved">extends</span> CanRun, CanEat {}

<span class="reserved">class</span> Pony <span class="reserved">implements</span> Animal {
  <span class="comment">// ...</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une classe en TypeScript peut avoir des propriétés et des méthodes. Avoir des propriétés dans une classe n&#8217;est pas une fonctionnalité standard d&#8217;ES6, c&#8217;est seulement possible en TypeScript.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> SpeedyPony {
  <span class="key">speed</span>: number = <span class="integer">10</span>;

  run() {
    logger.log(<span class="error">`</span>pony runs at <span class="predefined">$</span>{<span class="local-variable">this</span>.speed}m/s<span class="error">`</span>);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tout est public par défaut. Mais tu peux utiliser le mot-clé <code>private</code> pour cacher une propriété ou une méthode. Ajouter <code>public</code> ou <code>private</code> à un paramètre de constructeur est un raccourci pour créer et initialiser un membre privé ou public&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> NamedPony {
  constructor(<span class="reserved">public</span> name: string, <span class="reserved">private</span> speed: number) {
  }

  run() {
    logger.log(<span class="error">`</span>pony runs at <span class="predefined">$</span>{<span class="local-variable">this</span>.speed}m/s<span class="error">`</span>);
  }
}
    let pony = <span class="keyword">new</span> NamedPony(<span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span>, <span class="integer">10</span>);
    <span class="comment">// defines a public property name with 'Rainbow Dash'</span>
    <span class="comment">// and a private one speed with 10</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce qui est l&#8217;équivalent du plus verbeux&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> NamedPonyWithoutShortcut {
  <span class="reserved">public</span> name: string;
  <span class="reserved">private</span> speed: number;

  constructor(name: string, <span class="key">speed</span>: number) {
    <span class="local-variable">this</span>.name = name;
    <span class="local-variable">this</span>.speed = speed;
  }

  run() {
    logger.log(<span class="error">`</span>pony runs at <span class="predefined">$</span>{<span class="local-variable">this</span>.speed}m/s<span class="error">`</span>);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ces raccourcis sont très pratiques et nous allons beaucoup les utiliser en Angular&#160;2&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_utiliser_d_autres_bibliothèques">4.8. Utiliser d&#8217;autres bibliothèques</h3>
<div class="paragraph">
<p>Mais si on travaille avec des bibliothèques externes écrites en JS, comment savoir les types des paramètres attendus par telle fonction de telle bibliothèque&#160;? La communauté TypeScript est tellement cool que ses membres ont défini des interfaces pour les types et les fonctions exposés par les bibliothèques JavaScript les plus populaires.</p>
</div>
<div class="paragraph">
<p>Les fichiers contenant ces interfaces ont une extension spéciale&#160;: <code>.d.ts</code>. Ils contiennent une liste de toutes les fonctions publiques des bibliothèques. <a href="https://github.com/borisyankov/DefinitelyTyped">DefinitelyTyped</a> est l&#8217;outil de référence pour récupérer ces fichiers. Par exemple, si tu veux utiliser TS dans ton application AngularJS&#160;1.x, tu peux récupérer le fichier dédié depuis le repository&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">npm install --global typings
typings install --save --ambient angular</code></pre>
</div>
</div>
<div class="paragraph">
<p>Puis tu inclues ce fichier au début de ton code et hop!, tu profites du bonheur d&#8217;avoir une compilation <em>typesafe</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">/// &lt;reference path=&quot;angular.d.ts&quot; /&gt;</span>
angular.module(<span class="integer">10</span>, []); <span class="comment">// the module name should be a string</span>
<span class="comment">// so when I compile, I get:</span>
<span class="comment">// Argument of type 'number' is not assignable to parameter of type 'string'.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>/// &lt;reference path="angular.d.ts" /&gt;</code> est un commentaire spécial reconnu par TS, qui indique au compilateur de vérifier l&#8217;interface <code>angular.d.ts</code>.
Maintenant, si tu te trompes dans l&#8217;appel d&#8217;une méthode AngularJS, le compilateur te le dira, et tu peux corriger sans avoir à lancer manuellement ton application&#160;!</p>
</div>
<div class="paragraph">
<p>Encore plus cool, depuis TypeScript 1.6, le compilateur est capable de trouver par lui-même ces interfaces
si elles sont packagées avec ta dépendance dans ton répertoire <code>node_modules</code>.
De plus en plus de projets adoptent cette approche, et Angular&#160;2 fait de même.
Tu n&#8217;as donc même pas à t&#8217;occuper d&#8217;inclure ces interfaces dans ton projet Angular&#160;2&#160;:
le compilateur TS va tout comprendre comme un grand si tu utilises NPM pour gérer tes dépendances&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_decorateurs">4.9. Decorateurs</h3>
<div class="paragraph">
<p>C&#8217;est une fonctionnalité toute nouvelle, ajoutée seulement en TypeScript 1.5, juste pour le support d&#8217;Angular.
En effet, comme on le verra bientôt, les composants Angular&#160;2 peuvent être décrits avec des décorateurs.
Tu n&#8217;as peut-être jamais entendu parler de décorateurs, car tous les langages ne les proposent pas.
Un décorateur est une façon de faire de la méta-programmation.
Ils ressemblent beaucoup aux annotations,
qui sont principalement utilisées en Java, C#, et Python, et peut-être d&#8217;autres langages que je ne connais pas.
Suivant le langage, tu peux ajouter une annotation sur une méthode, un attribut, ou une classe.
Généralement, les annotations ne sont pas vraiment utiles au langage lui-même, mais plutôt aux frameworks et aux bibliothèques.</p>
</div>
<div class="paragraph">
<p>Les décorateurs sont vraiment puissants: ils peuvent modifier leur cible (classes, méthodes, etc&#8230;&#8203;)
et par exemple modifier les paramètres ou le résultat retourné,
appeler d&#8217;autres méthodes quand la cible est appelée,
ou ajouter des métadonnées destinées à un framework (c&#8217;est ce que font les décorateurs d&#8217;Angular&#160;2).
Jusqu&#8217;à présent, cela n&#8217;existait pas en JavaScript.
Mais le langage évolue, et il y a maintenant une proposition officielle pour le support des décorateurs,
qui les rendra peut-être possibles un jour (possiblement avec ES7/ES2016).</p>
</div>
<div class="paragraph">
<p>En Angular&#160;2, on utilisera les annotations fournies par le framework.
Leur rôle est assez simple: ils ajoutent des métadonnées à nos classes, propriétés ou paramètres pour par exemple indiquer "cette classe est un composant",
"cette dépendance est optionnelle", "ceci est une propriété spéciale du composant", etc&#8230;&#8203;
Ce n&#8217;est pas obligatoire de les utiliser, car tu peux toujours ajouter les métadonnées manuellement si tu ne veux que du pur ES5,
mais le code sera plus élégant avec des décorateurs, comme ceux proposés par TypeScript.</p>
</div>
<div class="paragraph">
<p>En TypeScript, les annotations sont préfixées par <code>@</code>, et peuvent être appliquées sur une classe, une propriété de classe, une fonction, ou un paramètre de fonction.
Pas sur un constructeur en revanche, mais sur ses paramètres oui.</p>
</div>
<div class="paragraph">
<p>Pour mieux comprendre ces décorateurs, essayons d&#8217;en construire un très simple par nous-mêmes,
<code>@Log()</code>, qui va écrire le nom de la méthode à chaque fois qu&#8217;elle sera appelée.</p>
</div>
<div class="paragraph">
<p>Il s&#8217;utilisera comme ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> RaceService {

  <span class="error">@</span>Log()
  getRaces() {
    <span class="comment">// call API</span>
  }

  <span class="error">@</span>Log()
  getRace(raceId) {
    <span class="comment">// call API</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour le définir, nous devons écrire une méthode renvoyant une fonction comme celle-ci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let <span class="function">Log</span> = <span class="keyword">function</span> () {
  <span class="keyword">return</span> (target: any, <span class="key">name</span>: string, <span class="key">descriptor</span>: any) =&gt; {
    logger.log(<span class="error">`</span>call to <span class="predefined">$</span>{name}<span class="error">`</span>);
    <span class="keyword">return</span> descriptor;
  };
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Selon ce sur quoi nous voulons appliquer notre décorateur, la fonction n&#8217;aura pas exactement les mêmes arguments.
Ici nous avons un décorateur de méthode, qui prend 3 paramètres&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>target</code>&#160;: la méthode ciblée par notre décorateur</p>
</li>
<li>
<p><code>name</code>&#160;: le nom de la méthode ciblée</p>
</li>
<li>
<p><code>descriptor</code>&#160;: le descripteur de la méthode ciblée, par exemple est-ce que la méthode est énumérable, etc&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nous voulons simplement écrire le nom de la méthode, mais tu pourrais faire pratiquement ce que tu veux&#160;:
modifier les paramètres, le résultat, appeler une autre fonction, etc&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Ici, dans notre exemple basique, chaque fois que les méthodes <code>getRace()</code> ou <code>getRaces()</code> sont exécutées,
nous verrons une nouvelle trace dans la console du navigateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">    raceService.getRaces();
    <span class="comment">// logs: call to getRaces</span>
    raceService.getRace(<span class="integer">1</span>);
    <span class="comment">// logs: call to getRace</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>En tant qu&#8217;utilisateur d&#8217;Angular&#160;2, jetons un œil à ces annotations&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({ <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-home</span><span class="delimiter">'</span></span> })
<span class="reserved">class</span> HomeComponent {

  constructor(<span class="error">@</span>Optional() hello: HelloService) {
    logger.log(hello);
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;annotation <code>@Component</code> est ajoutée à la classe <code>Home</code>.
Quand Angular&#160;2 chargera notre application, il va trouver la classe <code>Home</code>,
et va comprendre que c&#8217;est un composant grâce au décorateur.
Cool, hein&#160;?! Comme tu le vois, une annotation peut recevoir des paramètres, ici un objet de configuration.</p>
</div>
<div class="paragraph">
<p>Je voulais juste présenter le concept de décorateur,
nous aurons l&#8217;occasion de revoir tous les décorateurs disponibles en Angular&#160;2 tout au long de ce livre.</p>
</div>
<div class="paragraph">
<p>Je dois aussi indiquer que tu peux utiliser les décorateurs avec Babel comme transpileur à la place de TypeScript.
Il y a même un plugin pour supporter tous les décorateurs Angular&#160;2&#160;: <a href="https://www.npmjs.com/package/babel-plugin-angular2-annotations">angular2-annotations</a>.
Babel supporte aussi les propriétés de classe, mais pas le système de type apporté par TypeScript.
Tu peux utiliser Babel, et écrire du code "ES6+", mais tu ne pourras pas bénéficier des types, et ils sont sacrément utiles pour l&#8217;injection de dépendances.
C&#8217;est possible, mais tu devras ajouter d&#8217;autres décorateurs pour remplacer les informations de type.</p>
</div>
<div class="paragraph">
<p>Ainsi mon conseil est d&#8217;essayer TypeScript.
Tous mes exemples dans ce livre l&#8217;utiliseront.
Il n&#8217;est pas intrusif, tu peux l&#8217;utiliser quand c&#8217;est utile et l&#8217;oublier le reste du temps.
Si vraiment tu n&#8217;aimes pas, il ne sera pas très compliqué de repasser à ES6 avec Babel ou Traceur,
ou même ES5 si tu es complètement fou (mais pour ma part, je trouve le code ES5 d&#8217;une application Angular&#160;2 vraiment pas terrible&#160;!).</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="web-components">5. Le monde merveilleux des Web Components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Avant d&#8217;aller plus loin, j&#8217;aimerais faire une petite pause pour parler des Web Components.
Vous n&#8217;avez pas besoin de connaître les Web Components pour écrire du code Angular&#160;2.
Mais je pense que c&#8217;est une bonne chose d&#8217;en avoir un aperçu,
car en Angular&#160;2 certaines décisions ont été prises pour faciliter leur intégration,
ou pour rendre les composants que l&#8217;on construit similaires à des Web Components.
Tu es libre de sauter ce chapitre si tu ne t&#8217;intéresses pas du tout au sujet,
mais je pense que tu apprendras deux-trois choses qui pourraient t&#8217;être utiles pour la suite.</p>
</div>
<div class="sect2">
<h3 id="_le_nouveau_monde">5.1. Le nouveau Monde</h3>
<div class="paragraph">
<p>Les composants sont un vieux rêve de développeur.
Un truc que tu prendrais sur étagère et lâcherais dans ton application,
et qui marcherait directement et apporterait la fonctionnalité à tes utilisateurs sans rien faire.</p>
</div>
<div class="paragraph">
<p>Mes amis, cette heure est venue.</p>
</div>
<div class="paragraph">
<p>Oui, bon, peut-être. En tout cas, on a le début d&#8217;un truc.</p>
</div>
<div class="paragraph">
<p>Ce n&#8217;est pas complètement neuf.
On avait déjà la notion de composants dans le développement web depuis quelques temps,
mais ils demandaient en général de lourdes dépendances comme
jQuery, Dojo, Prototype, AngularJS, etc&#8230;&#8203;
Pas vraiment le genre de bibliothèques que tu veux absolument ajouter à ton application.</p>
</div>
<div class="paragraph">
<p>Les Web Components essaient de résoudre ce problème&#160;:
avoir des composants réutilisables et encapsulés.</p>
</div>
<div class="paragraph">
<p>Ils reposent sur un ensemble de standards émergents,
que les navigateurs ne supportent pas encore parfaitement.
Mais quand même, c&#8217;est un sujet intéressant,
même si on ne pourra pas en bénéficier pleinement avant quelques années,
ou même jamais si le concept ne décolle pas.</p>
</div>
<div class="paragraph">
<p>Ce standard émergent est défini dans quatre spécifications&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Custom elements ("éléments personnalisés")</p>
</li>
<li>
<p>Shadow DOM ("DOM de l&#8217;ombre")</p>
</li>
<li>
<p>Template</p>
</li>
<li>
<p>HTML imports</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note que les exemples présentés ont plus de chances de fonctionner dans un Chrome ou un Firefox récent.</p>
</div>
</div>
<div class="sect2">
<h3 id="_custom_elements">5.2. Custom elements</h3>
<div class="paragraph">
<p>Les éléments customs sont un nouveau standard qui permet au développeur de créer ses propres éléments du DOM,
faisant de <code>&lt;ns-pony&gt;&lt;/ns-pony&gt;</code> un élément HTML parfaitement valide.
La spécification définit comment déclarer de tels éléments,
comment tu peux les faire étendre des éléments existants,
comment tu peux définir ton API, etc&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Déclarer un élément custom se fait avec un simple <code>document.registerElement('ns-pony')</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// new element</span>
<span class="keyword">var</span> PonyComponent = document.registerElement(<span class="string"><span class="delimiter">'</span><span class="content">ns-pony</span><span class="delimiter">'</span></span>);
<span class="comment">// insert in current body</span>
document.body.appendChild(<span class="keyword">new</span> PonyComponent());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que le nom doit contenir un tiret,
pour indiquer au navigateur que c&#8217;est un élément custom.</p>
</div>
<div class="paragraph">
<p>Évidemment ton élément custom peut avoir des propriétés et des méthodes,
et il aura aussi des callbacks liés au cycle de vie,
pour exécuter du code quand le composant est inséré ou supprimé,
ou quand l&#8217;un de ses attributs est modifié.
Il peut aussi avoir son propre template.
Par exemple, peut-être que ce <code>ns-pony</code> affiche une image du poney, ou seulement son nom&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// let's extend HTMLElement</span>
<span class="keyword">var</span> PonyComponentProto = Object.create(HTMLElement.prototype);
<span class="comment">// and add some template using a lifecycle</span>
PonyComponentProto.<span class="function">createdCallback</span> = <span class="keyword">function</span>() {
  <span class="local-variable">this</span>.innerHTML = <span class="string"><span class="delimiter">'</span><span class="content">&lt;h1&gt;General Soda&lt;/h1&gt;</span><span class="delimiter">'</span></span>;
};

<span class="comment">// new element</span>
<span class="keyword">var</span> PonyComponent = document.registerElement(<span class="string"><span class="delimiter">'</span><span class="content">ns-pony</span><span class="delimiter">'</span></span>, {<span class="key">prototype</span>: PonyComponentProto});
<span class="comment">// insert in current body</span>
document.body.appendChild(<span class="keyword">new</span> PonyComponent());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu jettes un coup d&#8217;œil au DOM, tu verras <code>&lt;ns-pony&gt;&lt;h1&gt;General Soda&lt;/h1&gt;&lt;/ns-pony&gt;</code>.
Mais cela veut dire que le CSS ou la logique JavaScript de ton application
peut avoir des effets indésirables sur ton composant.
Donc, en général, le template est caché et encaspulé dans un truc appelé le Shadow DOM ("DOM de l&#8217;ombre"),
et tu ne verras dans le DOM que <code>&lt;ns-pony&gt;&lt;/ns-pony&gt;</code>,
bien que le navigateur affiche le nom du poney.</p>
</div>
</div>
<div class="sect2">
<h3 id="_shadow_dom">5.3. Shadow DOM</h3>
<div class="paragraph">
<p>Avec un nom qui claque comme celui-là,
on s&#8217;attend à un truc très puissant.
Et il l&#8217;est.
Le Shadow DOM est une façon d&#8217;encapsuler le DOM de ton composant.
Cette encapsulation signifie que la feuille de style et la logique JavaScript de ton application
ne vont pas s&#8217;appliquer sur le composant et le ruiner accidentellement.
Cela en fait l&#8217;outil idéal pour dissimuler le fonctionnement interne de ton composant,
et s&#8217;assurer que rien n&#8217;en fuit à l&#8217;extérieur.</p>
</div>
<div class="paragraph">
<p>Si on retourne à notre exemple précédent&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> PonyComponentProto = Object.create(HTMLElement.prototype);

<span class="comment">// add some template in the Shadow DOM</span>
PonyComponentProto.<span class="function">createdCallback</span> = <span class="keyword">function</span>() {
  <span class="keyword">var</span> shadow = <span class="local-variable">this</span>.createShadowRoot();
  shadow.innerHTML = <span class="string"><span class="delimiter">'</span><span class="content">&lt;h1&gt;General Soda&lt;/h1&gt;</span><span class="delimiter">'</span></span>;
};

<span class="keyword">var</span> PonyComponent = document.registerElement(<span class="string"><span class="delimiter">'</span><span class="content">ns-pony</span><span class="delimiter">'</span></span>, {<span class="key">prototype</span>: PonyComponentProto});
document.body.appendChild(<span class="keyword">new</span> PonyComponent());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu essaies maintenant de l&#8217;observer, tu devrais voir&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ns-pony&gt;</span>
  #shadow-root (open)
    <span class="tag">&lt;h1&gt;</span>General Soda<span class="tag">&lt;/h1&gt;</span>
<span class="tag">&lt;/ns-pony&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Désormais, même si tu ajoutes du style aux éléments <code>h1</code>,
rien ne changera&#160;:
le Shadow DOM agit comme une barrière.</p>
</div>
<div class="paragraph">
<p>Jusqu&#8217;à présent, nous avions utilisé une chaîne de caractères pour notre template.
Mais ce n&#8217;est habituellement pas la façon de procéder.
La bonne pratique est de plutôt utiliser l&#8217;élément <code>&lt;template&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_template">5.4. Template</h3>
<div class="paragraph">
<p>Un template spécifié dans un élément <code>&lt;template&gt;</code> n&#8217;est pas affiché par le navigateur.
Son but est d&#8217;être à terme cloné dans un autre élément.
Ce que tu déclareras à l&#8217;intérieur sera inerte&#160;: les scripts ne s&#8217;exécuteront pas, les images ne se chargeront pas, etc&#8230;&#8203;
Son contenu peut être requêté par le reste de la page avec la méthode classique <code>getElementById()</code>,
et il peut être placé sans risque n&#8217;importe où dans la page.</p>
</div>
<div class="paragraph">
<p>Pour utiliser un template, il doit être cloné&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="tag">&lt;template</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">pony-tpl</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;style&gt;</span>
<span class="inline">    <span class="tag">h1</span> { <span class="key">color</span>: <span class="value">orange</span>; }</span>
  <span class="tag">&lt;/style&gt;</span>
  <span class="tag">&lt;h1&gt;</span>General Soda<span class="tag">&lt;/h1&gt;</span>
<span class="tag">&lt;/template&gt;</span>

<span class="keyword">var</span> PonyComponentProto = Object.create(HTMLElement.prototype);

<span class="comment">// add some template using the template tag</span>
PonyComponentProto.<span class="function">createdCallback</span> = <span class="keyword">function</span>() {
  <span class="keyword">var</span> template = document.querySelector(<span class="string"><span class="delimiter">'</span><span class="content">#pony-tpl</span><span class="delimiter">'</span></span>);
  <span class="keyword">var</span> clone = document.importNode(template.content, <span class="predefined-constant">true</span>);
  <span class="local-variable">this</span>.createShadowRoot().appendChild(clone);
};

<span class="keyword">var</span> PonyComponent = document.registerElement(<span class="string"><span class="delimiter">'</span><span class="content">ns-pony</span><span class="delimiter">'</span></span>, {<span class="key">prototype</span>: PonyComponentProto});
document.body.appendChild(<span class="keyword">new</span> PonyComponent());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et si on pouvait déclarer cela dans un seul fichier,
cela nous ferait un composant parfaitement encapsulé&#8230;&#8203;
C&#8217;est ce que nous allons faire avec les imports HTML&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_html_imports">5.5. HTML imports</h3>
<div class="paragraph">
<p>C&#8217;est la dernière spécification.
Les imports HTML permettent d&#8217;importer du HTML dans du HTML.
Quelque chose comme <code>&lt;link rel="import" href="ns-pony.html"&gt;</code>.
Ce fichier, <code>ns-pony.html</code>, contiendrait tout ce qui est requis&#160;:
le template, les scripts, les styles, etc&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Si quelqu&#8217;un voulait ensuite utiliser notre merveilleux composant,
il lui suffirait simplement d&#8217;utiliser un import HTML.</p>
</div>
</div>
<div class="sect2">
<h3 id="_polymer_et_x_tag">5.6. Polymer et X-tag</h3>
<div class="paragraph">
<p>Toutes ces spécifications constituent les Web Components.
Je suis loin d&#8217;en être expert,
et ils présentent toute sorte de pièges.</p>
</div>
<div class="paragraph">
<p>Comme les Web Components ne sont pas complètement supportés par tous les navigateurs,
il y a un <em>polyfill</em> à inclure dans ton application pour être sûr que ça fonctionne.
Ce <em>polyfill</em> est appelé <a href="https://github.com/WebComponents/webcomponentsjs">web-component.js</a>,
et il est bon de noter qu&#8217;il est le fruit d&#8217;un effort commun entre Google, Mozilla et Microsoft, entre autres.</p>
</div>
<div class="paragraph">
<p>Au dessus de ce <em>polyfill</em>, quelques bibliothèques ont vu le jour.
Elles proposent toutes de faciliter le travail avec les Web Components,
et viennent souvent avec un lot de composants tout prêts.</p>
</div>
<div class="paragraph">
<p>Parmi les initiatives notables, on peut citer&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.polymer-project.org/">Polymer</a> de Google&#160;;</p>
</li>
<li>
<p><a href="http://x-tag.github.io/">X-tag</a> de Mozilla et Microsoft.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Je ne vais pas rentrer dans les détails, mais tu peux facilement utiliser un composant Polymer existant.
Supposons que tu veuilles embarquer une carte Google dans ton application&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="comment">&lt;!-- Polyfill Web Components support for older browsers --&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">webcomponents.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>

<span class="comment">&lt;!-- Import element --&gt;</span>
<span class="tag">&lt;link</span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">import</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">google-map.html</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

<span class="comment">&lt;!-- Use element --&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;google-map</span> <span class="attribute-name">latitude</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">45.780</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">longitude</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">4.842</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/google-map&gt;</span>
<span class="tag">&lt;/body&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Il y a une tonne de composants disponibles.
Tu peux en avoir un aperçu sur <a href="https://customelements.io/" class="bare">https://customelements.io/</a>.</p>
</div>
<div class="paragraph">
<p>Polymer permet aussi de créer tes propres composants&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;dom-module</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ns-pony</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;template&gt;</span>
    <span class="tag">&lt;h1&gt;</span>[[name]]<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;/template&gt;</span>
  <span class="tag">&lt;script&gt;</span>
<span class="inline">    Polymer({
      <span class="key">is</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-pony</span><span class="delimiter">'</span></span>,
      <span class="key">properties</span>: {
        <span class="key">name</span>: String
      }
    });</span>
  <span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;/dom-module&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>et de les utiliser&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="comment">&lt;!-- Polyfill Web Components support for older browsers --&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">webcomponents.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>

<span class="comment">&lt;!-- Polymer --&gt;</span>
<span class="tag">&lt;link</span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">import</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">polymer.html</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

<span class="comment">&lt;!-- Import element --&gt;</span>
<span class="tag">&lt;link</span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">import</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ns-pony.html</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

<span class="comment">&lt;!-- Use element --&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;ns-pony</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">General Soda</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/ns-pony&gt;</span>
<span class="tag">&lt;/body&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux faire plein de trucs cools avec Polymer, comme du binding bi-directionnel,
donner des valeurs par défaut aux attributs, émettre des événements custom,
réagir aux modifications d&#8217;attribut, répéter des éléments si tu fournis une collection à un composant, etc&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>C&#8217;est un chapitre trop court pour te montrer sérieusement tout ce que l&#8217;on peut faire avec les Web Components,
mais tu verras que certains de leurs concepts vont émerger dans la lecture à venir.
Et tu verras sans aucun doute que l&#8217;équipe Google a conçu Angular&#160;2
pour rendre facile l&#8217;utilisation des Web Components aux côtés de nos composants Angular&#160;2.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="philosophy">6. La philosophie d&#8217;Angular&#160;2</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Pour construire une application Angular&#160;2, il te faut saisir quelques trucs sur la philosophie du framework.</p>
</div>
<div class="paragraph">
<p>Avant tout, Angular&#160;2 est un framework orienté composant. Tu vas écrire de petits composants, et assemblés, ils vont constituer une application complète. Un composant est un groupe d&#8217;éléments HTML, dans un template, dédiés à une tâche particulière. Pour cela, tu auras probablement besoin d&#8217;un peu de logique métier derrière ce template, pour peupler les données, et réagir aux événements par exemple. Pour les vétérans d&#8217;AngularJS&#160;1.x, c&#8217;est un peu comme le fameux duo "template&#160;/ controlleur", ou une directive.</p>
</div>
<div class="paragraph">
<p>Il faut aussi dire qu&#8217;un standard a été défini autour de ces composants&#160;: le standard <em>Web Component</em> ("composant web"). Même s&#8217;il n&#8217;est pas encore complètement supporté dans les navigateurs, tu peux déjà construire des petits composants isolés, réutilisables dans différentes applications (ce vieux rêve de programmeur). Cette orientation composant est largement partagée par de nombreux frameworks front-end&#160;: c&#8217;est le cas depuis le début de <a href="https://facebook.github.io/react/">ReactJS</a>, le framework tendance de Facebook&#160;; <a href="http://emberjs.com/">EmberJS</a> et <a href="http://angularjs.org">AngularJS</a> ont leur propre façon de faire quelque chose de similaire&#160;; et les petits nouveaux <a href="http://aurelia.io/">Aurelia</a> ou <a href="http://vuejs.org/">Vue.js</a> parient aussi sur la construction de petits composants.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="emberjs logo" width="25%">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="reactjs logo" width="25%">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAYAAACAvzbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY1NkExMjc5NzY5MjExRTM5MTg5OEQ5MEJGOENFNDc2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY1NkExMjdBNzY5MjExRTM5MTg5OEQ5MEJGOENFNDc2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjU2QTEyNzc3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjU2QTEyNzg3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6FxXliAAApN0lEQVR42uyde4xd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" alt="vuejs logo" width="25%">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="aureliajs logo" width="25%">
</div>
</div>
<div class="paragraph">
<p>Angular&#160;2 n&#8217;est donc pas le seul sur le sujet, mais il est parmi les premiers (ou le premier&#160;?) à considérer sérieusement l&#8217;intégration des Web Components (ceux du standard officiel). Mais écartons ce sujet, trop avancé pour le moment.</p>
</div>
<div class="paragraph">
<p>Tes composants seront organisés de façon hiérarchique, comme le DOM&#160;: un composant racine aura des composants enfants, qui auront chacun des composants enfants, etc&#8230;&#8203; Si tu veux afficher une course de poneys (qui ne voudrait pas&#160;?), tu auras probablement une application (Poneyracer), avec une vue enfant (Race), affichant un menu (Menu), l&#8217;utilisateur connecté (User), et, évidemment, les poneys (Pony) en course&#160;:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag 726f37f769fb4ec22a4cc6fe0b265e0a" width="510" height="266">
</div>
</div>
<div class="paragraph">
<p>Comme tu vas écrire des composants tous les jours (de la semaine au moins), regardons de plus près à quoi ça ressemble. L&#8217;équipe Angular voulait aussi bénéficier d&#8217;une autre pépite du développement web moderne&#160;: ES6 (ou ES2015, si tu préfères). Ainsi tu peux écrire tes composants en ES5 (pas cool&#160;!) ou en ES6 (super cool&#160;!). Mais cela ne leur suffisait pas, ils voulaient utiliser une fonctionnalité qui n&#8217;est pas encore standard&#160;: les décorateurs. Alors ils ont travaillé étroitement avec les équipes de transpileurs (Traceur et Babel) et l&#8217;équipe Microsoft du projet TypeScript, pour nous permettre d&#8217;utiliser des décorateurs dans nos applications Angular&#160;2. Quelques décorateurs sont disponibles, permettant de déclarer facilement un composant et sa vue. J&#8217;espère que tu es au courant, parce que je viens de consacrer deux chapitres à ces sujets&#160;!</p>
</div>
<div class="paragraph">
<p>Par exemple, en simplifiant, le composant Race pourrait ressembler à ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { RacesService } from <span class="string"><span class="delimiter">'</span><span class="content">./services</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-race</span><span class="delimiter">'</span></span>,
  <span class="key">templateUrl</span>: <span class="string"><span class="delimiter">'</span><span class="content">race/race.html</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RaceComponent {

  <span class="key">race</span>: any;

  constructor(racesService: RacesService) {
    racesService.get()
      .then(race =&gt; <span class="local-variable">this</span>.race = race);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et le template pourrait ressembler à ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div&gt;</span>
  <span class="tag">&lt;h2&gt;</span>{{ race.name }}<span class="tag">&lt;/h2&gt;</span>
  <span class="tag">&lt;div&gt;</span>{{ race.status }}<span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngFor</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">let pony of race.ponies</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;ns-pony</span> <span class="error">[</span><span class="attribute-name">pony</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">pony</span><span class="error">&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/ns-pony&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu connais déjà AngularJS&#160;1.x, le template doit t&#8217;être familier, avec les même expressions entre accolades <code>{{ }}</code>, qui seront évaluées et remplacées par les valeurs correspondantes. Certains trucs ont cependant changé&#160;: plus de <code>ng-repeat</code> par exemple. Je ne veux pas aller trop loin pour le moment, juste te donner un aperçu du code.</p>
</div>
<div class="paragraph">
<p>Un composant est une partie complètement isolée de ton application. Ton application <em>est</em> un composant comme les autres.</p>
</div>
<div class="paragraph">
<p>Tu regrouperas tes composants au sein d&#8217;une ou plusieurs entités cohérentes, appelées des modules (des modules Angular, pas des modules ES6).</p>
</div>
<div class="paragraph">
<p>Dans un monde idéal, tu prendrais aussi des modules sur étagère fournis par la communauté,
et les ajouterais simplement dans ton application pour bénéficier de leurs fonctionnalités.</p>
</div>
<div class="paragraph">
<p>De tels modules pourraient fournir des composants d&#8217;IHM, ou la gestion du glisser-déposer, ou des validations spécifiques pour tes formulaires, et tout ce que tu peux imaginer d&#8217;autre.</p>
</div>
<div class="paragraph">
<p>Dans les chapitres suivants, on explorera quoi mettre en place, comment construire un petit composant, ton premier module, et la syntaxe des templates.</p>
</div>
<div class="paragraph">
<p>Il y a un autre concept au cœur d&#8217;Angular&#160;2&#160;: l&#8217;injection de dépendance (<em>Dependency Injection</em>, DI). C&#8217;est un pattern très puissant, et tu seras très rapidement séduit après la lecture du chapitre qui lui sera consacré. C&#8217;est particulièrement utile pour tester ton application, et j&#8217;adore faire des tests, et voir la barre de progression devenir entièrement verte dans mon IDE. Ça me donne l&#8217;impression de faire du bon boulot. Il y aura ainsi un chapitre entier consacré à tout tester&#160;: tes composants, tes services, ton interface&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Angular a toujours cette sensation magique de la v1, où les modifications sont automatiquement détectées par le framework et appliquées au modèle et à la vue. Mais c&#8217;est fait d&#8217;une façon très différente&#160;: la détection de changement utilise désormais un concept nommé <code>zones</code>. On étudiera évidemment tout ça.</p>
</div>
<div class="paragraph">
<p>Angular est aussi un framework complet, avec plein d&#8217;outils pour faciliter les tâches classiques du développement web. Construire des formulaires, appeler un serveur HTTP, du routage d&#8217;URL, interagir avec d&#8217;autres bibliothèques, des animations, tout ce que tu veux&#160;: c&#8217;est possible&#160;!</p>
</div>
<div class="paragraph">
<p>Voilà, ça fait pas mal de trucs à apprendre&#160;! Alors commençons par le commencement&#160;: initialiser une application et construire notre premier composant.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="zero-to-something">7. Commencer de zéro</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_créer_une_application_avec_typescript">7.1. Créer une application avec TypeScript</h3>
<div class="paragraph">
<p>Commençons par créer notre première application Angular&#160;2 et notre premier composant, avec un minimum d&#8217;outillage.
Tu devras installer Node.js et NPM sur ton système. Comme la meilleure façon de le faire dépend de ton système d&#8217;exploitation,
le mieux est d&#8217;aller voir le <a href="https://nodejs.org/">site officiel</a>.
Assure-toi d&#8217;avoir une version suffisamment récente de Node.js (en exécutant <code>node --version</code>), quelque-chose comme 4.4+.
On va écrire notre application en TypeScript, donc tu devras l&#8217;installer aussi, via <code>npm</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">npm install -g typescript typings</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensuite, tu vas créer un nouveau répertoire pour notre expérimentation,
et utiliser <code>tsc</code> depuis ce nouveau répertoire vide pour y initialiser un projet.
<code>tsc</code> sont les initiales de <strong>TypeScript Compiler</strong> ("compilateur TypeScript").
Il est fourni par le module NPM <code>typescript</code> qu&#8217;on vient d&#8217;installer globalement&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">tsc --init --target es5 --sourceMap --experimentalDecorators --emitDecoratorMetadata</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela va créer un fichier, <code>tsconfig.json</code>, qui stockera les options de compilation TypeScript.
Comme on l&#8217;a vu dans les chapitres précédents, on va utiliser TypeScript avec des décorateurs (d&#8217;où les deux derniers flags),
et on veut que notre code soit transpilé en ECMASCRIPT&#160;5, lui permettant d&#8217;être exécuté par tout navigateur.
L&#8217;option <code>sourceMap</code> permet de générer les <em>source maps</em> ("dictionnaires de code source"),
c&#8217;est-à-dire des fichiers assurant le lien entre le code ES5 généré et le code TypeScript originel.</p>
</div>
<div class="paragraph">
<p>Ces <em>source maps</em> sont utilisés par le navigateur pour te permettre de débugger le code ES5 qu&#8217;il exécute
en parcourant le code TypeScript originel que tu as écrit.</p>
</div>
<div class="paragraph">
<p>On va maintenant utiliser notre IDE préféré. Tu peux utiliser à peu près ce que tu veux,
mais tu devrais y activer le support de TypeScript pour plus de confort (et t&#8217;assurer qu&#8217;il supporte TypeScript 1.5+)
Choisis ton IDE préféré: Webstorm, Atom, VisualStudio Code&#8230;&#8203;
Ils ont tous un bon support de TypeScript.</p>
</div>
<div class="paragraph">
<p>Le compilateur TypeScript (et aussi souvent l&#8217;IDE) s&#8217;appuie sur le fichier <code>tsconfig.json</code>
pour savoir quelles options il doit utiliser. Le fichier devrait ressembler à celui-ci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">compilerOptions</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">es5</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">experimentalDecorators</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">true</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">emitDecoratorMetadata</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">true</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">sourceMap</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">true</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">module</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">commonjs</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">noImplicitAny</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">false</span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">exclude</span><span class="delimiter">&quot;</span></span>: [
    <span class="string"><span class="delimiter">&quot;</span><span class="content">node_modules</span><span class="delimiter">&quot;</span></span>
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux voir que quelques options ont été ajoutées par défaut.
Une intéressante est l&#8217;option <code>module</code>, qui indique que notre code va être packagé sous forme de modules CommonJS.
Cela deviendra important dans un moment.</p>
</div>
<div class="paragraph">
<p>Maintenant on est prêt à lancer le compilateur TypeScript, en utilisant le <em>watch mode</em> ("mode de surveillance")
pour compiler en tâche de fond dès la sauvegarde. Il se peut aussi que ton IDE puisse s&#8217;en charger.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">tsc --watch</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela devrait afficher quelque chose comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">Compilation complete. Watching for file changes.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux désormais laisser ce compilateur tourner en fond et ouvrir une nouvelle ligne de commande pour la suite.</p>
</div>
<div class="paragraph">
<p>On doit maintenant ajouter la bibliothèque Angular&#160;2 et notre code. Pour la bibliothèque Angular&#160;2,
on va la télécharger avec NPM, un chouette outil pour gérer ses dépendances.</p>
</div>
<div class="paragraph">
<p>Pour éviter quelques problèmes, nous allons utiliser NPM version 3.
Vérifie quelle version tu as avec&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">npm -v</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu n&#8217;as pas NPM version 3, tu peux facilement le mettre à jour&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">npm install -g npm</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant que c&#8217;est fait, commençons par créer le fichier <code>package.json</code>, qui contient toutes les informations dont NPM a besoin.
Tu peux répondre par <kbd>Entrée</kbd> à toutes les questions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">npm init</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensuite, installons Angular&#160;2 et ses dépendances&#160;.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Cet ebook utilise Angular&#160;2 version 2.0.0-rc.5 dans les exemples.
La commande ci-dessous va installer la version la plus récente, qui ne sera peut-être pas la même.
Pour utiliser la même version que nous, ajoute <code>@2.0.0-rc.5</code> à chaque package Angular, comme <code>@angular/core@2.0.0-rc.5</code>.
Cela t&#8217;évitera peut-être quelques problèmes&#160;!
Angular&#160;2 étant très modulaire, nous devrons donc installer un certain nombre de packages pour le framework lui-même,
et pour ses dépendances.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">npm install --save @angular/core @angular/compiler @angular/common @angular/platform-browser @angular/platform-browser-dynamic rxjs@5.0.0-beta.6 reflect-metadata zone.js</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux jeter un coup d&#8217;œil au fichier <code>package.json</code>, il devrait désormais contenir les dépendances suivantes&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>les différents packages <code>@angular</code>.</p>
</li>
<li>
<p><code>reflect-metadata</code>, parce que nous utilisons les décorateurs.</p>
</li>
<li>
<p><code>rxjs</code>, une bibliothèque vraiment cool appelée <a href="https://github.com/ReactiveX/RxJS">RxJS</a> pour la programmation réactive.
On aura un chapitre entier consacré à ce sujet.</p>
</li>
<li>
<p>et enfin, le module <code>zone.js</code>, qui assure la plomberie pour faire tourner notre code dans des zones isolées
et y détecter les changements (on y reviendra aussi plus tard).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Dernière chose pour faire plaisir au compilateur, tu dois installer les <em>typings</em> pour tout ce qui a trait à ES6.
Le plus simple est d&#8217;installer les <em>typings</em> pour <code>core-js</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">typings init
typings install --save --global dt~core-js</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ajoute les <em>typings</em> dans la section <code>exclude</code> du fichier <code>tsconfig.json</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">&quot;exclude&quot;: [
  &quot;node_modules&quot;,
  &quot;typings/main.d.ts&quot;,
  &quot;typings/main&quot;
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;outillage est désormais en place, il est temps de créer notre premier composant&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_notre_premier_composant">7.2. Notre premier composant</h3>
<div class="paragraph">
<p>Crée un nouveau fichier, nommé <code>app.component.ts</code>.</p>
</div>
<div class="paragraph">
<p>Dès que tu sauveras ce fichier, tu devrais voir apparaître un nouveau fichier <code>app.component.js</code>
dans le répertoire&#160;: c&#8217;est le compilateur TypeScript qui fait son travail.
Tu devrais aussi voir le fichier <em>source map</em>.
Sinon, c&#8217;est que tu as probablement arrêté ton compilateur TypeScript qui surveillait les changements,
alors tu devrais le lancer à nouveau avec <code>tsc --watch</code>, et le laisser tourner en fond.</p>
</div>
<div class="paragraph">
<p>Comme on l&#8217;a vu dans le chapitre précédent, un composant est la combinaison d&#8217;une vue
(le template) et de logique (notre classe TS). Créons une classe&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">export</span> <span class="reserved">class</span> PonyRacerAppComponent {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre application elle-même est un simple composant. Pour l&#8217;indiquer à Angular,
on utilise le décorateur <code>@Component</code>. Et pour pouvoir l&#8217;utiliser, il nous faut l&#8217;importer&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> {Component} from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component()
<span class="reserved">export</span> <span class="reserved">class</span> PonyRacerAppComponent {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si ton IDE le supporte, la complétion de code devrait fonctionner car la dépendance Angular&#160;2 a ses propres fichiers <code>d.ts</code> dans le répertoire <code>node_modules</code>,
et TypeScript est capable de le détecter.
Tu peux même naviguer vers les définitions de type si tu le souhaites.</p>
</div>
<div class="paragraph">
<p>TypeScript apporte sa vérification de types, donc tu verras les erreurs dès que tu les tapes.
Mais les erreurs ne sont pas nécessairement bloquantes&#160;: si tu as oublié d&#8217;ajouter les informations de type sur ta variable,
le code compilera quand même en JavaScript et s&#8217;exécutera correctement.</p>
</div>
<div class="paragraph">
<p>J&#8217;essaie de mon côté de garder le compte des erreurs TypeScript à zéro, mais tu peux faire comme tu veux.
Comme nous utilisons des <em>source maps</em>, tu peux voir le code TypeScript directement dans ton navigateur,
et même débugger ton application en positionnant des points d&#8217;arrêt directement dedans.</p>
</div>
<div class="paragraph">
<p>Le décorateur <code>@Component</code> attend un objet de configuration.
On verra plus tard en détails ce qu&#8217;on peut y configurer,
mais pour le moment une seule propriété est requise&#160;: <code>selector</code>.
Elle indiquera à Angular ce qu&#8217;il faudra chercher dans nos pages HTML.
A chaque fois que le sélecteur défini sera trouvé dans notre HTML,
Angular remplacera l&#8217;élément sélectionné par notre composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> {Component} from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ponyracer-app</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PonyRacerAppComponent {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Donc ici, chaque fois que notre HTML contiendra un élément <code>&lt;ponyracer-app&gt;&lt;/ponyracer-app&gt;</code>,
Angular créera une nouvelle instance de notre classe <code>PonyRacerAppComponent</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Il n&#8217;y a pas de convention de nommage encore clairement établie.
J&#8217;ai tendance à suffixer mes classes de composants avec <code>Component</code>.
Les sélecteurs de composant devraient avoir un tiret, comme <code>ns-pony</code>,
même si ce n&#8217;est pas obligatoire.
Mais, si tu veux laisser d&#8217;autres développeurs utiliser tes composants
et éviter de potentiels conflits de nom,
il est de bon ton d&#8217;adopter une convention comme "namespace-composant".
Le <em>namespace</em> devrait être court, comme "ns" pour Ninja Squad par exemple.
Cela donnerait un composant réutilisable avec un sélecteur <code>ns-pony</code>.
Enfin, tu peux suffixer tes noms de fichiers pour que leur rôle soit évident au premier coup d&#8217;œil,
par exemple <code>pony.component.ts</code> ou <code>race.service.ts</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Un composant doit aussi avoir un template.
On pourrait externaliser le template dans un autre fichier,
mais contentons-nous de faire simple la première fois,
et mettons le en ligne&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ponyracer-app</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="string"><span class="delimiter">'</span><span class="content">&lt;h1&gt;PonyRacer&lt;/h1&gt;</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PonyRacerAppComponent {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>N&#8217;oublie pas d&#8217;importer le décorateur <code>Component</code>.
Tu l&#8217;oublieras régulièrement au début,
mais tu t&#8217;y feras vite, parce que le compilateur ne va cesser de t&#8217;insulter&#160;! ;)</p>
</div>
<div class="paragraph">
<p>Tu verras que l&#8217;essentiel de nos besoins se situe dans le module <code>@angular/core</code>,
mais ce n&#8217;est pas toujours le cas.
Par exemple, quand on fera du HTTP, on utilisera des imports de <code>@angular/http</code>,
ou quand on utilisera le routeur, on importera depuis <code>@angular/router</code>, etc&#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_notre_premier_module_angular">7.3. Notre premier module Angular</h3>
<div class="paragraph">
<p>Comme nous l&#8217;avons brièvement évoqué dans le chapitre précédent,
nous allons regrouper nos composants et les autres parties que nous verrons plus tard dans des entités cohérentes&#160;:
des modules Angular.</p>
</div>
<div class="paragraph">
<p>Un module Angular est différent des modules ES6 que nous avons croisés plus tôt&#160;:
nous parlons ici de modules <strong>applicatifs</strong>.</p>
</div>
<div class="paragraph">
<p>Notre application aura toujours au moins un module, le <strong>module racine</strong>.
Plus tard, peut-être, lorsque notre application grossira,
nous ajouterons d&#8217;autres modules, par fonctionnalité.
Par exemple, nous pourrions ajouter un module dédié à la partie Administration
de notre application, contenant tous les composants et la logique métier
de cette partie. Mais nous reviendrons là-dessus plus tard.
Nous verrons aussi que les libraires tierces et Angular lui-même expose des modules,
que nous pouvons utiliser dans notre application.</p>
</div>
<div class="paragraph">
<p>Pour définir un module Angular pour notre petite application, nous devons créer une classe.
Habituellement, cela est fait dans un fichier séparé, appelé <code>app.module.ts</code> pour le module racine.</p>
</div>
<div class="paragraph">
<p>Cette classe doit être décorée avec <code>@NgModule</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { NgModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { BrowserModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/platform-browser</span><span class="delimiter">'</span></span>;
<span class="error">@</span>NgModule({
  <span class="key">imports</span>: [BrowserModule],
})
<span class="reserved">export</span> <span class="reserved">class</span> AppModule {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme le décorateur <code>@Component</code>, il reçoit un objet de configuration.</p>
</div>
<div class="paragraph">
<p>Puisque nous construisons une application pour le navigateur,
le module racine devra importer <code>BrowserModule</code>.
Ce n&#8217;est la seule cible possible pour Angular&#160;2,
nous pouvons choisir de rendre l&#8217;application sur le serveur par exemple,
et devrions ainsi importer un autre module.
<code>BrowserModule</code> contient beaucoup de choses très utiles pour la suite.
Un module peut choisir d'<em>exporter</em> des composants, directives et pipes.
Quand tu importes un module, tu rends toutes les directives,
composants et pipes exportés par ce module utilisables dans ton module.
Notre module racine ne sera pas importé dans d&#8217;autres modules,
donc nous n&#8217;avons pas d'`exports`,
mais nous aurons plusieurs <code>imports</code> à la fin.</p>
</div>
<div class="paragraph">
<p>La terminologie n&#8217;est pas simple quand on débute.
On parle de modules ES6 et TS dans les premiers chapitres, qui définissent des imports et des exports.
Et maintenant nous parlons de modules Angular, qui ont aussi des imports et des exports&#8230;&#8203;
Que les mêmes termes désignent des concepts différents ne me semble pas une riche idée,
alors laisse-moi expliquer tout ça un peu plus.</p>
</div>
<div class="paragraph">
<p>Tu peux voir un import ES6 ou TS purement comme une fonctionnalité du langage, comme un import en Java&#160;:
il permet d&#8217;utiliser la classe/fonction importée dans notre code source.
Cela déclare aussi une dépendance pour le <em>bundler</em> ou le <em>module loader</em> (Webpack ou SystemJS, par exemple),
qui savent que si <code>a.ts</code> est chargé, alors <code>b.ts</code> doit être chargé également si <code>a</code> importe <code>b</code>.
Tu as besoin des imports et exports avec ES6 et TypeScript,
que tu utilises ou pas Angular ou un autre framework.</p>
</div>
<div class="paragraph">
<p>D&#8217;un autre côté,
importer un module Angular (par exemple <code>BrowserModule</code>) dans ton propre module Angular (<code>AppModule</code>),
a une signification fonctionnelle.
Cela indique à Angular&#160;: tous les composants, directives et pipes qui sont exportés par <code>BrowserModule</code>
doivent être rendus disponibles pour mes composants/templates Angular.
Cela n&#8217;a aucune signification particulière pour le compilateur TypeScript.</p>
</div>
<div class="paragraph">
<p>Revenons à <code>NgModule</code>&#160;:
nous devons déclarer les composants qui appartiennent à notre module racine
dans l&#8217;attribut <code>declarations</code> de son objet de configuration.
Ajoutons le composant que nous avons développé&#160;: <code>PonyracerAppComponent</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { NgModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { BrowserModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/platform-browser</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { PonyRacerAppComponent } from <span class="string"><span class="delimiter">'</span><span class="content">./app.component</span><span class="delimiter">'</span></span>;

<span class="error">@</span>NgModule({
  <span class="key">imports</span>: [BrowserModule],
  <span class="key">declarations</span>: [PonyRacerAppComponent],
})
<span class="reserved">export</span> <span class="reserved">class</span> AppModule {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme ce module est notre module racine,
nous devons également indiquer à Angular quel composant est le composant racine,
c&#8217;est à dire le composant que nous devons instancier quand l&#8217;application démarre.
C&#8217;est l&#8217;objectif du champ <code>bootstrap</code> de l&#8217;objet de configuration&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { NgModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { BrowserModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/platform-browser</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { PonyRacerAppComponent } from <span class="string"><span class="delimiter">'</span><span class="content">./app.component</span><span class="delimiter">'</span></span>;

<span class="error">@</span>NgModule({
  <span class="key">imports</span>: [BrowserModule],
  <span class="key">declarations</span>: [PonyRacerAppComponent],
  <span class="key">bootstrap</span>: [PonyRacerAppComponent]
})
<span class="reserved">export</span> <span class="reserved">class</span> AppModule {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre module est prêt, démarrons l&#8217;application&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_démarrer_l_application">7.4. Démarrer l&#8217;application</h3>
<div class="paragraph">
<p>Enfin, on doit démarrer l&#8217;application, avec la méthode <code>bootstrapModule</code>.
Cette méthode est présente sur un objet retourné par une méthode appelée <code>platformBrowserDynamic</code>.
Il nous faut aussi l&#8217;importer, depuis <code>@angular/platform-browser-dynamic</code>.
C&#8217;est quoi ce module bizarre&#160;?! Pourquoi n&#8217;est-ce pas <code>@angular/core</code>&#160;?
Bonne question&#160;: c&#8217;est parce que tu pourrais avoir envie de faire tourner ton application ailleurs que dans un navigateur,
parce qu&#8217;Angular&#160;2 permet le rendu côté serveur, ou peut tourner dans un Web Worker par exemple.
Et dans ces cas, la logique de démarrage sera un peu différente.
Mais on verra cela plus tard, on va se contenter d&#8217;un navigateur pour le moment.</p>
</div>
<div class="paragraph">
<p>Créons un nouveau fichier, par exemple <code>main.ts</code>,
pour séparer la logique de démarrage&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { platformBrowserDynamic } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/platform-browser-dynamic</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { AppModule } from <span class="string"><span class="delimiter">'</span><span class="content">./app.module</span><span class="delimiter">'</span></span>;

platformBrowserDynamic().bootstrapModule(AppModule);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Youpi&#160;! Mais attends voir. On n&#8217;a pas encore de fichier HTML, si&#160;? T&#8217;as raison&#160;!</p>
</div>
<div class="paragraph">
<p>Crée un autre fichier nommé <code>index.html</code> et ajoutes-y le contenu suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;html&gt;</span>

<span class="tag">&lt;head&gt;</span><span class="tag">&lt;/head&gt;</span>

<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;ponyracer-app&gt;</span>
    You will see me while Angular starts the app!
  <span class="tag">&lt;/ponyracer-app&gt;</span>
<span class="tag">&lt;/body&gt;</span>

<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Il nous faut maintenant ajouter nos scripts dans nos fichiers HTML.
En AngularJS&#160;1.x, c&#8217;était simple&#160;: il te suffisait d&#8217;ajouter un script pour angular.js,
et un script pour chacun des fichiers JS que tu avais écrits, et c&#8217;était bon.
Il y avait cependant un inconvénient&#160;: tout devait être chargé statiquement,
dès le démarrage, ce qui pouvait allonger lourdement les temps de chargement pour les grosses applications.</p>
</div>
<div class="paragraph">
<p>Avec Angular&#160;2, c&#8217;est plus complexe, mais aussi bien plus puissant.
Angular est maintenant modulaire, et chaque module (module ES6) peut être chargé dynamiquement.
Notre application est donc aussi modulaire, comme on l&#8217;a vu.</p>
</div>
<div class="paragraph">
<p>Il y a cependant quelques problèmes&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>la notion de module n&#8217;existe pas en ES5, et les navigateurs ne supportent que ES5 pour le moment&#160;;</p>
</li>
<li>
<p>les concepteurs d&#8217;ES6 ont décidé de spécifier comment les modules étaient définis et importés.
Mais ils n&#8217;ont pas encore spécifié comment ils devaient être packagés et chargés par les navigateurs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Pour charger nos modules, il nous faudra donc s&#8217;appuyer sur un outil&#160;: <a href="https://github.com/systemjs/systemjs">SystemJS</a>.
SystemJS est un petit chargeur de modules&#160;: tu l&#8217;ajoutes (statiquement) dans ta page HTML,
tu lui indiques où sont situés les modules sur le serveur, et tu charges l&#8217;un d&#8217;eux.
Il déterminera automatiquement les dépendances entre les modules,
et téléchargera ceux utilisés par ton application.</p>
</div>
<div class="paragraph">
<p>Cela va entraîner des pelletées de téléchargements de fichiers JS.
Si cela n&#8217;est pas un problème pendant le développement, ça le devient en production.
Heureusement, SystemJS vient aussi avec un outil qui peut emballer plusieurs petits modules dans un plus gros paquet.
Quand un module est requis, le paquet contenant ce module (et plusieurs autres) sera alors téléchargé.</p>
</div>
<div class="paragraph">
<p>Note que ce n&#8217;est pas le seul outil possible pour ce travail,
tu peux par exemple utiliser <a href="https://webpack.github.io/">Webpack</a> si tu veux.</p>
</div>
<div class="paragraph">
<p>Installons SystemJS&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">npm install --save systemjs</code></pre>
</div>
</div>
<div class="paragraph">
<p>On doit charger <code>SystemJS</code> statiquement, et lui indiquer où se situe notre module contenant la logique de démarrage (dans <code>main</code>).
On doit aussi lui indiquer où trouver les dépendances de notre application, comme <code>@angular</code>.
Mais d&#8217;abord, il nous faut inclure <code>reflect-metadata</code> et <code>zone.js</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;html&gt;</span>

<span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">node_modules/zone.js/dist/zone.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
  <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">node_modules/reflect-metadata/Reflect.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
  <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">node_modules/systemjs/dist/system.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
  <span class="tag">&lt;script&gt;</span>
<span class="inline">    System.config({
      <span class="comment">// we want to import modules without writing .js at the end</span>
      <span class="key">defaultJSExtensions</span>: <span class="predefined-constant">true</span>,
      <span class="comment">// the app will need the following dependencies</span>
      <span class="key">map</span>: {
        <span class="key"><span class="delimiter">'</span><span class="content">@angular</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">node_modules/@angular</span><span class="delimiter">'</span></span>,
        <span class="key"><span class="delimiter">'</span><span class="content">rxjs</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">node_modules/rxjs</span><span class="delimiter">'</span></span>
      },
      <span class="comment">// angular needs a bit of configuration to point to the main files</span>
      <span class="key">packages</span>: {
        <span class="key"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>: {
          <span class="key">main</span>: <span class="string"><span class="delimiter">'</span><span class="content">index.js</span><span class="delimiter">'</span></span>
        },
        <span class="key"><span class="delimiter">'</span><span class="content">@angular/compiler</span><span class="delimiter">'</span></span>: {
          <span class="key">main</span>: <span class="string"><span class="delimiter">'</span><span class="content">index.js</span><span class="delimiter">'</span></span>
        },
        <span class="key"><span class="delimiter">'</span><span class="content">@angular/common</span><span class="delimiter">'</span></span>: {
          <span class="key">main</span>: <span class="string"><span class="delimiter">'</span><span class="content">index.js</span><span class="delimiter">'</span></span>
        },
        <span class="key"><span class="delimiter">'</span><span class="content">@angular/platform-browser</span><span class="delimiter">'</span></span>: {
          <span class="key">main</span>: <span class="string"><span class="delimiter">'</span><span class="content">index.js</span><span class="delimiter">'</span></span>
        },
        <span class="key"><span class="delimiter">'</span><span class="content">@angular/platform-browser-dynamic</span><span class="delimiter">'</span></span>: {
          <span class="key">main</span>: <span class="string"><span class="delimiter">'</span><span class="content">index.js</span><span class="delimiter">'</span></span>
        }
      }
    });
    <span class="comment">// and to finish, let's boot the app!</span>
    System.<span class="reserved">import</span>(<span class="string"><span class="delimiter">'</span><span class="content">main</span><span class="delimiter">'</span></span>);</span>
  <span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;/head&gt;</span>

<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;ponyracer-app&gt;</span>
    You will see me while Angular starts the app!
  <span class="tag">&lt;/ponyracer-app&gt;</span>
<span class="tag">&lt;/body&gt;</span>

<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>OK&#160;! Démarrons maintenant un serveur HTTP pour servir notre mini application.
Je vais utiliser <code>http-server</code>, un outil Node.js qui fait ce que laisse deviner son nom.
Mais tu peux évidemment utiliser ton serveur web préféré&#160;: Apache, Nginx, Tomcat, etc&#8230;&#8203;
Pour l&#8217;installer, on utilisera <code>npm</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">npm install -g http-server</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour le démarrer, va dans ton répertoire, et entre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">http-server</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant c&#8217;est la grande première&#160;! Ouvre ton navigateur sur <a href="http://localhost:8080" class="bare">http://localhost:8080</a>.</p>
</div>
<div class="paragraph">
<p>Tu devrais y voir brièvement "You will see this while Angular start the app!",
puis ensuite "PonyRacer" devrait apparaître&#160;!
Ton premier composant est un succès&#160;!</p>
</div>
<div class="paragraph">
<p>Bon, OK, pour le moment ce n&#8217;est pas vraiment une application dynamique,
on aurait pu faire la même chose en une seconde dans une page HTML statique.
Alors jetons-nous sur les chapitres suivants, et apprenons tout de l&#8217;injection de dépendances et du système de templates.</p>
</div>
</div>
<div class="sect2">
<h3 id="_commencer_de_zéro_avec_angular_cli">7.5. Commencer de zéro avec angular-cli</h3>
<div class="paragraph">
<p>Dans un vrai projet, il te faudra probablement mettre en place d&#8217;autres choses comme&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>des tests pour vérifier que tu n&#8217;as pas introduit de régressions&#160;;</p>
</li>
<li>
<p>un outil de construction, pour orchestrer différentes tâches (compiler, tester, packager, etc&#8230;&#8203;)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Et c&#8217;est un peu laborieux de tout mettre en place tout seul,
même si je pense que c&#8217;est utile de le faire au moins une fois pour comprendre tout ce qui se passe.</p>
</div>
<div class="paragraph">
<p>Ces dernières années, plusieurs petits projets ont vu le jour,
tous basés sur le formidable <a href="http://yeoman.io/">Yeoman</a>.
C&#8217;était déjà le cas avec AngularJS&#160;1.x,
et il y a déjà plusieurs tentatives avec Angular&#160;2.</p>
</div>
<div class="paragraph">
<p>Mais cette fois-ci, l&#8217;équipe Google a travaillé sur le sujet,
et ils en ont sorti ceci&#160;: <a href="https://github.com/angular/angular-cli"><code>angular-cli</code></a>.</p>
</div>
<div class="paragraph">
<p><code>angular-cli</code> est un outil en ligne de commande pour démarrer rapidement un projet,
déjà configuré avec Webpack comme un outil de construction, des tests, du packaging, etc&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Cette idée n&#8217;est pas nouvelle, et est d&#8217;ailleurs piquée d&#8217;un autre framework populaire&#160;:
EmberJS et son <a href="http://ember-cli.com/"><code>ember-cli</code></a> largement plébiscité.</p>
</div>
<div class="paragraph">
<p>L&#8217;outil est encore en développement,
mais je pense qu&#8217;il va devenir le standard de fait pour créer une application Angular&#160;2 dans le futur,
alors tu peux l&#8217;essayer.</p>
</div>
<div class="paragraph">
<p>En fait, tu devrais vraiment l&#8217;essayer&#160;:
tu auras l&#8217;équivalent de ce que nous venons de faire manuellement,
plus une tonne de choses utiles.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">npm i -g angular-cli
ng new ponyracer</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela va créer un squelette de projet.
Tu peux démarrer l&#8217;application avec&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ng serve</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela va démarrer un petit serveur HTTP localement, avec rechargement à chaud.
Ainsi, à chaque modification de fichier, l&#8217;application sera rafraîchie dans le navigateur.</p>
</div>
<div class="paragraph">
<p>Tu peux aussi créer un squelette de composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ng generate component pony</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela va créer un fichier de composant, avec son template associé, sa feuille de style, et un fichier de test.</p>
</div>
<div class="paragraph">
<p>L&#8217;outil n&#8217;est pas seulement là pour nous aider à développer notre application&#160;:
il vient avec un système de plugins qui vont faciliter d&#8217;autres tâches comme le déploiement.
Par exemple, tu peux rapidement déployer sur Github Pages, avec le plugin <code>github-pages</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ng github-pages:deploy</code></pre>
</div>
</div>
<div class="paragraph">
<p>À terme, cela devrait être formidable&#160;!
On partagera la même organisation du code à travers les projets,
une façon commune de construire et déployer les applications,
et probablement un large écosystème de plugins pour simplifier certaines tâches.</p>
</div>
<div class="paragraph">
<p>Alors va jeter un œil à <code>angular-cli</code>&#160;!</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="templates">8. La syntaxe des templates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>On a vu qu&#8217;un composant a besoin de sa vue. Pour définir une vue, tu peux
définir un template <em>inline</em> (dans le code du composant), ou dans un fichier
séparé. Tu es probablement familier avec une syntaxe de template, peut-être
même avec celle d&#8217;AngularJS&#160;1.x. Pour simplifier, un template nous permet de
rendre du HTML avec quelques parties dynamiques dépendant de tes données.</p>
</div>
<div class="paragraph">
<p>Angular&#160;2 a sa propre syntaxe de template que nous devons donc apprendre avant
d&#8217;aller plus loin.</p>
</div>
<div class="paragraph">
<p>Prenons un exemple simple. Notre premier composant ressemblait à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ponyracer-app</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="string"><span class="delimiter">'</span><span class="content">&lt;h1&gt;PonyRacer&lt;/h1&gt;</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PonyRacerAppComponent {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Supposons qu&#8217;on veuille afficher des données dynamiques dans notre première
page, par exemple le nombre d&#8217;utilisateurs enregistrés dans notre application.
Plus tard nous verrons comment récupérer des données depuis un serveur, mais
pour le moment ce nombre d&#8217;utilisateurs sera directement hardcodé
dans notre classe&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ponyracer-app</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="string"><span class="delimiter">'</span><span class="content">&lt;h1&gt;PonyRacer&lt;/h1&gt;</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PonyRacerAppComponent {

  <span class="key">numberOfUsers</span>: number = <span class="integer">146</span>;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, comment doit-on modifier notre template pour afficher cette
variable&#160;? Grâce à l&#8217;interpolation&#160;!</p>
</div>
<div class="sect2">
<h3 id="_interpolation">8.1. Interpolation</h3>
<div class="paragraph">
<p>L&#8217;interpolation est un bien grand mot pour un concept simple.</p>
</div>
<div class="paragraph">
<p>Un exemple rapide&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ponyracer-app</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span>
    <span class="tag">&lt;h1&gt;</span>PonyRacer<span class="tag">&lt;/h1&gt;</span>
    <span class="tag">&lt;h2&gt;</span>{{numberOfUsers}} users<span class="tag">&lt;/h2&gt;</span>
  <span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PonyRacerAppComponent {

  <span class="key">numberOfUsers</span>: number = <span class="integer">146</span>;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nous avons un composant <code>PonyRacer</code>, qui sera activé dès qu&#8217;Angular tombera sur
une balise <code>&lt;ponyracer-app&gt;</code>. La classe <code>PonyRacerAppComponent</code> a une propriété,
<code>numberOfUsers</code>. Et le template a été enrichi avec une balise <code>&lt;h2&gt;</code>, utilisant
la fameuse notation avec double-accolades (les "moustaches") pour indiquer que
cette expression doit être évaluée. Ce type de templating est de
l&#8217;interpolation.</p>
</div>
<div class="paragraph">
<p>On devrait maintenant voir dans le navigateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ponyracer-app&gt;</span>
  <span class="tag">&lt;h1&gt;</span>PonyRacer<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;h2&gt;</span>146 users<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;/ponyracer-app&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>car <code>{{numberOfUsers}}</code> a été remplacé par sa valeur.</p>
</div>
<div class="paragraph">
<p>Quand Angular détecte un élément <code>&lt;ponyracer-app&gt;</code> dans une page, il crée une
instance de la classe <code>PonyRacerAppComponent</code>, et cette instance sera le contexte
d&#8217;évaluation des expressions dans le template. Ici la classe <code>PonyRacerAppComponent</code>
affecte <code>146</code> à la propriété <code>numberOfUsers</code>, donc nous voyons '146' affiché à
l&#8217;écran.</p>
</div>
<div class="paragraph">
<p>La magie surviendra quand la valeur de <code>numberOfUsers</code> sera modifiée dans notre
objet, et que le template sera alors automatiquement mis à jour&#160;! Cela s&#8217;appelle
<em>change detection</em> ("la détection de changement"), et c&#8217;est une des grandes
fonctionnalités d&#8217;Angular.</p>
</div>
<div class="paragraph">
<p>Il faut cependant se rappeler une chose importante&#160;: si on essaye
d&#8217;afficher une variable qui n&#8217;existe pas, au lieu d&#8217;afficher <code>undefined</code>,
Angular affichera une chaîne vide.
Et de même pour une variable <code>null</code>.</p>
</div>
<div class="paragraph">
<p>Maintenant, au lieu d&#8217;une valeur simple, disons que notre composant a un objet
<code>user</code> plus complexe, décrivant l&#8217;utilisateur courant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ponyracer-app</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span>
    <span class="tag">&lt;h1&gt;</span>PonyRacer<span class="tag">&lt;/h1&gt;</span>
    <span class="tag">&lt;h2&gt;</span>Welcome {{user.name}}<span class="tag">&lt;/h2&gt;</span>
  <span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PonyRacerAppComponent {

  <span class="key">user</span>: any = { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Cédric</span><span class="delimiter">'</span></span> };

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, on peut interpoler des expressions plus complexes, y
compris accéder à des propriétés dans un objet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ponyracer-app&gt;</span>
  <span class="tag">&lt;h1&gt;</span>PonyRacer<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;h2&gt;</span>Welcome Cédric<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;/ponyracer-app&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Que se passe-t-il si on a une faute de frappe dans notre template, avec une
propriété qui n&#8217;existe pas dans la classe&#160;?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ponyracer-app</span><span class="delimiter">'</span></span>,
  <span class="comment">// typo: users is not user!</span>
  <span class="key">template</span>: <span class="error">`</span>
    <span class="tag">&lt;h1&gt;</span>PonyRacer<span class="tag">&lt;/h1&gt;</span>
    <span class="tag">&lt;h2&gt;</span>Welcome {{users.name}}<span class="tag">&lt;/h2&gt;</span>
  <span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PonyRacerAppComponent {

  <span class="key">user</span>: any = { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Cédric</span><span class="delimiter">'</span></span> };

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>En chargeant l&#8217;application, tu auras une erreur, indiquant que cette propriété
n&#8217;existe pas&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">Cannot read property 'name' of undefined in [{{users.name}} in PonyRacerAppComponent]</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est plutôt cool, parce que tu peux être sûr que tes templates sont
corrects. Un des problèmes les plus fréquents en AngularJS&#160;1.x était que ce
genre d&#8217;erreurs n&#8217;était pas détecté, et tu pouvais ainsi perdre pas mal de
temps à comprendre ce qu&#8217;il se passait (traditionnellement, une faute de frappe
genre <code>{{users.name}}</code> au lieu de <code>{{user.name}}</code>). Pour avoir donné souvent
des formations AngularJS&#160;1.x, je peux te garantir qu&#8217;au moins 30% des
débutants rencontraient ce problème le premier jour. Ça m&#8217;agaçait un peu, alors
j&#8217;ai même soumis une
<a href="https://github.com/angular/angular.js/pull/6414">pull-request</a> pour afficher un
<em>warning</em> quand le parseur rencontrait une variable inconnue, mais elle a été
refusée pour de bonnes raisons, avec un commentaire de l&#8217;équipe précisant qu&#8217;ils
avaient une idée de comment corriger cela en Angular&#160;2. La voilà finalement
concrétisée&#160;!</p>
</div>
<div class="paragraph">
<p>Dernière petite fonctionnalité&#160;: que se passe-t-il si mon objet <code>user</code> est en fait récupéré depuis le serveur,
et donc indéfini dans mon composant au début&#160;?
Que pouvons-nous faire pour éviter les erreurs quand le template est compilé&#160;?</p>
</div>
<div class="paragraph">
<p>Facile&#160;: plutôt que d&#8217;écrire <code>user.name</code>, nous écrirons <code>user?.name</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ponyracer-app</span><span class="delimiter">'</span></span>,
  <span class="comment">// user is undefined</span>
  <span class="comment">// but the ?. will avoid the error</span>
  <span class="key">template</span>: <span class="error">`</span>
    <span class="tag">&lt;h1&gt;</span>PonyRacer<span class="tag">&lt;/h1&gt;</span>
    <span class="tag">&lt;h2&gt;</span>Welcome {{user?.name}}<span class="tag">&lt;/h2&gt;</span>
  <span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PonyRacerAppComponent {

  <span class="key">user</span>: any;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et nous n&#8217;avons plus d&#8217;erreur&#160;!
Le <code>?.</code> est parfois appelé "<strong>Safe Navigation Operator</strong>" (opérateur de navigation sûre).</p>
</div>
<div class="paragraph">
<p>Ainsi on peut écrire nos templates plus sereinement, et être assurés qu&#8217;ils vont
se comporter correctement.</p>
</div>
<div class="paragraph">
<p>Retournons à notre exemple. On affiche désormais un message de bienvenue. Allons
un peu plus loin, et essayons d&#8217;afficher une liste des courses de poneys à
venir.</p>
</div>
<div class="paragraph">
<p>Cela nous amène à écrire notre deuxième composant. Pour le moment, faisons
simple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// in another file, races.component.ts</span>
<span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-races</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;h2&gt;</span>Races<span class="tag">&lt;/h2&gt;</span><span class="error">`</span>
})
<span class="reserved">class</span> RacesComponent {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Rien d&#8217;extraordinaire&#160;: une simple classe, décorée avec <code>@Component</code> pour
indiquer un <code>selector</code> d&#8217;ancrage et un template
<em>inline</em>.</p>
</div>
<div class="paragraph">
<p>Si on veut maintenant inclure ce composant dans le template de <code>PonyRacerAppComponent</code>,
comment faire&#160;?</p>
</div>
</div>
<div class="sect2">
<h3 id="_utiliser_d_autres_composants_dans_nos_templates">8.2. Utiliser d&#8217;autres composants dans nos templates</h3>
<div class="paragraph">
<p>On a notre composant application, <code>PonyRacerAppComponent</code>, où on veut afficher le
composant listant les courses de poneys, <code>RacesComponent</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// in ponyracer_app.ts</span>
<span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ponyracer-app</span><span class="delimiter">'</span></span>,
  <span class="comment">// added the RacesComponent component</span>
  <span class="key">template</span>: <span class="error">`</span>
    <span class="tag">&lt;h1&gt;</span>PonyRacer<span class="tag">&lt;/h1&gt;</span>
    &lt;ns-races&gt;&lt;<span class="regexp"><span class="delimiter">/</span><span class="content">ns-races&gt;
  `
})
export class PonyRacerAppComponent {

}</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On a donc ajouté le composant <code>RacesComponent</code> dans le template, en incluant une
balise dont le nom correspond au <code>selector</code> défini dans le composant.</p>
</div>
<div class="paragraph">
<p>Maaaaais, ça ne fonctionnera pas&#160;: le navigateur n&#8217;affichera pas ce
composant listant les courses.</p>
</div>
<div class="paragraph">
<p>Pourquoi cela? La raison est simple: Angular ne connaît pas encore ce composant <code>RacesComponent</code>.</p>
</div>
<div class="paragraph">
<p>Mais la solution est simple. Tu te souviens qu&#8217;on a dû ajouter <code>PonyRacerAppComponent</code> dans les <code>declarations</code> du décorateur <code>@NgModule</code>&#160;?
A présent, comme on a un deuxième composant, il doit être déclaré également.</p>
</div>
<div class="paragraph">
<p><code>RacesComponent</code> n&#8217;est pas le composant racine de notre application, donc il doit être dans les déclarations, mais pas dans le tableau <code>bootstrap</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { NgModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { BrowserModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/platform-browser</span><span class="delimiter">'</span></span>;

<span class="reserved">import</span> { PonyRacerAppComponent } from <span class="string"><span class="delimiter">'</span><span class="content">./app.component</span><span class="delimiter">'</span></span>;
<span class="comment">// do not forget to import the component</span>
<span class="reserved">import</span> { RacesComponent } from <span class="string"><span class="delimiter">'</span><span class="content">./races.component</span><span class="delimiter">'</span></span>;

<span class="error">@</span>NgModule({
  <span class="key">imports</span>: [BrowserModule],
  <span class="key">declarations</span>: [PonyRacerAppComponent, RacesComponent],
  <span class="key">bootstrap</span>: [PonyRacerAppComponent]
})
<span class="reserved">export</span> <span class="reserved">class</span> AppModule {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note aussi que comme tu passes directement la classe, il te
faudra l&#8217;importer préalablement.</p>
</div>
<div class="paragraph">
<p>Pour importer <code>RacesComponent</code> dans la classe <code>PonyRacerAppComponent</code>, tu dois exporter la
classe <code>RacesComponent</code> dans son fichier source <code>races.component.ts</code> (relis le chapitre
<a href="#modules">modules ES6</a>
si ce n&#8217;est pas clair). Ainsi <code>RacesComponent</code> va ressembler
à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// in another file, races.component.ts</span>
<span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-races</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;h2&gt;</span>Races<span class="tag">&lt;/h2&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RacesComponent {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Désormais, notre composant listant les courses sera fièrement affiché dans le navigateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ponyracer-app&gt;</span>
  <span class="tag">&lt;h1&gt;</span>PonyRacer<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;ns-races&gt;</span>
    <span class="tag">&lt;h2&gt;</span>Races<span class="tag">&lt;/h2&gt;</span>
  <span class="tag">&lt;/ns-races&gt;</span>
<span class="tag">&lt;/ponyracer-app&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="__em_binding_em_de_propriété">8.3. <em>Binding</em> de propriété</h3>
<div class="paragraph">
<p>L&#8217;interpolation n&#8217;est qu&#8217;une des façons d&#8217;avoir des morceaux dynamiques dans nos
templates.</p>
</div>
<div class="paragraph">
<p>En fait, l&#8217;interpolation n&#8217;est qu&#8217;une simplification du concept au cœur du
moteur de template d&#8217;Angular&#160;2&#160;: le <em>binding</em> de propriété.</p>
</div>
<div class="paragraph">
<p>En Angular&#160;2, on peut écrire dans toutes les propriétés du DOM via des attributs
spéciaux sur les éléments HTML, entourés de crochets <code>[]</code>. Ça fait bizarre au
premier abord, mais en fait c&#8217;est du HTML valide (et ça m&#8217;a aussi surpris). Un
nom d&#8217;attribut HTML peut commencer par n&#8217;importe quoi, à l&#8217;exception de quelques
caractères comme un guillemet <code>"</code>, une apostrophe <code>'</code>, un slash <code>/</code>, un égal <code>=</code>, un espace&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Je mentionne les propriétés du DOM, mais peut-être n&#8217;est-ce pas clair pour toi.
On écrit en général dans des attributs HTML, n&#8217;est-ce pas&#160;? Tout à fait, en
général c&#8217;est ce qu&#8217;on fait. Prenons ce simple morceau d&#8217;HTML&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La balise <code>input</code> ci-dessus a deux <em>attributs</em>&#160;: un attribut <code>type</code> et un
attribut <code>value</code>. Quand le navigateur rencontre cette balise, il crée un nœud
correspondant dans le DOM (un HTMLInputElement si on veut être précis), qui a
les <em>propriétés</em> correspondantes <code>type</code> et <code>value</code>. Chaque attribut HTML
standard a une propriété correspondante dans un nœud du DOM. Mais un nœud du DOM
a aussi d&#8217;autres propriétés, qui ne correspondent à aucun attribut HTML. Par
exemple&#160;: <code>childElementCount</code>, <code>innerHTML</code> ou <code>textContent</code>.</p>
</div>
<div class="paragraph">
<p>L&#8217;interpolation que nous utilisions plus haut pour afficher le nom de
l&#8217;utilisateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{user.name}}<span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>est juste du sucre syntaxique pour l&#8217;écriture suivante&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p</span> <span class="error">[</span><span class="attribute-name">textContent</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">user.name</span><span class="error">&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La syntaxe à base de crochets permet de modifier la propriété <code>textContent</code> du
DOM, et nous lui donnons la valeur <code>user.name</code> qui sera évaluée dans le
contexte du composant courant, comme pour l&#8217;interpolation.</p>
</div>
<div class="paragraph">
<p>Note que l&#8217;analyseur est sensible à la casse, ce qui veut dire que la propriété doit être écrite avec la bonne casse.
<code>textcontent</code> ou <code>TEXTCONTENT</code> ne fonctionneront pas, il faut écrire <code>textContent</code>.</p>
</div>
<div class="paragraph">
<p>Les propriétés du DOM ont un avantage sur les attributs HTML&#160;: leurs valeurs
sont forcément à jour. Dans mon exemple, l'<em>attribut</em> <code>value</code> contiendra
toujours "hello", alors que la <em>propriété</em> <code>value</code> du DOM sera modifiée
dynamiquement par le navigateur, et contiendra ainsi la valeur entrée par
l&#8217;utilisateur dans le champ de saisie.</p>
</div>
<div class="paragraph">
<p>Enfin, les propriétés peuvent avoir des valeurs booléennes, alors que certains
attributs n&#8217;agissent que par leur simple présence ou absence sur la balise HTML.
Par exemple, il existe l&#8217;attribut <code>selected</code> sur la balise <code>&lt;option&gt;</code>&#160;:
quelle que soit la valeur que tu lui donnes, il sélectionnera l&#8217;option, dès qu&#8217;il
y est présent.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;option</span> <span class="attribute-name">selected</span><span class="tag">&gt;</span>Rainbow Dash<span class="tag">&lt;/option&gt;</span>
<span class="tag">&lt;option</span> <span class="attribute-name">selected</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Rainbow Dash<span class="tag">&lt;/option&gt;</span> <span class="comment">&lt;!-- still selected --&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec l&#8217;accès aux propriétés que nous offre Angular&#160;2, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;option</span> <span class="error">[</span><span class="attribute-name">selected</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">isPonySelected</span><span class="error">&quot;</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Rainbow Dash</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Rainbow Dash<span class="tag">&lt;/option&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Et le poney sera sélectionné si <code>isPonySelected</code> vaut <code>true</code>, et ne sera pas
sélectionné si elle vaut <code>false</code>. Et à chaque fois que la valeur de
<code>isPoneySelected</code> changera, la propriété <code>selected</code> sera mise à jour.</p>
</div>
<div class="paragraph">
<p>Tu peux faire plein de trucs cools avec ça, notamment des trucs qui étaient
pénibles en AngularJS&#160;1.x. Par exemple, avoir une URL source dynamique pour une
image&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">{{pony.avatar.url}}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette syntaxe a un problème majeur&#160;: le navigateur va essayer de récupérer
l&#8217;image dès qu&#8217;il lira l&#8217;attribut <code>src</code>. Tu peux constater l&#8217;échec&#160;: il
réalisera une requête HTTP sur l&#8217;URL <code>{{pony.avatar.url}}</code>, qui n&#8217;est pas une
URL valide&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>En AngularJS&#160;1.x, il y avait une directive dédiée à ce problème&#160;: <code>ng-src</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;img</span> <span class="attribute-name">ng-src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">{{pony.avatar.url}}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Utiliser <code>ng-src</code> au lieu de <code>src</code> solutionnait le problème, parce que le
navigateur ignorerait cet attribut non standard. Une fois qu&#8217;AngularJS avait
compilé l&#8217;application, il ajoutait l&#8217;attribut <code>src</code> avec une URL correcte après
interpolation, déclenchant ainsi le téléchargement de la bonne image.
Cool&#160;! Mais ça avait deux inconvénients&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>D&#8217;abord, en tant que développeur, il te fallait deviner quelle valeur
donner à <code>ng-src</code>. Était-ce 'https://gravatar.com'&#160;?
'"https://gravatar.com"'&#160;? 'pony.avatar.url'&#160;?
'{{pony.avatar.url}}'&#160;? Aucun moyen de savoir, sauf à lire la
documentation.</p>
</li>
<li>
<p>Ensuite, l&#8217;équipe Angular devait créer une directive pour chaque attribut
standard. Ils l&#8217;ont fait, et nous devions tous les connaître&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Mais nous sommes désormais dans un monde où ton HTML peut contenir des
<em>Web Components</em> externes, genre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ns-pony</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Rainbow Dash</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/ns-pony&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Si c&#8217;est un <em>Web Component</em> que tu veux utiliser, tu n&#8217;as aucun moyen
simple de lui passer une valeur dynamique avec la plupart des frameworks JS.
Sauf à ce que le développeur du <em>Web Component</em> ait pris un soin particulier
pour le rendre possible. Lis le chapitre sur les
<a href="#web-components"><em>Web Components</em></a>
pour plus d&#8217;informations.</p>
</div>
<div class="paragraph">
<p>Un <em>Web Component</em> doit agir comme un élément du navigateur, sans aucune
différence avec un élément natif. Ils ont une API DOM basée sur des propriétés,
événements, et méthodes. Avec Angular&#160;2, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ns-pony</span> <span class="error">[</span><span class="attribute-name">name</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">pony.name</span><span class="error">&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/ns-pony&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Et cela fonctionnera&#160;!</p>
</div>
<div class="paragraph">
<p>Angular synchonisera les valeurs des propriétés et des attributs.</p>
</div>
<div class="paragraph">
<p>Plus aucune directive spécifique à apprendre&#160;! Si tu veux cacher un
élément, tu peux utiliser la propriété standard <code>hidden</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="error">[</span><span class="attribute-name">hidden</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">isHidden</span><span class="error">&quot;</span><span class="tag">&gt;</span>Hidden or not<span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Et la <code>&lt;div&gt;</code> ne sera cachée que si <code>isHidden</code> vaut <code>true</code>, car Angular
travaillera directement avec la propriété <code>hidden</code> du DOM. Plus besoin de
<code>ng-hide</code>, ni des dizaines d&#8217;autres directives qui étaient nécessaires en
AngularJS&#160;1.x.</p>
</div>
<div class="paragraph">
<p>Tu peux aussi accéder à des propriétés comme l&#8217;attribut <code>color</code> de la
propriété <code>style</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p</span> <span class="error">[</span><span class="attribute-name">style.color</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">foreground</span><span class="error">&quot;</span><span class="tag">&gt;</span>Friendship is Magic<span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Si la valeur de l&#8217;attribut <code>foreground</code> est modifiée à <code>green</code>, le texte
deviendra vert aussi&#160;!</p>
</div>
<div class="paragraph">
<p>Ainsi Angular&#160;2 utilise les propriétés. Quelles valeurs pouvons-nous leur
donner&#160;? Nous avions déjà vu que l&#8217;interpolation
<code>property="{{expression}}"</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ns-pony</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">{{pony.name}}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/ns-pony&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>est la même chose que <code>[property]="expression"</code> (que l&#8217;on préfère généralement)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ns-pony</span> <span class="error">[</span><span class="attribute-name">name</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">pony.name</span><span class="error">&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/ns-pony&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux plutôt afficher 'Pony ' suivi du nom du poney, tu as deux
options&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ns-pony</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Pony {{pony.name}}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/ns-pony&gt;</span>
<span class="tag">&lt;ns-pony</span> <span class="error">[</span><span class="attribute-name">name</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="error">'</span><span class="attribute-name">Pony</span> <span class="error">'</span> <span class="error">+</span> <span class="attribute-name">pony.name</span><span class="error">&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/ns-pony&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Si ta valeur n&#8217;est pas dynamique, tu peux simplement écrire
<code>property="value"</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ns-pony</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Rainbow Dash</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/ns-pony&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Toutes ces notations sont équivalentes, et la syntaxe ne dépend pas de la façon
dont le développeur a choisi d&#8217;écrire son composant, comme c&#8217;était le cas en
AngularJS&#160;1.x où il fallait savoir si le composant attendait une valeur ou une
référence par exemple.</p>
</div>
<div class="paragraph">
<p>Bien sûr, une expression peut aussi contenir un appel de fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ns-pony</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">{{pony.fullName()}}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/ns-pony&gt;</span>
<span class="tag">&lt;ns-pony</span> <span class="error">[</span><span class="attribute-name">name</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">pony.fullName</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/ns-pony&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_Événements">8.4. Événements</h3>
<div class="paragraph">
<p>Si tu développes une application web, tu sais qu&#8217;afficher des données n&#8217;est
qu&#8217;une partie du travail&#160;: il te faut aussi réagir aux interactions de
l&#8217;utilisateur.</p>
</div>
<div class="paragraph">
<p>Pour cela, le navigateur déclenche des événements, que tu peux
écouter&#160;: <code>click</code>, <code>keyup</code>, <code>mousemove</code>, etc&#8230;&#8203; AngularJS&#160;1.x avait une
directive par événement&#160;: <code>ng-click</code>, <code>ng-keyup</code>, <code>ng-mousemove</code>, etc&#8230;&#8203; En
Angular&#160;2, c&#8217;est plus simple, il n&#8217;y a plus de directives spécifiques à se
remémorer.</p>
</div>
<div class="paragraph">
<p>Si on retourne à notre composant <code>RacesComponent</code>, nous aimerions maintenant un bouton
qui affichera les courses de poneys quand il est cliqué.</p>
</div>
<div class="paragraph">
<p>Réagir à un événement peut être fait comme suit&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;button</span> <span class="error">(</span><span class="attribute-name">click</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">onButtonClick</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>Click me!<span class="tag">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Un clic sur le bouton de l&#8217;exemple ci-dessus déclenchera un appel à la méthode
<code>onButtonClick()</code> du composant.</p>
</div>
<div class="paragraph">
<p>Ajoutons ceci à notre composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-races</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span>
    <span class="tag">&lt;h2&gt;</span>Races<span class="tag">&lt;/h2&gt;</span>
    <span class="tag">&lt;button</span> <span class="error">(</span><span class="attribute-name">click</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">refreshRaces</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>Refresh the races list<span class="tag">&lt;/button&gt;</span>
    <span class="tag">&lt;p&gt;</span>{{races.length}} races<span class="tag">&lt;/p&gt;</span>
  <span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RacesComponent {
  <span class="key">races</span>: any = [];

  refreshRaces() {
    <span class="local-variable">this</span>.races = [{ <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">London</span><span class="delimiter">'</span></span> }, { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Lyon</span><span class="delimiter">'</span></span> }];
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu testes ça dans notre navigateur, au départ tu devrais voir&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ponyracer-app&gt;</span>
  <span class="tag">&lt;h1&gt;</span>PonyRacer<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;ns-races&gt;</span>
    <span class="tag">&lt;h2&gt;</span>Races<span class="tag">&lt;/h2&gt;</span>
    <span class="tag">&lt;button</span> <span class="error">(</span><span class="attribute-name">click</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">refreshRaces</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>Refresh the races list<span class="tag">&lt;/button&gt;</span>
    <span class="tag">&lt;p&gt;</span>0 races<span class="tag">&lt;/p&gt;</span>
  <span class="tag">&lt;/ns-races&gt;</span>
<span class="tag">&lt;/ponyracer-app&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Et après le clic, '0 races' doit devenir '2 races'. Hourra \o/</p>
</div>
<div class="paragraph">
<p>L&#8217;instruction peut être un appel de fonction, mais ça peut être aussi n&#8217;importe
quelle instruction exécutable, ou même une séquence d&#8217;instructions, comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;button</span> <span class="error">(</span><span class="attribute-name">click</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">firstName</span> = <span class="string"><span class="delimiter">'</span><span class="content">Cédric</span><span class="delimiter">'</span></span><span class="error">;</span> <span class="attribute-name">lastName</span> = <span class="string"><span class="delimiter">'</span><span class="content">Exbrayat</span><span class="delimiter">'</span></span><span class="error">&quot;</span><span class="tag">&gt;</span>
  Click to change name to Cédric Exbrayat
<span class="tag">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais bon je ne te conseille pas de faire ça. Utiliser des méthodes est une
bien meilleure façon d&#8217;encapsuler le comportement. Elles rendront ton code plus
facile à tester et à maintenir, et rendront la vue plus simple.</p>
</div>
<div class="paragraph">
<p>Le truc cool c&#8217;est que ça fonctionne avec les événements standards du DOM, mais
aussi avec tous les événements spécifiques déclenchés par tes composants
Angular, ou par des <em>Web Components</em>. On verra plus tard comment déclencher des
événements spécifiques.</p>
</div>
<div class="paragraph">
<p>Pour le moment, disons que le composant <code>RacesComponent</code> déclenche un événement
spécifique pour indiquer la disponibilité d&#8217;une nouvelle course de poneys.</p>
</div>
<div class="paragraph">
<p>Notre template dans le composant <code>PonyRacerAppComponent</code> ressemblera alors à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ponyracer-app</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span>
    <span class="tag">&lt;h1&gt;</span>PonyRacer<span class="tag">&lt;/h1&gt;</span>
    &lt;ns-races (newRaceAvailable)=<span class="string"><span class="delimiter">&quot;</span><span class="content">onNewRace()</span><span class="delimiter">&quot;</span></span>&gt;&lt;<span class="regexp"><span class="delimiter">/</span><span class="content">ns-races&gt;
  `
})
export class PonyRacerAppComponent {
  onNewRace() {
    </span><span class="delimiter">/</span></span>/ add a flashy message <span class="keyword">for</span> the user.
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sans trop d&#8217;effort, on peut imaginer que le composant <code>&lt;ns-races&gt;</code> peut
déclencher un événement spécifique <code>newRaceAvailable</code>, et que quand cet
événement est déclenché, la méthode <code>onNewRace()</code> de notre <code>PonyRacerAppComponent</code> sera
appelée.</p>
</div>
<div class="paragraph">
<p>Angular écoute les événements de l&#8217;élément et ceux de ses enfants,
il va donc aussi réagir sur les événements "bouillonnants" ("bubbling up",
i.e. les événements qui se propagent vers le haut depuis le fond des composants enfants).
Considérons le template suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="error">(</span><span class="attribute-name">click</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">onButtonClick</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>
  <span class="tag">&lt;button&gt;</span>Click me!<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Même si l&#8217;utilisateur clique sur le bouton dans la div,
la méthode <code>onButtonClick()</code> sera appelée, car l&#8217;événement se propage vers le haut.</p>
</div>
<div class="paragraph">
<p>Et tu peux accéder à l&#8217;événement en question depuis la méthode
appelée&#160;! Pour cela, tu dois simplement passer <code>$event</code> à ta
méthode&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="error">(</span><span class="attribute-name">click</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">onButtonClick</span><span class="error">(</span><span class="error">$</span><span class="attribute-name">event</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>
  <span class="tag">&lt;button&gt;</span>Click me!<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ensuite tu peux gérer cet événement dans la classe du composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">onButtonClick(event) {
  console.log(event);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Par défaut, l&#8217;événement va continuer à "bouillonner", déclenchant
potentiellement d&#8217;autres <em>handlers</em> plus haut dans la hiérarchie de composants.</p>
</div>
<div class="paragraph">
<p>Tu peux agir sur l&#8217;événement pour empêcher ce comportement par défaut, et/ou
annuler la propagation si tu le souhaites&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">onButtonClick(event) {
  event.preventDefault();
  event.stopPropagation();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une autre fonctionnalité sympa réside dans la gestion des événements du clavier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="tag">&lt;textarea</span> <span class="error">(</span><span class="attribute-name">keydown.space</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">onSpacePress</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>Press space!<span class="tag">&lt;/textarea&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Chaque fois que tu appuies sur la touche <kbd>space</kbd>, la méthode <code>onSpacePress()</code> sera appelée.
Et on peut faire des combos, comme <code>(keydown.alt.space)</code>, etc&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Pour conclure cette partie, je voudrais t&#8217;indiquer une différence
fondamentale entre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;component</span> <span class="error">[</span><span class="attribute-name">property</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">doSomething</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/component&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>et</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;component</span> <span class="error">(</span><span class="attribute-name">event</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">doSomething</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/component&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans le premier cas de <em>binding</em> de propriété, la valeur <code>doSomething()</code> est une
expression, et sera évaluée à chaque cycle de détection de changement pour
déterminer si la propriété doit être modifiée.</p>
</div>
<div class="paragraph">
<p>Dans le second cas de <em>binding</em> d&#8217;événement, la valeur <code>doSomething()</code> est une
instruction (<em>statement</em>), et ne sera évaluée <strong>que lorsque l&#8217;événement est
déclenché</strong>.</p>
</div>
<div class="paragraph">
<p>Par définition, ces deux <em>bindings</em> ont des objectifs complètement différents,
et comme tu t&#8217;en doutes, des restrictions d&#8217;usage différentes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_expressions_vs_instructions">8.5. Expressions vs instructions</h3>
<div class="paragraph">
<p>Les expressions et les instructions (<em>statements</em>) présentent des différences.</p>
</div>
<div class="paragraph">
<p>Une expression sera évaluée plusieurs fois, par le mécanisme de détection de
changement. Elle doit ainsi être la plus performante possible. Pour faire
simple, une expression Angular est une version simplifiée d&#8217;une expression
JavaScript.</p>
</div>
<div class="paragraph">
<p>Si tu utilises <code>user.name</code> comme expression, <code>user</code> doit être défini, sinon
Angular va lever une erreur.</p>
</div>
<div class="paragraph">
<p>Une expression doit être unique&#160;: tu ne peux pas en enchaîner plusieurs
séparées par des points-virgules.</p>
</div>
<div class="paragraph">
<p>Une expression ne doit pas avoir d&#8217;effets de bord. Par exemple, une affectation est interdite.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="comment">&lt;!-- forbidden, as the expression is an assignment --&gt;</span>
<span class="comment">&lt;!-- this will throw an error --&gt;</span>
<span class="tag">&lt;component</span> <span class="error">[</span><span class="attribute-name">property</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">user</span> = <span class="string"><span class="delimiter">'</span><span class="content">Cédric</span><span class="delimiter">'</span></span><span class="error">&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/component&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Elle ne doit pas contenir de mot-clés comme <code>if</code>, <code>var</code>, etc&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>De son côté, une instruction est déclenchée par l&#8217;événement correspondant. Si
tu essayes d&#8217;utiliser une instruction comme <code>race.show()</code> où <code>race</code> serait
<code>undefined</code>, tu auras une erreur. Tu peux enchaîner plusieurs
instructions, séparées par un point-virgule. Une instruction peut avoir des
effets de bord, et doit généralement en avoir&#160;: c&#8217;est l&#8217;effet voulu quand
on réagit à un événement, on veut que des choses se produisent. Une instruction
peut contenir des affectations de variables, et peut contenir des mot-clés.</p>
</div>
</div>
<div class="sect2">
<h3 id="local-variables">8.6. Variables locales</h3>
<div class="paragraph">
<p>Quand j&#8217;explique qu&#8217;Angular va regarder dans l&#8217;instance du composant pour
trouver une variable, ce n&#8217;est pas tout à fait exact. En fait, il va regarder
dans l&#8217;instance du composant et dans les variables locales. Les variables
locales sont des variables que tu peux déclarer dynamiquement dans ton
template avec la notation <code>#</code>.</p>
</div>
<div class="paragraph">
<p>Supposons que tu veuilles afficher la valeur d&#8217;un input&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="error">#</span><span class="attribute-name">name</span><span class="tag">&gt;</span>
{{ name.value }}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec la notation <code>#</code>, on crée une variable locale <code>name</code> qui référence l&#8217;objet
<code>HTMLInputElement</code> du DOM. Cette variable locale peut être utilisée n&#8217;importe où
dans le template. Comme <code>HTMLInputElement</code> a une propriété <code>value</code>, on peut l&#8217;afficher
dans une expression interpolée. Je reviendrai sur cet exemple plus tard.</p>
</div>
<div class="paragraph">
<p>Un autre cas d&#8217;usage des variables locales est l&#8217;exécution d&#8217;une
action sur un autre élément.</p>
</div>
<div class="paragraph">
<p>Par exemple, tu peux vouloir donner le focus à un élément quand on clique
sur un bouton. C&#8217;était un peu pénible à réaliser en AngularJS&#160;1.x, il te
fallait créer une directive et tout le tralala.</p>
</div>
<div class="paragraph">
<p>La méthode <code>focus()</code> est standard dans l&#8217;API DOM, et on peut maintenant en
bénéficier. Avec une variable locale en Angular&#160;2, c&#8217;est super simple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="error">#</span><span class="attribute-name">name</span><span class="tag">&gt;</span>
<span class="tag">&lt;button</span> <span class="error">(</span><span class="attribute-name">click</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">name.focus</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>Focus the input<span class="tag">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ça peut aussi être utilisé avec un composant spécifique, créé dans notre
application, ou importé d&#8217;un autre projet, ou même un véritable <em>Web
Component</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;google-youtube</span> <span class="error">#</span><span class="attribute-name">player</span><span class="tag">&gt;</span><span class="tag">&lt;/google-youtube&gt;</span>

<span class="tag">&lt;button</span> <span class="error">(</span><span class="attribute-name">click</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">player.play</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>Play!<span class="tag">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici le bouton peut lancer la lecture de la vidéo sur le composant
<code>&lt;google-youtube&gt;</code>. C&#8217;est bien un
<a href="http://googlewebcomponents.github.io/google-youtube/components/google-youtube/">véritable Web Component</a>
écrit en <a href="https://www.polymer-project.org/1.0/">Polymer</a>&#160;! Ce composant a
une méthode <code>play()</code> qu&#8217;Angular peut appeler quand on clique sur le
bouton&#160;: la classe&#160;!</p>
</div>
<div class="paragraph">
<p>Les variables locales ont quelques cas d&#8217;utilisations spécifiques, et on va
progressivement les découvrir. L&#8217;un d&#8217;entre eux est expliqué dans la section
juste ci-dessous.</p>
</div>
</div>
<div class="sect2">
<h3 id="_directives_de_structure">8.7. Directives de structure</h3>
<div class="paragraph">
<p>Pour le moment, notre <code>RacesComponent</code> n&#8217;affiche toujours aucune course de poneys :)
La façon "canonique" en Angular&#160;2 serait de créer un autre composant <code>RaceComponent</code>
pour afficher chaque course. On va faire quelque chose de plus simple, et
utiliser une pauvre liste <code>&lt;ul&gt;&lt;li&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Le <em>binding</em> de propriété et d&#8217;événement est formidable,
mais ils ne nous permettent pas de modifier la structure du DOM,
comme pour itérer sur une collection et ajouter un nœud par élément.
Pour cela, nous avons besoin de <strong>directives structurelles</strong>.
Dans Angular, une directive est assez proche d&#8217;un composant, mais n&#8217;a pas de template.
On les utilise pour ajouter un comportement à un élément.</p>
</div>
<div class="paragraph">
<p>Les directives structurelles fournies par Angular&#160;2 s&#8217;appuient sur l&#8217;élément <code>&lt;template&gt;</code>, une balise standard
de la <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template">specification</a> HTML&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;template&gt;</span>
  <span class="tag">&lt;div&gt;</span>Races list<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/template&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici nous avons défini un template, affichant une simple <code>&lt;div&gt;</code>.
Seul, il n&#8217;est pas très utile, car le navigateur ne va pas l&#8217;afficher.
Mais si nous ajoutons un élément <code>template</code> dans l&#8217;une de nos vues,
alors Angular&#160;2 pourra utiliser son contenu.
Les directives structurelles ont justement la capacité d&#8217;utiliser ce contenu,
pour l&#8217;afficher ou non, le répéter, etc&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Examinons ces fameuses directives&#160;!</p>
</div>
<div class="sect3">
<h4 id="_ngif">8.7.1. NgIf</h4>
<div class="paragraph">
<p>Si nous voulons instancier le template seulement lorsqu&#8217;une condition est réalisée,
alors nous utiliserons la directive <code>ngIf</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;template</span> <span class="error">[</span><span class="attribute-name">ngIf</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">races.length</span> <span class="tag">&gt;</span> 0&quot;<span class="error">&gt;</span>
  <span class="tag">&lt;div&gt;</span><span class="tag">&lt;h2&gt;</span>Races<span class="tag">&lt;/h2&gt;</span><span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/template&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Le framework propose quelques directives, comme <code>ngIf</code>.
Elles viennent du module que nous avons importé un peu plus tôt&#160;: <code>BrowserModule</code>.
Si besoin, tu peux aussi définir tes propres directives&#160;; on y reviendra.</p>
</div>
<div class="paragraph">
<p>Ici, le template ne sera instancié que si <code>races</code> a au moins un élément, donc
s&#8217;il existe des courses de poneys. Comme cette syntaxe est un peu longue, il y a
une version raccourcie&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">races.length </span></span><span class="error">&gt;</span> 0&quot;<span class="error">&gt;</span><span class="tag">&lt;h2&gt;</span>Races<span class="tag">&lt;/h2&gt;</span><span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Et tu utiliseras toujours cette version courte.</p>
</div>
<div class="paragraph">
<p>La notation utilise <code>*</code> pour montrer que c&#8217;est une instantiation de template. La
directive <code>ngIf</code> va maintenant prendre en charge l&#8217;affichage ou non de la <code>div</code>
à chaque fois que la valeur de <code>races</code> va changer&#160;: s&#8217;il n&#8217;y a plus de
course, la <code>div</code> va disparaître.</p>
</div>
<div class="paragraph">
<p>Les directives fournies par le framework sont déjà pré-chargées pour nous,
nous n&#8217;avons donc pas besoin d&#8217;importer et de déclarer <code>NgIf</code>
dans l&#8217;attribut <code>directives</code> du décorateur <code>@Component</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-races</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">races.length </span></span><span class="error">&gt;</span> 0&quot;<span class="error">&gt;</span><span class="tag">&lt;h2&gt;</span>Races<span class="tag">&lt;/h2&gt;</span><span class="tag">&lt;/div&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RacesComponent {
  <span class="key">races</span>: Array&lt;any&gt; = [];
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ngfor">8.7.2. NgFor</h4>
<div class="paragraph">
<p>Travailler avec de vraies données te conduira indubitablement à afficher une
liste d&#8217;éléments. <code>ngFor</code> est alors très utile&#160;: elle permet d&#8217;instancier un
template par élément d&#8217;une collection. Notre composant <code>RacesComponent</code> possède un
attribut <code>races</code>, qui est, comme tu peux le deviner, un tableau des courses
de poneys disponibles.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-races</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">races.length </span></span><span class="error">&gt;</span> 0&quot;<span class="error">&gt;</span>
  <span class="tag">&lt;h2&gt;</span>Races<span class="tag">&lt;/h2&gt;</span>
  <span class="tag">&lt;ul&gt;</span>
    <span class="tag">&lt;li</span> <span class="error">*</span><span class="attribute-name">ngFor</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">let race of races</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>{{race.name}}<span class="tag">&lt;/li&gt;</span>
  <span class="tag">&lt;/ul&gt;</span>
  <span class="tag">&lt;/div&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RacesComponent {
  <span class="key">races</span>: Array&lt;any&gt; = [{ <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">London</span><span class="delimiter">'</span></span> }, { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Lyon</span><span class="delimiter">'</span></span> }];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ainsi nous avons une magnifique liste, avec une balise <code>li</code> par élément de
notre collection&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ul&gt;</span>
  <span class="tag">&lt;li&gt;</span>London<span class="tag">&lt;/li&gt;</span>
  <span class="tag">&lt;li&gt;</span>Lyon<span class="tag">&lt;/li&gt;</span>
<span class="tag">&lt;/ul&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que <code>NgFor</code> utilise une syntaxe particulière, dite "microsyntaxe"
(<em>microsyntax</em>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ul&gt;</span>
  <span class="tag">&lt;li</span> <span class="error">*</span><span class="attribute-name">ngFor</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">let race of races</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>{{race.name}}<span class="tag">&lt;/li&gt;</span>
<span class="tag">&lt;/ul&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est l&#8217;équivalent du plus verbeux (et que l&#8217;on n&#8217;utilisera jamais)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ul&gt;</span>
  <span class="tag">&lt;template</span> <span class="attribute-name">ngFor</span> <span class="attribute-name">let-race</span> <span class="error">[</span><span class="attribute-name">ngForOf</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">races</span><span class="error">&quot;</span><span class="tag">&gt;</span>
    <span class="tag">&lt;li&gt;</span>{{race.name}}<span class="tag">&lt;/li&gt;</span>
  <span class="tag">&lt;/template&gt;</span>
<span class="tag">&lt;/ul&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux reconnaître ici&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>L&#8217;élément <code>template</code> pour déclarer un template <em>inline</em>,</p>
</li>
<li>
<p>La directive <code>NgFor</code> qui lui est appliquée,</p>
</li>
<li>
<p>La propriété <code>NgForOf</code> où nous fournissons la collection à parcourir,</p>
</li>
<li>
<p>La variable <code>race</code> à utiliser dans les expressions interpolées,
reflétant l&#8217;élément courant.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Au lieu de se rappeler de tout ça, c&#8217;est plus simple d&#8217;utiliser la notation
raccourcie&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ul&gt;</span>
  <span class="tag">&lt;li</span> <span class="error">*</span><span class="attribute-name">ngFor</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">let race of races</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>{{race.name}}<span class="tag">&lt;/li&gt;</span>
<span class="tag">&lt;/ul&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est aussi possible de déclarer une autre variable locale, associée à l&#8217;indice
de l&#8217;élément courant dans la collection&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ul&gt;</span>
  <span class="tag">&lt;li</span> <span class="error">*</span><span class="attribute-name">ngFor</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">let race of races; let i=index</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>{{i}} - {{race.name}}<span class="tag">&lt;/li&gt;</span>
<span class="tag">&lt;/ul&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La variable locale <code>i</code> recevra l&#8217;indice de l&#8217;élément courant,
commençant à zéro.</p>
</div>
<div class="paragraph">
<p><code>index</code> est une <strong>variable exportée</strong>.
Certaines directives exportent des variables que l&#8217;on peut affecter à une variable locale
afin de pouvoir les utiliser dans notre template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ul&gt;</span>
  <span class="tag">&lt;li&gt;</span>0 - London<span class="tag">&lt;/li&gt;</span>
  <span class="tag">&lt;li&gt;</span>1 - Lyon<span class="tag">&lt;/li&gt;</span>
<span class="tag">&lt;/ul&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Il y aussi quelques autres variables exportées qui peuvent être utiles&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>even</code>, un booléen qui sera vrai si l&#8217;élément a un index pair</p>
</li>
<li>
<p><code>odd</code>, un booléen qui sera vrai si l&#8217;élément a un index impair</p>
</li>
<li>
<p><code>first</code>, un booléen qui sera vrai si l&#8217;élément est le premier de la collection</p>
</li>
<li>
<p><code>last</code>, un booléen qui sera vrai si l&#8217;élément est le dernier de la collection</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ngswitch">8.7.3. NgSwitch</h4>
<div class="paragraph">
<p>Comme tu peux le deviner par son nom, celle-ci permet de switcher entre
plusieurs templates selon une condition.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="error">[</span><span class="attribute-name">ngSwitch</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">messageCount</span><span class="error">&quot;</span><span class="tag">&gt;</span>
  <span class="tag">&lt;p</span> <span class="error">*</span><span class="attribute-name">ngSwitchCase</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>You have no message<span class="tag">&lt;/p&gt;</span>
  <span class="tag">&lt;p</span> <span class="error">*</span><span class="attribute-name">ngSwitchCase</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>You have a message<span class="tag">&lt;/p&gt;</span>
  <span class="tag">&lt;p</span> <span class="error">*</span><span class="attribute-name">ngSwitchDefault</span><span class="tag">&gt;</span>You have some messages<span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, <code>ngSwitch</code> prend une condition et les <code>*ngSwitchCase</code> attendent les différents cas possibles.
Tu as aussi <code>*ngSwitchDefault</code>, qui sera affiché si aucune des autres possibilités n&#8217;est remplie.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_autres_directives_de_templating">8.8. Autres directives de templating</h3>
<div class="paragraph">
<p>Deux autres directives peuvent être utiles pour écrire un template,
mais ce ne sont pas des directives structurelles comme celles que nous venons de voir.
Ces directives sont des directives standards.</p>
</div>
<div class="sect3">
<h4 id="_ngstyle">8.8.1. NgStyle</h4>
<div class="paragraph">
<p>La première est <code>ngStyle</code>.
Nous avons déjà vu que nous pouvions agir sur le style d&#8217;un élément en utilisant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p</span> <span class="error">[</span><span class="attribute-name">style.color</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">foreground</span><span class="error">&quot;</span><span class="tag">&gt;</span>Friendship is Magic<span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux changer plusieurs styles en même temps,
tu peux utiliser la directive <code>ngStyle</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="error">[</span><span class="attribute-name">ngStyle</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="error">{</span><span class="attribute-name">fontWeight:</span> <span class="attribute-name">fontWeight</span><span class="error">,</span> <span class="attribute-name">color:</span> <span class="attribute-name">color</span><span class="error">}</span><span class="error">&quot;</span><span class="tag">&gt;</span>I've got style<span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que la directive attend un objet dont les clés sont les styles à définir.
La clé peut être soit en <strong>camelCase</strong> (<code>fontWeight</code>) ou en <strong>dash-case</strong> (<code>'font-weight'</code>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_ngclass">8.8.2. NgClass</h4>
<div class="paragraph">
<p>Dans le même esprit, la directive <code>ngClass</code> permet
d&#8217;ajouter ou d&#8217;enlever dynamiquement des classes sur un élément.</p>
</div>
<div class="paragraph">
<p>Comme pour le style, on peut soit définir une seule classe avec le binding de propriété&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="error">[</span><span class="attribute-name">class.awesome-div</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">isAnAwesomeDiv</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>I've got style<span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ou, si on veut en définir plusieurs en même temps,
utiliser <code>ngClass</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="error">[</span><span class="attribute-name">ngClass</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="error">{</span><span class="error">'</span><span class="attribute-name">awesome-div</span><span class="error">'</span><span class="attribute-name">:</span> <span class="attribute-name">isAnAwesomeDiv</span><span class="error">(</span><span class="error">)</span><span class="error">,</span> <span class="error">'</span><span class="attribute-name">colored-div</span><span class="error">'</span><span class="attribute-name">:</span> <span class="attribute-name">isAColoredDiv</span><span class="error">(</span><span class="error">)</span><span class="error">}</span><span class="error">&quot;</span><span class="tag">&gt;</span>I've got style<span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_syntaxe_canonique">8.9. Syntaxe canonique</h3>
<div class="paragraph">
<p>Chacune des syntaxes indiquées a une version plus verbeuse appelée la syntaxe
canonique (<em>canonical syntax</em>). C&#8217;est essentiellement intéressant si ton
moteur de template côté serveur a du mal avec les notations <code>[]</code> ou <code>()</code>.
Ou si tu ne supportes vraiment pas d&#8217;utiliser <code>[]</code>, <code>()</code>,  <code>*</code>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Si tu veux déclarer un <em>binding</em> de propriété, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ns-pony</span> <span class="error">[</span><span class="attribute-name">name</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">pony.name</span><span class="error">&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/ns-pony&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>ou utiliser la notation canonique&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ns-pony</span> <span class="attribute-name">bind-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">pony.name</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/ns-pony&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour le <em>binding</em> d&#8217;événement, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;button</span> <span class="error">(</span><span class="attribute-name">click</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">onButtonClick</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>Click me!<span class="tag">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>ou utiliser la syntaxe canonique&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;button</span> <span class="attribute-name">on-click</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">onButtonClick()</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Click me!<span class="tag">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Et pour les variables locales, tu utiliseras <code>ref-</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref-name</span><span class="tag">&gt;</span>
<span class="tag">&lt;button</span> <span class="attribute-name">on-click</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name.focus()</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Focus the input<span class="tag">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>au lieu de la forme raccourcie&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="error">#</span><span class="attribute-name">name</span><span class="tag">&gt;</span>
<span class="tag">&lt;button</span> <span class="error">(</span><span class="attribute-name">click</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">name.focus</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>Focus the input<span class="tag">&lt;/button&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_résumé">8.10. Résumé</h3>
<div class="paragraph">
<p>Le système de template d&#8217;Angular&#160;2 nous propose une syntaxe puissante pour
exprimer les parties dynamiques de notre HTML. Elle nous permet d&#8217;exprimer du
<em>binding</em> de données, de propriétés, d&#8217;événements, et des considérations de
templating, d&#8217;une façon claire, avec des symboles propres&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{{}}</code> pour l&#8217;interpolation,</p>
</li>
<li>
<p><code>[]</code> pour le <em>binding</em> de propriété,</p>
</li>
<li>
<p><code>()</code> pour le <em>binding</em> d&#8217;événement,</p>
</li>
<li>
<p><code>#</code> pour la déclaration de variable,</p>
</li>
<li>
<p><code>*</code> pour les directives structurelles.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Elle permet d&#8217;interagir avec le standard des <em>Web Components</em> comme
aucun autre framework. Et comme il n&#8217;y a pas d&#8217;ambiguité sémantique
entre les symboles, on verra nos outils et IDEs s&#8217;améliorer progressivement pour
nous aider et nous alerter dans nos écritures de templates.</p>
</div>
<div class="paragraph">
<p>Tous ces symboles sont les versions raccourcies de leur pendant canonique, que
tu peux utiliser si tu le souhaites.</p>
</div>
<div class="paragraph">
<p>Tu auras certainement besoin de temps pour utiliser intuitivement cette syntaxe,
mais tu gagneras rapidement en dextérité, et elle deviendra ensuite facile à
lire et à écrire.</p>
</div>
<div class="paragraph">
<p>Avant de passer à la suite, essayons de voir un exemple complet.</p>
</div>
<div class="paragraph">
<p>Je veux écrire un composant <code>PoniesComponent</code>, affichant une liste de poneys.
Chacun de ces poneys devrait être représenté par son propre composant <code>PonyComponent</code>,
mais nous n&#8217;avons pas encore vu comment passer des paramètres à un composant.
Donc, pour l&#8217;instant, nous allons nous contenter d&#8217;afficher une simple liste.
La liste devra s&#8217;afficher seulement si elle n&#8217;est pas vide,
et j&#8217;aimerais avoir un peu de couleur sur les lignes paires.
Et nous voulons pouvoir rafraîchir cette liste d&#8217;un simple clic sur un bouton.</p>
</div>
<div class="paragraph">
<p>Prêt&#160;?</p>
</div>
<div class="paragraph">
<p>On commence par écrire notre composant, dans son propre fichier&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-ponies</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PoniesComponent {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux l&#8217;ajouter au composant <code>PonyRacerAppComponent</code> écrit au chapitre précédent
pour le tester. Tu devras l&#8217;importer, l&#8217;ajouter aux directives, et insérer la
balise <code>&lt;ns-ponies&gt;&lt;/ns-ponies&gt;</code> dans le template.</p>
</div>
<div class="paragraph">
<p>Notre nouveau composant a une liste de poneys&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-ponies</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PoniesComponent {
  <span class="key">ponies</span>: Array&lt;any&gt; = [{ <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span> }, { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Pinkie Pie</span><span class="delimiter">'</span></span> }];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On va afficher cette liste, en utilisant <code>ngFor</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-ponies</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;ul&gt;</span>
    <span class="tag">&lt;li</span> <span class="error">*</span><span class="attribute-name">ngFor</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">let pony of ponies</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>{{pony.name}}<span class="tag">&lt;/li&gt;</span>
  <span class="tag">&lt;/ul&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PoniesComponent {
  <span class="key">ponies</span>: Array&lt;any&gt; = [{ <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span> }, { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Pinkie Pie</span><span class="delimiter">'</span></span> }];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il manque un dernier truc, le bouton qui rafraîchit la liste&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-ponies</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;ul&gt;</span>
  <span class="tag">&lt;button</span> <span class="error">(</span><span class="attribute-name">click</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">refreshPonies</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>Refresh<span class="tag">&lt;/button&gt;</span>
  <span class="tag">&lt;li</span> <span class="error">*</span><span class="attribute-name">ngFor</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">let pony of ponies</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>{{pony.name}}<span class="tag">&lt;/li&gt;</span>
  <span class="tag">&lt;/ul&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PoniesComponent {
  <span class="key">ponies</span>: Array&lt;any&gt; = [{ <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span> }, { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Pinkie Pie</span><span class="delimiter">'</span></span> }];

  refreshPonies() {
    <span class="local-variable">this</span>.ponies = [{ <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Fluttershy</span><span class="delimiter">'</span></span> }, { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rarity</span><span class="delimiter">'</span></span> }];
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et bien sûr, une touche de couleur pour finir,
avec l&#8217;utilisation de <code>[style.color]</code> et de la variable locale <code>isEven</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-ponies</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;ul&gt;</span>
    <span class="tag">&lt;button</span> <span class="error">(</span><span class="attribute-name">click</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">refreshPonies</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>Refresh<span class="tag">&lt;/button&gt;</span>
    <span class="tag">&lt;li</span> <span class="error">*</span><span class="attribute-name">ngFor</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">let pony of ponies; let isEven=even</span><span class="delimiter">&quot;</span></span>
      <span class="error">[</span><span class="attribute-name">style.color</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">isEven</span> <span class="error">?</span> <span class="error">'</span><span class="attribute-name">green</span><span class="error">'</span> <span class="attribute-name">:</span> <span class="error">'</span><span class="attribute-name">black</span><span class="error">'</span><span class="error">&quot;</span><span class="tag">&gt;</span>
      {{pony.name}}
    <span class="tag">&lt;/li&gt;</span>
  <span class="tag">&lt;/ul&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PoniesComponent {
  <span class="key">ponies</span>: Array&lt;any&gt; = [{ <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span> }, { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Pinkie Pie</span><span class="delimiter">'</span></span> }];

  refreshPonies() {
    <span class="local-variable">this</span>.ponies = [{ <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Fluttershy</span><span class="delimiter">'</span></span> }, { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rarity</span><span class="delimiter">'</span></span> }];
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et voilà, on a mis en œuvre toute la syntaxe de templating, et on a un composant
parfaitement fonctionnel. Nos données sont pour le moment hardcodées, mais on
apprendra vite comment utiliser un service pour les charger&#160;!
Cela implique auparavant d&#8217;en apprendre un peu plus sur l&#8217;injection de dépendances,
pour que nous puissions utiliser le service HTTP&#160;!</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dependency-injection">9. Injection de dépendances</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_cuisine_et_dépendances">9.1. Cuisine et Dépendances</h3>
<div class="paragraph">
<p>L&#8217;injection de dépendances est un <em>design pattern</em> bien connu.
Prenons un composant de notre application.
Il peut avoir besoin de faire appel à des fonctionnalités qui sont définies dans d&#8217;autres parties de l&#8217;application (un service, par exemple).
C&#8217;est ce que l&#8217;on appelle une dépendance&#160;: le composant dépend du service.
Au lieu de laisser au composant la charge de créer une instance du service,
l&#8217;idée est que le framework crée l&#8217;instance du service lui-même, et la fournisse au composant qui en a besoin.
Cette façon de procéder se nomme l&#8217;inversion de contrôle.</p>
</div>
<div class="paragraph">
<p>Cela apporte plusieurs bénéfices&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>le développement est simplifié, on exprime juste ce que l&#8217;on veut, où on le veut.</p>
</li>
<li>
<p>le test est simplifié, en permettant de remplacer les dépendances par des versions bouchonnées.</p>
</li>
<li>
<p>la configuration est simplifiée, en permutant facilement différentes implémentations.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>C&#8217;est un concept largement utilisé côté serveur, mais AngularJS&#160;1.x était un des premiers à l&#8217;apporter côté client.</p>
</div>
</div>
<div class="sect2">
<h3 id="_développement_facile">9.2. Développement facile</h3>
<div class="paragraph">
<p>Pour faire de l&#8217;injection de dépendances, on a besoin&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>d&#8217;une façon d&#8217;enregistrer une dépendance, pour la rendre disponible à l&#8217;injection dans d&#8217;autres composants/services.</p>
</li>
<li>
<p>d&#8217;une façon de déclarer quelles dépendances sont requises dans chaque composant/service.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Le framework se chargera ensuite du reste.
Quand on déclarera une dépendance dans un composant, il regardera dans le registre s&#8217;il la trouve, récupérera l&#8217;instance existante ou en créera une, et réalisera enfin l&#8217;injection dans notre composant.</p>
</div>
<div class="paragraph">
<p>Une dépendance peut être aussi bien un service fourni par Angular, ou un des services que nous avons écrits.</p>
</div>
<div class="paragraph">
<p>Prenons un exemple avec un service <code>ApiService</code>, déjà écrit par l&#8217;un de nos collègues.
Comme c&#8217;est le feignant de l&#8217;équipe, il a seulement écrit une classe vide avec une méthode <code>get</code> qui renvoie un tableau vide,
mais tu peux déjà deviner qu&#8217;à terme ce service sera utilisé pour communiquer avec l&#8217;API exposée par le backend.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">export</span> <span class="reserved">class</span> ApiService {
  get(path) {
    <span class="comment">// todo: call the backend API</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec TypeScript, c&#8217;est ultra-simple de déclarer une dépendance dans un de nos composants ou services,
il suffit d&#8217;utiliser le système de type.</p>
</div>
<div class="paragraph">
<p>Disons que l&#8217;on veut écrire un <code>RaceService</code> qui utilise <code>ApiService</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { ApiService } from <span class="string"><span class="delimiter">'</span><span class="content">./api.service</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="reserved">class</span> RaceService {

  constructor(<span class="reserved">private</span> apiService: ApiService) {
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Angular récupérera le service <code>ApiService</code> pour nous,
et l&#8217;injectera dans notre constructeur. Quand le service <code>RaceService</code> est utilisé,
le constructeur sera appelé, et le champ <code>apiService</code> référencera le service <code>ApiService</code>.</p>
</div>
<div class="paragraph">
<p>Maintenant, on peut ajouter une méthode <code>list()</code> à notre service, qui appellera notre serveur via le service <code>ApiService</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { ApiService } from <span class="string"><span class="delimiter">'</span><span class="content">./api.service</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="reserved">class</span> RaceService {

  constructor(<span class="reserved">private</span> apiService: ApiService) {
  }

  list() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.apiService.get(<span class="string"><span class="delimiter">'</span><span class="content">/races</span><span class="delimiter">'</span></span>);
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour indiquer à Angular&#160;2 que ce service a lui-même des dépendances, on doit lui ajouter un décorateur <code>@Injectable()</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Injectable } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { ApiService } from <span class="string"><span class="delimiter">'</span><span class="content">./api.service</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Injectable()
<span class="reserved">export</span> <span class="reserved">class</span> RaceService {

  constructor(<span class="reserved">private</span> apiService: ApiService) {
  }

  list() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.apiService.get(<span class="string"><span class="delimiter">'</span><span class="content">/races</span><span class="delimiter">'</span></span>);
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme nous utilisons <code>ApiService</code>,
nous avons besoin de "l&#8217;enregistrer",
pour le rendre disponible à l&#8217;injection.</p>
</div>
<div class="paragraph">
<p>Une façon simple est d&#8217;utiliser l&#8217;attribut <code>providers</code> du décorateur <code>@NgModule</code> vu précédemment.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { NgModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { BrowserModule }  from <span class="string"><span class="delimiter">'</span><span class="content">@angular/platform-browser</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { PonyRacerAppComponent } from <span class="string"><span class="delimiter">'</span><span class="content">./app.component</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { ApiService } from <span class="string"><span class="delimiter">'</span><span class="content">./services/api.service</span><span class="delimiter">'</span></span>;

<span class="error">@</span>NgModule({
  <span class="key">imports</span>: [BrowserModule],
  <span class="key">declarations</span>: [PonyRacerAppComponent],
  <span class="key">providers</span>: [
    ApiService
  ],
  <span class="key">bootstrap</span>: [PonyRacerAppComponent]
})
<span class="reserved">export</span> <span class="reserved">class</span> AppModule {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, si on veut rendre notre <code>RaceService</code> disponible à l&#8217;injection dans d&#8217;autres services et composants, il nous faut aussi l&#8217;enregistrer&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { NgModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { BrowserModule }  from <span class="string"><span class="delimiter">'</span><span class="content">@angular/platform-browser</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { PonyRacerAppComponent } from <span class="string"><span class="delimiter">'</span><span class="content">./app.component</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { RaceService } from <span class="string"><span class="delimiter">'</span><span class="content">./services/race.service</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { ApiService } from <span class="string"><span class="delimiter">'</span><span class="content">./services/api.service</span><span class="delimiter">'</span></span>;

<span class="error">@</span>NgModule({
  <span class="key">imports</span>: [BrowserModule],
  <span class="key">declarations</span>: [PonyRacerAppComponent],
  <span class="key">providers</span>: [
    RaceService,
    ApiService
  ],
  <span class="key">bootstrap</span>: [PonyRacerAppComponent]
})
<span class="reserved">export</span> <span class="reserved">class</span> AppModule {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et c&#8217;est fini&#160;!</p>
</div>
<div class="paragraph">
<p>On peut désormais utiliser notre nouveau service où on le souhaite.
Testons-le dans notre composant <code>PonyRacerAppComponent</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { RaceService } from <span class="string"><span class="delimiter">'</span><span class="content">./services/race.service</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ponyracer-app</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;h1&gt;</span>PonyRacer<span class="tag">&lt;/h1&gt;</span>
    <span class="tag">&lt;p&gt;</span>{{list()}}<span class="tag">&lt;/p&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PonyRacerAppComponent {

  <span class="comment">// add a constructor with RaceService</span>
  constructor(<span class="reserved">private</span> raceService: RaceService) {
  }

  list() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.raceService.list();
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme notre collègue a simplement renvoyé un tableau vide dans la méthode <code>get</code> de <code>ApiService</code>
tu ne vas rien recevoir si tu appelles la méthode <code>list()</code>.</p>
</div>
<div class="paragraph">
<p>Mais on peut peut-être y faire quelque chose&#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_facile">9.3. Configuration facile</h3>
<div class="paragraph">
<p>Je reviendrai sur les bénéfices de testabilité apportés par l&#8217;injection de dépendances dans un chapitre ultérieur,
on va se concentrer sur les questions de configuration pour le moment.
Ici, on appelait un serveur qui n&#8217;existe pas.
Soit l&#8217;équipe backend n&#8217;est pas prête, soit tu veux le faire plus tard.
Dans tous les cas, on voudrait bouchonner tout ça.</p>
</div>
<div class="paragraph">
<p>L&#8217;injection de dépendances permet de le faire facilement.
Retournons à l&#8217;enregistrement de nos dépendances&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { NgModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { BrowserModule }  from <span class="string"><span class="delimiter">'</span><span class="content">@angular/platform-browser</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { PonyRacerAppComponent } from <span class="string"><span class="delimiter">'</span><span class="content">./app.component</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { RaceService } from <span class="string"><span class="delimiter">'</span><span class="content">./services/race.service</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { ApiService } from <span class="string"><span class="delimiter">'</span><span class="content">./services/api.service</span><span class="delimiter">'</span></span>;

<span class="error">@</span>NgModule({
  <span class="key">imports</span>: [BrowserModule],
  <span class="key">declarations</span>: [PonyRacerAppComponent],
  <span class="key">providers</span>: [
    RaceService,
    ApiService
  ],
  <span class="key">bootstrap</span>: [PonyRacerAppComponent]
})
<span class="reserved">export</span> <span class="reserved">class</span> AppModule {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut représenter les relations entre composants et services comme ceci, si une flèche signifie "dépend de"&#160;:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADuCAIAAAAMSK0pAAAUwElEQVR42u2df2SVbfzHI6lUMmYySVIqyWTMzEwyVh4zWZFMksQklZ6MyZb+SMqaSRKTzLQZSfKsVSRzJDNaHTNrxpajzWyzdbQcre/zfdvHc33v7/m107Zz2tbr9UfOfd2/rvu6r9f1+Vz3fdpZ8S8A/FZW0AQASAiAhDP8DwCkECQEQEIAJERCACQEQEIkBEBCACREQgAkBEBCJARAQgAkBAAkBEBCAEBCACQEACQEQEIAQEIAJAQAJARAQgBAQgAkBAAkBEBCAEBCACQEACQEQEIAQEIAJASApSnhCoDlxZKUkN9kheXz87orVkxMTASDwampqVAoND09jYQAqZZwcHBwaGhobGxMKspDJARItYR+v7+vry8QCMhDxUMkBEi1hD6fr6urSx4qHioYIiFAqiVsbW2Vh4qHyks1P0RCgFRL2NTU1NbW1tHRoWCojBQJAZAwaRKGvZxZuXLlli1brl69moJWDmPVqlWFhYUjIyOpv+Xl5eVWh4cPHy74we/fv5+dnb12hpycnLt37/4JFj2ZAQnnKINRUVGRYgmNU6dOpbi7/Pz5Mz093c7+119/JUlvL4cOHfoTQtl8srM/UUK3GAqFrl27ppKMjIwU36RHjx6pZN26dSnuLs+fP/cmApOTkwt15NevX9tha2pqfsxw584dK9EHJETCeI1lyaFb9Pv9ChGWUGkU12LY7oFA4NixY/JHexUVFX358kWrDh8+HDbq7927VyWWj8U67+rVq93irVu3tm3bJjE2bNhw8uRJb6b67t27/Px8bayTatXw8LCVq6NXVVVlZmZq1b59+1paWsKq2tPTo5zw+PHjrvzEiRMqLy0tVeX14cGDB94qZc7Q2dmpo2mDrKysV69eJbhWbaIDXrlyxXtAO50aJ8G21VUrS9fBdYre3l5VT/MFLSrFVe9MpBpzvoOJtGfkjhrHvWH/n3/+QcJfk1CNfv36dZXs2LHDSvr7+zdu3OhtVi26228lukneDUpKSlxk073RMbU4Pj5ua+0Gx4qE+/fvt0X1tlhZXHd3tzqTd9XOnTt17535Xmpra71VldX6V/3GXa86kEoaGxsjR42oF6grUgUSWbt582bTPiz7VVWtTRJp29zcXLd206ZN3o01DCVSjTnfwUTaM3JHJFywuZmikG2gOGNdc3R0VCJpQNWiCr27nzlzRlmcupeZY9FM/cxii92G5ubmyH4TxtatW9VjbIPi4mKVyEzrRt7gbMFEJ9UZNRJbP5BFb9680Yfdu3erUJspGiiKai9btFOcPXvWBHDPDywL1aVZ5e1zWPtojLfL1wctqgKJrLXLj9P4ibStUlldpiK/LdbV1blF1yDxqzHnO5hIe0bdkXR0vk9H1acVDN0GaWlpKndumA8q9O6uexA1tFo+dv78eX0+depU5DgaKaEyLhejNKZ++PBBnugI3sPauP7582dbbG9vb2hoUL90m4VhSZR9/vbtm/fyrYYFBQX6rMTPtqmvrw+7HBc39EGL6enpiaydVcJfatuwbu1djF+NOd/BRNoz1q1HwoWcQEf2pMgxONYBHz9+rM979uzRZ+W3NoWIlQZrnmaRyko07lqI0+CqHDWRG2wRMhILp5F7SXK7Ohf2LffzZqRRLzD+5bu1lo46N4yBgQGlBq9fv/7Vtp1VwljHmfMd/NX2RMJkSRg2jqoP2aQiEQmllhTSoprSm4tG3VHRTCXukYmiohZfvHhh8yjv9hs2bHBzS/H27Vvlup2dnRUVFSovKytL8ErtjJF4M1IrcZdvQSbs8mOttTBbVVXlPWlpaakKlWz/atvOKmGsasz5Dv5qeyJhsiR0Mwr1S00qbL4RNqOIc0CLbwcOHLDpzaxKuEcmNn77/X4ZqH7s3f7o0aPWORTKlJRawNTw7PP5LA17//69Nnv27Jk9D/TOYbxntNlRVO7fvx823fJefuScMOpae0WhC9HRdBUakjSjs13u3bv3q207q4SxqjHnO/ir7RlZpe/fvyPhAkioEdQij0MjqxtWZ5Xw6dOnbkc3i4u6oz252bdvn00zNE/zntE+BINBrVKfMEUdbq/Ip3lufht2xsnJSUU8e9ThrUZeXp6NGt69MjIy3AHVC8OejsZaK06fPh3nZf0vte2sEsaqxnzuYOLtGVbiHuTydHRhXqoqHGn4XD1DSUmJt5PNKqGGf3udoOlW/PP29vZaoUZry6mys7PliSaEOuOlS5fUod0d1SCt5FYqqnuVl5e77FGxUUmUeoBW5eTk2Owl6hnr6+stTIW9nVfUsozUqmF7qSvYKzj9297eHnbMWGsNBT1bq3ZQI4R9bS3xtp1VwjjVmPMdTLw9w0oaGxt1a3Q63Skk/P3YLMg9/FhO3/yY58xnkXw9ZXE2OxIuDEoRBwYGbM6mD0iIhEiYatwzbu9zUSREQiRMHZrFaSJUUFDgXsEvOWweNbe1i6SSSMicEAAJAZAQCQGQEAAJ+S0KgF9h6UkoJiYmBgcH/X6/z+drbW1tgiRgnQNSwNL7u6MiGAwODQ1p2Ojq6lLt2yAJSEIaITUsvb/ALaamphS1A4GA6q3xowOSgH1FE1LA0vstChEKhTRgqMYaORTB+yAJ2H/ShRSw9H6VSUxPT6uuGjNUaeXQY5AEJCGNkBqW3u8TQmqY/y/IQmpAQiQEJAQkREIkREJAQkBCJERCJAQkBCREQiREQkBCQEIkREIkBCQEJERCQEJAQkBCJAQkBCQEJERCWFrk5+fH+ktE27dvp32QEJLO7du3Y0lYXV1N+yAhJJ2RkZE1a9ZElfDjx4+0DxJCKjh48GCkgbm5ubQMEkKKaGlpiZTw5s2btAwSQor4+vXr+vXrwyRUmkrLICGkjrKyMq+BhYWFtAkSQkp5+fKlV8KGhgbaBAkh1aSnp5uBSk3Hx8dpECSEVPP333+bhEeOHKE1kBB+A2/fvjUJW1tbaQ0khN/Drl27lJTO4cdJAAlhYaiurr5w4QLtgITw2/j06VN7ezvtgIQAgIQASAgASAiAhACAhABICABIGJcVsBRAwmUu4b+wuNE9mpiYCAaDU1NToVBoenoaCZEQUi3h4ODg0NDQ2NiYVJSHSIiEkGoJ/X5/X19fIBCQh8vm6+lIiIRLSUKfz9fV1SUPFQ8VDJEQCSHVEra2tspDxUPlpZofIiESQqolbGpqamtr6+joUDBURoqESAhIiIS/VcKoL7JWrVq1Z8+eO3fupKZfDg8PV1RUZGVlrV27VqfOzMwsKyvr7OxMtgwGEiLhYpTQUVNTk+xO2dPTk5GREfXst27dQkIk/IMk9BbKPSvcunVrsjvlgQMH7FyVlZWhUOjnz5+vX7/etGmTFfr9ftJRJPwTJZQJLi+1EnWXkydPpqWlrVy5UkljXl5eXV2ddxflrjk5OZZP6kNjY6N37bNnz7TL6tWrtUFxcfH79+/dKm0fWQEdbfUMjx49SuQg7io+f/5cVFSkbS5evKhF1XZyctK26e3t9QbY9P+Y/yUgIRIuvIQ/fvywQk3PtNjf3y/9ItPFy5cv2/aHDh2KXFtbW2trHzx4ELZKXVnhzta6P/IrNyR/rHrGP4gr3LFjh31wfzHRaSzHnKiRFz6fS0BCJFx4CeWDFVZVVWnx3Llztnj37l0tdnd3u46oRYVEW1QIGh8fV0pZWlqqxXXr1klmBSJ90GJ5ebkWA4FAQUGBFjdv3mzKXb9+3ftASNnp2bNnW1patKWrz6wHcUfQqVUH22vLli0qOXbsmC2WlJTYT6xFXvg8LwEJkTApD2aUdFVUVNg2nZ2d/8ygLqhup8TM24PVre3zu3fvbHtN5A7PIF0ViCwt/P79u8vrbPtXr15ZSXNzc35+vrYJq8Px48eDwaA2mPUg3nTUXZoCtYmkOqvmlve6R00LewlIiIQLL6GinAKgG+l9Pp/mhFlZWWGqaJW2tM9Rw4KiR6xThE26FH/Up5U0quu7s+ikiRwkajzX2GGFyhufP38eZmkyLgEJkXBh0lEFDYUgK1Ra6J1N7dy5U+ElLBJGfbLikEWxerAmWur0oRl0Uu9e7e3t3ow3/kHivG+wKeLFGby5aNgu87kEJETCpMwJGxoarPDatWtadC8M7EmjUkTvXgqP9tm9Xlcud2yGnp6eGzduOJci0fzK9s3IyIj6eFZZsRbjHySOhFeuXLGnNbt37w577blQl4CESJhcCc+ePevN1jRlkh4q9O5lfVQUFBSMjIxo4lRcXKzFjRs3amN1YveMR+FOQU9ByR70DwwMaPfs7GyXeX758kUlo6OjZ86ccdNCe6Ef/yCxJPzw4YM3cHlnjAt4CUiIhAsvYXNzs/uJXHW7U6dOebuyvS20z4qK6qbuhbuX+vp6O1plZWWctb29vS7ShqHwNTw8nMhB4nz9Zc+ePbYqLy8v1oXP8xKQEAkXXkL3XltoeqbIoF6YmZkp9/bv39/d3X316tXTMzx58sQ6sTK9nJwcxQfNrxRPNG/0HvDhw4eKeFq1bt26kpISHdO7dnx8XHmvJmyKLfZlAClRW1urmJPgQeJIqKqGvfSLuss8LwEJkXDuEgJfW0NCJERCJERCQEIkREIkREIkBCREQiREQiREQkBCJFwACWHxg4TLnImJicHBQb/f7/P5Wltbm5Y41mWXGfzd0WVOMBgcGhrSENvV1aU73bbEkYRtyw7+AvcyZ2pqShlOIBDQPdZY27HEkYQdyw5+i2KZEwqFNLjq7mqUVbbTt8SRhH3LDn6VaZkzPT2t+6rxVTdY842xJY4kHFt28PuEsMSe99IISAhICEiIhICEgISAhEgISAhICEiIhICEgISAhEgISAhICEiIhICEgISAhEgISAhICEiIhICEsODk5+fH+vtI27dvp32QEJLO7du3Y0lYXV1N+yAhJJ2RkZE1a9ZElfDjx4+0DxJCKjh48GCkgbm5ubQMEkKKaGlpiZTw5s2btAwSQor4+vXr+vXrwyRUmkrLICGkjrKyMq+BhYWFtAkSQkp5+fKlV8KGhgbaBAkh1aSnp5uBSk3Hx8dpECSEVPP333+bhEeOHKE1kBB+A2/fvjUJW1tbaQ0khN/Drl27lJQum59MQUJYelRXV1+4cIF2QEL4bXz69Km9vZ12QEIAQEIAJAQAJARAQgBAQgAkBAAkjMsKWAog4TKX8F9Y3OgeTUxMBIPBqampUCg0PT2NhEgIqZZwcHBwaGhobGxMKspDJERCSLWEfr+/r68vEAjIw2Xz9XQkRMKlJKHP5+vq6pKHiocKhkiIhJBqCVtbW+Wh4qHyUs0PkRAJIdUSNjU1tbW1dXR0KBgqI0VCJEyIAwcO2OP1Q4cOzbnzGa5kdHS0srIyKytr7dq1q1atyszMLCsr6+zsTJkMYfVBQiRcvBJ++fLFddmVK1dKnvl3+v7+/oyMjKiv0WpqapAQCZHw/1FbW+uV5P79+/M/5uHDh+1o586dCwaDP3/+fPbsWVpamhX29vaSjiIhEv4f2dnZXgmVms7hIH/9hy2uXr3ajib93DbXrl2zwsbGxmTLEFYfJETCxSuhOopzb9u2bZaRKkH1bpP5H5rR7du3TxO8nTt33rp1yytYWPrnJHz//r3bZmRkpH2G4eFhV/ju3TtNRG3eqIMrLEfNKgOBQGlpqQ7r8/kuX75shdrXbbl//36VaINQKBQ1Hb13715+fr6dSPXXiGBbJlINJETCJEp49epV66wPHjyoqqqyz3V1dVFNkIfemFlUVBRLwuLiYltUnz527Fh9ff2HDx8iz/706dPISaP2jTystLEPcliHss8VFRW22eTkpMYOlZSVlcWvj5eCgoIEq4GESJhECa1zS5Xv37+7qJiXlxdVwtzc3JEZ9MFKFF6idnoFrt27d4d1a8WZo0ePutioQGR/h1sy65g/fvy4cuWKbSlpww6rxNLip4XfvXv3qnDHjh22WXNzs232/PnzyPrcuXPHPita6kQ6guy1ksePHydSDSREwmRJqPTSetvx48etJCcnx0oGBgYiJVQqaCXuT/e6YBKZ/qmvK8KcPHnShHFI+FevXmkD9xtp3qxyy5Yt3nmp26u/v99b8xs3blh5d3e3FhVs9TktLc1lyN76uCHDnUibKbk9fPiwBpFEqoGESJgsCS9duhQWQJSIWommfJESui6uDy64JfJKQGFWfd3ZqEmX9+yRbNy4Mf5hP3/+bOWa2qkyGzZssCexUdPjqE+JIhshTjWQEAmTJWHYHM+LeTI3CUdHR/+ZQR0x6gtJBUMtnj59OtbZpc2sbtsXDFTPN2/e2DaKz1El1OniDBCJVAMJkTApErq+Gwv1obAO7Xq58tKw2aO302tm5RT1PoFUPPRGGDdV8z4sTfyduyZstkrzTP27devWWDtmZWXZZzcoaOKnDNyeGCVSDSREwqRI6CJAT0+Pt/zJkycu0wvr0FJOgqmzuleL7s1+mC32wkBo6qXU0cKg+r0VlpeXq0TTTnukeeLEifHxcZW8ePEiIyND8cc2iC/ht2/fXIgTlZWVsSRUau0eLAUCAYXx8+fPuzw8kWogIRIuvITqiApH3geMDkUJ69yawoV16LBvonm/aBpmi3r25s2bYyW67ptxLgp5keFug/hTTRnuNrAnNFHro4stLCyMPFFJSUmC1UBCJFx4Cd2bsYsXL0audW/VrGe7fqmOZS/rt23bdv369Tgv6+3dnWKpgo+SUoUa/VtUVKTu7k1QhWKRwqa9Jc/JydFhvRvEl9BdhRsvYu2oqtbV1VlldCJtX1NT461//GogIRIm8T3hYv4yNN8dRUIkREIkREIkREIkREJ72W3gGBIiIbEICZEQCQEJkRCQEAl/p4Sw+EHCZc7ExMTg4KDf7/f5fK2trU2w+ODvji5zgsHg0NCQhtiuri7d6TZYfPAXuJc5U1NTynACgYDuscbaDlh88FsUy5xQKKTBVXdXo6yynT5YfPCrTMuc6elp3VeNr7rBmm+MweKD3ycEACQEQEIAQEIAJAQAJARAQgBAQgAkBAAkBEBCAEBCACQEACQEQEIAQEIAJAQAJARAQgBAQgAkBAAkBEBCAEBCACQEACQEWIoSAsDv+RVUmgAACQH+aP4XqQZaNRT9DK4AAAAASUVORK5CYII=" alt="diag dfa2e6d63b680092c25655cd9aa1d23e" width="300" height="238">
</div>
</div>
<div class="paragraph">
<p>En fait, ce que l&#8217;on a écrit est la version courte de&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { NgModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { BrowserModule }  from <span class="string"><span class="delimiter">'</span><span class="content">@angular/platform-browser</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { PonyRacerAppComponent } from <span class="string"><span class="delimiter">'</span><span class="content">./app.component</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { RaceService } from <span class="string"><span class="delimiter">'</span><span class="content">./services/race.service</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { ApiService } from <span class="string"><span class="delimiter">'</span><span class="content">./services/api.service</span><span class="delimiter">'</span></span>;

<span class="error">@</span>NgModule({
  <span class="key">imports</span>: [BrowserModule],
  <span class="key">declarations</span>: [PonyRacerAppComponent],
  <span class="key">bootstrap</span>: [PonyRacerAppComponent],
  <span class="key">providers</span>: [
    { <span class="key">provide</span>: RaceService, <span class="key">useClass</span>: RaceService },
    { <span class="key">provide</span>: ApiService, <span class="key">useClass</span>: ApiService }
  ]
})
<span class="reserved">export</span> <span class="reserved">class</span> AppModule {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On explique à l&#8217;injecteur qu&#8217;on veut un binding entre un token (le type <code>RaceService</code>)
et la classe <code>RaceService</code>.
L&#8217;injecteur (<code>Injector</code>) est un service qui maintient un registre des composants injectables,
et qui les injecte quand ils sont réclamés.
Le registre est un dictionnaire associant des clés, appelés tokens, à des classes.
Les tokens ne sont pas, contrairement à de nombreux frameworks d&#8217;injection de dépendances, limités à des seules chaînes de caractères.
Ils peuvent être de n&#8217;importe quel type, comme par exemple une référence à une classe.
Et ce sera en général le cas.</p>
</div>
<div class="paragraph">
<p>Comme dans notre exemple, si le token et la classe de l&#8217;objet à injecter sont les mêmes,
tu peux écrire la même chose en version raccourcie&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { NgModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { BrowserModule }  from <span class="string"><span class="delimiter">'</span><span class="content">@angular/platform-browser</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { PonyRacerAppComponent } from <span class="string"><span class="delimiter">'</span><span class="content">./app.component</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { RaceService } from <span class="string"><span class="delimiter">'</span><span class="content">./services/race.service</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { ApiService } from <span class="string"><span class="delimiter">'</span><span class="content">./services/api.service</span><span class="delimiter">'</span></span>;

<span class="error">@</span>NgModule({
  <span class="key">imports</span>: [BrowserModule],
  <span class="key">declarations</span>: [PonyRacerAppComponent],
  <span class="key">providers</span>: [
    RaceService,
    ApiService
  ],
  <span class="key">bootstrap</span>: [PonyRacerAppComponent]
})
<span class="reserved">export</span> <span class="reserved">class</span> AppModule {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le token doit identifier de manière unique la dépendance.</p>
</div>
<div class="paragraph">
<p>L&#8217;injecteur est retourné par la promesse <code>bootstrapModule</code>, alors on peut jouer un peu avec&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">  <span class="comment">// in our module</span>
  providers: [
    ApiService,
    { <span class="key">provide</span>: RaceService, <span class="key">useClass</span>: RaceService },
    <span class="comment">// let's add another provider to the same class</span>
    <span class="comment">// with another token</span>
    { <span class="key">provide</span>: <span class="string"><span class="delimiter">'</span><span class="content">RaceServiceToken</span><span class="delimiter">'</span></span>, <span class="key">useClass</span>: RaceService }
  ]

<span class="comment">// let's bootstrap the module</span>
platformBrowserDynamic().bootstrapModule(AppModule)
  .then(
    <span class="comment">// and play with the returned injector</span>
    appRef =&gt; playWithInjector(appRef.injector)
  );</code></pre>
</div>
</div>
<div class="paragraph">
<p>La partie intéressante est la fonction <code>playWithInjector</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">playWithInjector</span>(inj) {
  console.log(inj.get(RaceService));
  <span class="comment">// logs &quot;RaceService {apiService: ApiService}&quot;</span>
  console.log(inj.get(<span class="string"><span class="delimiter">'</span><span class="content">RaceServiceToken</span><span class="delimiter">'</span></span>));
  <span class="comment">// logs &quot;RaceService {apiService: ApiService}&quot; again</span>
  console.log(inj.get(RaceService) === inj.get(RaceService));
  <span class="comment">// logs &quot;true&quot;, as the same instance is returned every time for a token</span>
  console.log(inj.get(RaceService) === inj.get(<span class="string"><span class="delimiter">'</span><span class="content">RaceServiceToken</span><span class="delimiter">'</span></span>));
  <span class="comment">// logs &quot;false&quot;, as the providers are different,</span>
  <span class="comment">// so there are two distinct instances</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On demande ici une dépendance à l&#8217;injecteur via la méthode <code>get</code> et un token.
Comme j&#8217;ai déclaré le <code>RaceService</code> deux fois, avec deux tokens différents, on a deux providers.
L&#8217;injecteur va créer une instance de <code>RaceService</code> à la première demande d&#8217;un token donné, et retournera la même instance lors de chaque demande ultérieure.
Il fera de même pour chaque provider, alors nous aurons en fait dans ce cas deux instances de <code>RaceService</code> dans notre application, une pour chaque token.</p>
</div>
<div class="paragraph">
<p>Cependant, tu ne manipuleras pas souvent le token, voire pas du tout.
En TypeScript, tu compteras sur les types pour faire le boulot, où le token sera une référence de type, en général associé à la classe correspondante.
Si tu veux spécifiquement définir un autre token, tu devras utiliser le décorateur <code>@Inject()</code>&#160;: on y reviendra à la fin de ce chapitre.</p>
</div>
<div class="paragraph">
<p>Cet exemple ne servait qu&#8217;à pointer du doigt quelques détails&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>un provider associe un token à un service.</p>
</li>
<li>
<p>l&#8217;injecteur retourne la même instance chaque fois que le même token est demandé.</p>
</li>
<li>
<p>on peut définir un token différent de la classe de l&#8217;objet à injecter.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Le fait de créer une instance lors du premier appel, et de retourner ensuite toujours la même, est un <em>design pattern</em> bien connu&#160;: un <em>singleton</em>.
C&#8217;est très utile, parce que tu peux y stocker des informations, et les partager entre composants via un service, parce qu&#8217;ils utiliseront la même instance de ce service.</p>
</div>
<div class="paragraph">
<p>Maintenant, retournons à notre problème de <code>RaceService</code> bouchonné.
Je peux écrire une nouvelle classe, faisant le même boulot que <code>RaceService</code>, mais qui retourne des données codées en dur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> FakeRaceService {
  list() {
    <span class="keyword">return</span> [{ <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">London</span><span class="delimiter">'</span></span> }];
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut manipuler la déclaration du provider pour remplacer <code>RaceService</code> par notre <code>FakeRaceService</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// in our module</span>
providers: [
  <span class="comment">// we provide a fake service</span>
  { <span class="key">provide</span>: RaceService, <span class="key">useClass</span>: FakeRaceService }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu redémarres ton application, tu constateras que nous avons bien cette fois-ci une course disponible,
car notre application utilise le service bouchonné au lieu du premier&#160;!</p>
</div>
<div class="paragraph">
<p>Maintenant nos relations de dépendances sont devenues&#160;:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag cfc71e03b4d012de1d6eb4fedb51201a" width="460" height="238">
</div>
</div>
<div class="paragraph">
<p>Cela peut être très utile quand tu testes manuellement ton application, et aussi, comme nous le verrons prochainement, quand tu écris des tests automatisés.</p>
</div>
</div>
<div class="sect2">
<h3 id="_autres_types_de_provider">9.4. Autres types de provider</h3>
<div class="paragraph">
<p>Toujours dans le cadre de cet exemple, nous aurions probablement envie d&#8217;utiliser <code>FakeRaceService</code> pendant le développement, et <code>RaceService</code> en production. Tu peux évidemment changer le provider manuellement, mais tu peux aussi utiliser un autre type de provider&#160;: <code>useFactory</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// we just have to change this constant when going to prod</span>
const IS_PROD = <span class="predefined-constant">false</span>;

  <span class="comment">// in our module</span>
  providers: [
    <span class="comment">// we provide a factory</span>
    {
      <span class="key">provide</span>: RaceService,
      <span class="key">useFactory</span>: () =&gt; IS_PROD ? <span class="keyword">new</span> RaceService(<span class="predefined-constant">null</span>) : <span class="keyword">new</span> FakeRaceService()
    }
  ]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici, on utilise <code>useFactory</code> au lieu de <code>useClass</code>.
Une <em>factory</em> est une fonction avec un seul job, créer une instance.
Notre exemple teste une constante, et retourne le service bouchonné ou le véritable en fonction.</p>
</div>
<div class="paragraph">
<p>Mais attends, si nous basculons sur l&#8217;utilisation du véritable service,
comme nous utilisons un simple <code>new</code> pour créer l&#8217;instance de <code>RaceService</code>,
il n&#8217;aura pas sa dépendance <code>ApiService</code> instanciée&#160;!
Et oui, si on veut que cet exemple fonctionne, on doit passer au constructeur une instance de <code>ApiService</code>.
Bonne nouvelle: <code>useFactory</code> prend un paramètre supplémentaire, un tableau, où tu peux spécifier ses dépendances&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// we just have to change this constant when going to prod</span>
const IS_PROD = <span class="predefined-constant">true</span>;

  <span class="comment">// in our module</span>
  providers: [
    ApiService,
    <span class="comment">// we provide a factory</span>
    {
      <span class="key">provide</span>: RaceService,
      <span class="comment">// the apiService instance will be injected in the factory</span>
      <span class="comment">// so we can pass it to RaceService</span>
      <span class="key">useFactory</span>: apiService =&gt; IS_PROD ? <span class="keyword">new</span> RaceService(apiService) : <span class="keyword">new</span> FakeRaceService(),
      <span class="key">deps</span>: [ApiService]
    }
  ]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hourra&#160;!</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Sois prudent&#160;: l&#8217;ordre des paramètres doit correspondre à l&#8217;ordre dans le tableau, si tu as plusieurs dépendances&#160;!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Mais bon, cet exemple permettait juste de démontrer l&#8217;utilisation de <code>useFactory</code>. En vrai, tu peux, tu DOIS même, écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// in our module</span>
providers: [
  ApiService,
  { <span class="key">provide</span>: RaceService, <span class="key">useClass</span>: IS_PROD ? RaceService : FakeRaceService }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Déclarer une constante <code>IS_PROD</code> est un peu pénible&#160;: et si nous utilisions aussi ici l&#8217;injection de dépendances&#160;?! Oui, je pousse le bouchon un peu loin&#160;! :)
Tu n&#8217;as certes pas besoin de tout faire rentrer dans le moule de l&#8217;injection, mais cela permet de te montrer un autre type de provider&#160;: <code>useValue</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// in our module</span>
providers: [
  ApiService,
  <span class="comment">// we provide a factory</span>
  { <span class="key">provide</span>: <span class="string"><span class="delimiter">'</span><span class="content">IS_PROD</span><span class="delimiter">'</span></span>, <span class="key">useValue</span>: <span class="predefined-constant">true</span> },
  {
    <span class="key">provide</span>: RaceService,
    <span class="key">useFactory</span>: (IS_PROD, apiService) =&gt; IS_PROD ? <span class="keyword">new</span> RaceService(apiService) : <span class="keyword">new</span> FakeRaceService(),
    <span class="key">deps</span>: [<span class="string"><span class="delimiter">'</span><span class="content">IS_PROD</span><span class="delimiter">'</span></span>, ApiService]
  }
]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_injecteurs_hiérarchiques">9.5. Injecteurs hiérarchiques</h3>
<div class="paragraph">
<p>Un dernier point crucial à comprendre en Angular&#160;2&#160;: il y a plusieurs injecteurs dans ton application.
En fait, il y a un injecteur par composant, et chaque injecteur hérite de l&#8217;injecteur de son parent.</p>
</div>
<div class="paragraph">
<p>Disons qu&#8217;on a une application qui ressemble à&#160;:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADuCAIAAAAMSK0pAAAUMklEQVR42u2db0hUWR/HAwlbSiIQCYmIaLGIEBFEQiRCqIiQsEBCIiQCiaWgFt+ELvuiF0VFRIQgESIZwhJLNFmCiAwSImQNESaBxqAhKdqwxrD27PN9/MF57t5xxhnTUZvP54Xce879e+75nN/v3Jmadf8AwIqyjiYAQEIAJJzjPwCQRpAQAAkBkBAJAZAQAAmREAAJAZAQCQGQEAAJkRAACQGQEACQEAAJAQAJAZAQAJAQAAkBAAkBkBAAkBAACQEACQGQEACQEAAJAQAJAZAQAJAQAAkBAAkBkBAAkDAV1kFmg4SrQkJ+CzZzfwR33bqpqalIJDIzMxONRmdnZ5EQCSHdEo6MjIyNjU1MTEhFeYiESAjpljAUCg0NDYXDYXmoeIiESAjpljAYDA4MDMhDxUMFQyREQki3hIFAQB4qHiov1fwQCZEQ0i1hW1tbR0dHX1+fgqEyUiREQkBCJEwXdXV19jnVgwcPlrZXGY8ePXKFTU1Nrvx7Dru0WyIhEq6khN++fcvNzbX+evTo0eWQ8PTp066wuroaCZEQCf/Fs2fPnBVZWVnT09NLLuHOnTtdYX5+PhIiIRL+C4Upnbeqqmr9+vVauH//vrc2f47+/v6ioiJtUFhY2NnZmWStObB9+3b9HR0dVcnw8LAr8d5sKBRSEP5pjiNHjmjVew29vb12/H379nV3d3v3jdUsXu3ff//d0NCgq83OztbR2tvbkRAJV4WE6pobN27UeVtbW48fP64FORDbp73hSzK8ffs2+dqamhr9tU7/8OFDV+Ju9sOHD5s3b/Z+hVKr6oVWOzg4mJOT46rccqoS2t15uXXrFhIi4cpL+PjxY8tCJycnFQPdsq9PHzp06PPnzyrXgneOl0ytiVdbW6uSM2fOaLmlpcWrhxVKfjuIQqJWVWi12jH2FKlKaPFzz5494XBYqwrXuk2NF7aKhEi4khLaa5Ly8nItj4+PW69tbm729WkXl7Sg1dzc3ORrP378qL8FBQUqkQZaVujzqrJlyxYrdIFRqyq01by8vNhTpCrhhQsX5v1XC6sqKUXCTJQwGo3aPPD69etWUlpa6stI5+3l2iulWpsEKrHU323btvl2tGtI6RSpSmjz3lgUpZEQCVdSQpcW+vBmpFbiwpQFIs3Zkq/Vgk0CT506ZX99qvgiob28cQexj098talKWF9fb3NR3o4i4eqS0GZf89LU1OSb9UlLzcrizQkT1GqhtbXVgpt7+zrvnNB7EDcntCDmO4XbNzs7230ZYHp6+tKlS/NKGAwGLU9+9eqVVp88eWJvYpkTIuFKSqguq4inM96+fdtbvn//fhUePHjQ249tYmao7/refyau1YJNCw0lpT4JFeW87z9tQuhCn45m9hr2LtftW1lZ6d1x69atyb8dvXr1KpEQCVdSwubmZotOvk/n7Wtl8lNhx/VjdQv7pE5/e3p6fLlf4lpbtmmh752N93NChbjsOeSV09jo7OwsLCy0zyG7u7tPz2FVo6Oj2lFXK/mrq6tlu7fWexZNgJWUylIdp6SkZFXNBpEw0z+s/54vnaytr6TwjRkkREJAQiREQiREwjUnoc3TFlcLSIiEgIRIiISAhEgISIiESAhIuKYkhEwGCVcFU1NTIyMjoVAoGAwGAoG2HxrrduDg/x1dFUQikbGxMQ2EAwMDeh4dPzSSsAM88D9wrwpmZmaUh4TDYT0JjYh9PzT2vVNw8FsUq4JoNKohUM9AY6FykqEfGvsn8+DgV5lWBbOzs2p9jYJ6DJoVTPzQSMIJ8MDvE8IKvA2mEdYESIiEgISAhEiIhEgISAhIiIRIiISAhICESIiESAhICEiIhEiIhICEgIRICEgISAhIiISAhICEgIRICGuLsrKyeP/H0a5du2gfJIRl5+bNm/EkbGxspH2QEJad8fHxDRs2zCvhmzdvaB8khHRw+PDhWANLS0tpGSSENNHe3h4r4bVr12gZJIQ08eXLl02bNvkkVJpKyyAhpI+amhqvgRUVFbQJEkJaefHihVfClpYW2gQJId3k5uaagUpNJycnaRAkhHRz+fJlk/DEiRO0BhLCCtDb22sSBgIBWgMJYWXYvXu3ktJV9bMngISZRWNj48WLF2kHJIQV4/379z09PbQDEgIAEgIgIQAgIQASAgASAiAhAKwaCdcB/FisSQn/AfhRUH+empqKRCIzMzPRaHR2dhYJAdIt4cjIyNjY2MTEhFSUh0gIkG4JQ6HQ0NBQOByWh4v40jwSAnyvhMFgcGBgQB4qHioYIiFAuiUMBALyUPFQeanmh0gIkG4J29raOjo6+vr6FAyVkSIhABIum4S+D2eysrK2b9/+22+/paGVfaxfv76iomJ8fDz9j7yurs6u4cGDB0t+8KampuLi4p/mKCkpuXv3biZY9HgOJFykDEZ9fX2aJTRqa2vT3F2+ffvm/ie1o0ePLpPeXo4cOZIJoex7srNMlNCtRqPR33//XSV5eXlpfkgPHz5UycaNG9PcXZ49e+ZNBKanp5fqyF1dXXbYGzdu/D3HnTt3rEQLSIiEiRrLkkO3GgqFFCIsodIorlXf7uFwuLq6Wv5or0OHDo2Ojqrq+PHjvlF/3759KrF8LN55s7Oz3er169d37twpMXJycs6cOePNVF++fFlWVqaNdVJVffr0ycrV0RsaGvLz81VVVFTU3t7uu9R3794pJzx16pQrP336tMqrqqp08Vq4f/++95Ly5+jv79fRtEFhYWFnZ2eStWoTHfDKlSveA9rp1DhJtq3uWlm6Dq5TDA4O6vI0X9CqUlz1zmQuY9FPMJn2jN1R47g37D99+hQJU5NQjX716lWV/Pzzz1by4cOHzZs3e5tVq+7xW4kekneDyspKF9n0bHRMrU5OTlqtPeB4kfDAgQO2qt4WL4t7+/atOpO3qqCgQM/eme/l1q1b3kuV1fqrfuPuVx1IJa2trbGjxrw3qDvSBSRTu23bNtPel/3qUq1Nkmnb0tJSV7t161bvxhqGkrmMRT/BZNozdkckXLK5maKQbaA4Y13z8+fPEkkDqlZV6N393LlzyuLUvcwci2bqZxZb7DE8evQott/42LFjh3qMbXDs2DGVyEzrRt7gbMFEJ9UZNRJbP5BF3d3dWtizZ48KtZmigaKo9rJVO8X58+dNAPf+wLJQ3ZpdvC372kdjvN2+FrSqC0im1m4/QeMn07ZKZXWbivy2evv2bbfqGiTxZSz6CSbTnvPuSDr6vW9H1acVDN0GW7ZsUblzw3xQoXd3PYN5Q6vlYxcuXNBybW1t7DgaK6EyLhejNKa+fv1anugI3sPauP7x40db7enpaWlpUb90m/mwJMqW//rrL+/t2xWWl5drWYmfbdPc3Oy7HRc3tKDV3NzcZGoXlDCltvV1a+9q4stY9BNMpj3jPXokXMoJdGxPih2D4x3wjz/+0PLevXu1rPzWphDx0mDN0yxSWYnGXQtxGlyVoybzgC1CxmLhNHYvSW5358K+5X7ejHTeG0x8+67W0lHnhjE8PKzUoKurK9W2XVDCeMdZ9BNMtT2RcLkk9I2j6kM2qUhGQqklhbSqpvTmovPuqGimEvfKRFFRq8+fP7d5lHf7nJwcN7cUvb29ynX7+/vr6+tVXlNTk+Sd2hlj8WakVuJu34KM7/bj1VqYbWho8J60qqpKhUq2U23bBSWMdxmLfoKpticSLpeEbkahfqlJhc03fDOKBAe0+Hbw4EGb3iyohHtlYuN3KBSSgerH3u1PnjxpnUOhTEmpBUwNz8Fg0NKwV69eabMnT57Y+0DvHMZ7RpsdzUtTU5NvuuW9/dg54by19hGFbkRH011oSNKMzna5d+9eqm27oITxLmPRTzDV9oy9pK9fvyLhEkioEdQij0MjqxtWF5Twzz//dDu6Wdy8O9qbm6KiIptmaJ7mPaMtRCIRValPmKIOt1fs2zw3v/WdcXp6WhHPXnV4L2P//v02anj3ysvLcwdUL/S9HY1XK86ePZvgw/qU2nZBCeNdxvc8weTb01fiXuTydnRpPlRVONLwmT1HZWWlt5MtKKGGf/s4QdOtxOcdHBy0Qo3WllMVFxfLE00IdcZLly6pQ7snqkFaya1UVPeqq6tz2aNio5Io9QBVlZSU2Oxl3jM2NzdbmPJ9Oq+oZRmpXYbtpa5gH8Hpb09Pj++Y8WoNBT2rVTuoEXxfW0u+bReUMMFlLPoJJt+evpLW1lY9Gp1OTwoJVx6bBbmXHz/SNz++c+azSr6esjqbHQmXBqWIw8PDNmfTAhIiIRKmG/eO2/teFAmREAnTh2ZxmgiVl5e7j+DXHDaPWlztKrlIJGROCICEAEiIhABICICE/BYFQCqsPQnF1NTUyMhIKBQKBoOBQKANlgHrHJAG1t7/OyoikcjY2JiGjYGBAV19BywDkpBGSA9r73/gFjMzM4ra4XBY163xow+WAfuKJqSBtfdbFCIajWrA0BVr5FAEH4JlwP6RLqSBtferTGJ2dlbXqjFDF60cegKWAUlII6SHtff7hJAevv8XZCE9ICESAhICEiIhEiIhICEgIRIiIRICEgISIiESIiEgISAhEiIhEgISAhIiISAhICEgIRICEgISAhIiIawtysrK4v1PRLt27aJ9kBCWnZs3b8aTsLGxkfZBQlh2xsfHN2zYMK+Eb968oX2QENLB4cOHYw0sLS2lZZAQ0kR7e3ushNeuXaNlkBDSxJcvXzZt2uSTUGkqLYOEkD5qamq8BlZUVNAmSAhp5cWLF14JW1paaBMkhHSTm5trBio1nZycpEGQENLN5cuXTcITJ07QGkgIK0Bvb69JGAgEaA0khJVh9+7dSkoX8eMkgISwNDQ2Nl68eJF2QEJYMd6/f9/T00M7ICEAICEAEgIAEgIgIQAgIQASAkDGS7gOMhskXBUS/gOZip7+1NRUJBKZmZmJRqOzs7NIiISQbglHRkbGxsYmJiakojxEQiSEdEsYCoWGhobC4bA8XFVfbUdCyBQJg8HgwMCAPFQ8VDBEQiSEdEsYCATkoeKh8lLND5EQCSHdEra1tXV0dPT19SkYKiNFQiQEJETCpB+ej/Xr11dUVIyPj69Uf2pqaiouLv5pjpKSkrt372aCRY/nQEIk/D+1tbUr0hfr6upiL+bIkSOZEMq+J5dBwjUvobfk4cOHKtm4cWP6O2JXV5ddz40bN/6e486dO1aiBSREwkyR0Aqzs7Pd6vXr13fu3JmVlZWTk3PmzBlvpvry5cuysjJtLGlV9enTJyuXPw0NDfn5+aoqKipqb293u3z9+vXXX3/dsmWL8t69e/fev3/fVVVXV+vUV65c8V7M6dOnVXj8+HFbDYVCR48etWRVEVKrvnvR5Smd1sF13sHBQR1/+/btWlWKq95pW+bP0d/fr21UVVhY2NnZ6T3pgmcJh8O6Wt21dj906NDo6OiCNx5vx2g06g37T58+RUIi4f8i4YEDB2xVnThecvj27Vv1UW9VQUGBupSq5Ixvr1u3btlev/zyi6/K9dRt27Zp9d27d97r+fbtm46pzq3lDx8+bN682buvVp1a7keaXO3WrVu9G2u88G4pVbwzYd2O1SZzFu++orKy0moT3Hi8HZEQCedhx44d6oi2wbFjx1QiM613Wn/1xqhz587JEw3w1r1aW1u7u7u1sGfPHhVqMwUZRVHtZasKEaq149+7d88b5bRN4rtQsLVR4PPnz5OTkwpWWlWh916Uyup6FKJt9fbt227VXblVKRDZcbSgVd1O8mfRXU9PT+vINkhZ4pD4xhPsSDqKhPNIqETO5Vcaql+/fv348eMLFy54+4qFi48fP9pqT09PS0uLurvbbN6IZ9Fp//79V69e7e3t9V7MghIqiXUCu0FBhd57Uf+et1t7V23ZBTctaDU3N3cRZ/EeOfGNJ9gRCZHw/ztKuVOnTqnk/PnzVqLh3EKcxmzlqMn0G4uQsVg4ffbsmSZLrlBd35eOOjeM4eFhZWhdXV3zWhob3+LdWuIr9x4npbN4SxLfeIIdkRAJ/7WjoplKpKKtKipq9fnz5zY9826fk5OjZfdOQmHt0aNH/f399fX1Kq+pqUlwXmVozc3NSvlsxuV9MdPQ0ODdsqqqSoXKimNjlPz07p6qhO44FgndcVI6i7ck8Y0jIRKmJqF88IaFUCgkA6WHd/uTJ09an1O+qqTUAqZG/WAwaCHu1atX2uzJkyf2mlHiKWVVRC0sLLRXrMpyvZmefUShMzY1Nel0Csua0dkZNXv0ztY0VdOEzeZyvtla8hJqd+9xYueEyZzFW5LgxpOU8OvXr0iIhP8omqlEGaPNXsrLy11aZSFCRCIRVamrmaIOt1fsS0LNAC2WFhQU+Kq8n0mcPXs2wYf1ik4Wfr2X5EJWqhLm5eW540gV79vR5M/iK4l34wvu6F7k8nYUCf8ZHBy0QgUBS9WKi4uzsrI0IVQ3vXTpkjxxHUVjf1lZmVRUr62rq1PosHLFRuVm6liqKikpsUmRS0Rra2vtpY420Ga+S1LQs4/vJEZpaanva2uKyQpN2XNUVlY6cxYhofqrnUh/FaIXdxZfSYIbT7xja2ur2lCnU5MiYWZJmLFfd/7BmgsJkRAJkRAJkRAJkRAJ1xA22UNCJERCQEIkBCREQiQEJERCQEIkXDoJIZNBwlXB1NTUyMhIKBQKBoOBQKANMgn+39FVQSQSGRsb00A4MDCg59EBmQT/A/eqYGZmRnlIOBzWk9CI2AeZBL9FsSqIRqMaAvUMNBYqJxmCTIJfZVoVzM7OqvU1CuoxaFYwAZkEv08IAEgIgIQAgIQASAgASAiAhACAhABICABICICEAICEAEgIgIRICICEAEiIhABICICESAiAhABIiIQASAiAhEgIgIQASAgASAiAhACwUhICwMr8kilNAICEABnNfwGm9mZjGryHjAAAAABJRU5ErkJggg==" alt="diag ef26057373a210c1f40393ce964243c2" width="300" height="238">
</div>
</div>
<div class="paragraph">
<p>On a un module racine <code>AppModule</code> avec un composant racine <code>PonyRacerAppComponent</code>,
avec un composant enfant <code>RacesComponent</code>.</p>
</div>
<div class="paragraph">
<p>Quand on bootstrappe l&#8217;application, on crée un injecteur racine pour le module.
Ensuite, chaque composant va créer son propre injecteur, héritant de celui de son parent.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag b1a4283f2bd68cdc38817d6531cf4de4" width="470" height="238">
</div>
</div>
<div class="paragraph">
<p>Cela signifie que si tu déclares une dépendance dans un composant, Angular&#160;2 va commencer sa recherche dans l&#8217;injecteur courant.
S&#8217;il y trouve la dépendance, parfait, il la retourne. Sinon, il va chercher dans l&#8217;injecteur parent, puis son parent, et tous ses ancêtres, jusqu&#8217;à ce qu&#8217;il trouve cette dépendance.
S&#8217;il ne trouve pas, il lève une exception.</p>
</div>
<div class="paragraph">
<p>De cela, on peut déduire deux affirmations&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>les providers déclarés dans l&#8217;injecteur racine sont disponibles pour tous les composants de l&#8217;application.
Par exemple, <code>ApiService</code> et <code>RaceService</code> peuvent être utilisés partout.</p>
</li>
<li>
<p>on peut déclarer des dépendances à d&#8217;autres niveaux que le module racine.
Comment fait-on cela&#160;?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Le décorateur <code>@Component</code> peut recevoir une autre option de configuration, appelée <code>providers</code>.
Cet attribut <code>providers</code> peut recevoir un tableau avec une liste de dépendances, comme nous l&#8217;avons fait avec l&#8217;attribut <code>providers</code> de <code>@NgModule</code>.</p>
</div>
<div class="paragraph">
<p>On peut donc imaginer un <code>RacesComponent</code> qui déclarerait son propre provider de <code>RaceService</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-races</span><span class="delimiter">'</span></span>,
  <span class="key">providers</span>: [{ <span class="key">provide</span>: RaceService, <span class="key">useClass</span>: FakeRaceService }],
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;strong&gt;</span>Races list: {{list()}}<span class="tag">&lt;/strong&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RacesComponent {

  constructor(<span class="reserved">private</span> raceService: RaceService) {
  }

  list() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.raceService.list();
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans ce composant, le provider avec le token <code>RaceService</code> retournera toujours une instance de <code>FakeRaceService</code>, quelque soit le provider défini dans l&#8217;injecteur racine.
C&#8217;est vraiment pratique si tu veux utiliser une instance différente d&#8217;un service dans un composant donné, ou si tu tiens à avoir des composants parfaitement encapsulés qui déclarent tout ce dont ils dépendent.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Si tu déclares une dépendance à la fois dans le module de ton application
et dans l&#8217;attribut <code>providers</code> de ton composant,
ce seront bien deux instances différentes qui seront créées et utilisées&#160;!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ici nous avons&#160;:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag 743a9f43af65e7e15c40b669753f1b22" width="510" height="238">
</div>
</div>
<div class="paragraph">
<p>L&#8217;injection sera alors résolue en&#160;:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag 41b60105d31bbe0987a294d7fd63ae31" width="490" height="238">
</div>
</div>
<div class="paragraph">
<p>En règle générale, on peut dire que si un seul composant a besoin d&#8217;un service donné, c&#8217;est une bonne idée de définir ce service dans l&#8217;injecteur du composant, via l&#8217;attribut <code>providers</code>.
Si une dépendance peut être utilisée ailleurs dans l&#8217;application, on la déclare dans le module racine.</p>
</div>
</div>
<div class="sect2">
<h3 id="_injection_sans_types">9.6. Injection sans types</h3>
<div class="paragraph">
<p>Si tu n&#8217;aimes pas TypeScript, et ne veux pas utiliser de types, tu auras besoin d&#8217;un décorateur sur chaque dépendance que tu veux injecter.
Le même <code>RaceService</code> s&#8217;écrirait en ES6 avec des décorateurs&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Injectable, Inject } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { ApiService } from <span class="string"><span class="delimiter">'</span><span class="content">./api.service</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Injectable()
<span class="reserved">export</span> <span class="reserved">class</span> RaceService {

  constructor(<span class="error">@</span>Inject(ApiService) apiService) {
    <span class="local-variable">this</span>.apiService = apiService;
  }

  list() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.apiService.get(<span class="string"><span class="delimiter">'</span><span class="content">/races</span><span class="delimiter">'</span></span>);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour que les décorateurs fonctionnent avec cet exemple sans TypeScript,
il est nécessaire d&#8217;utiliser babel avec l&#8217;option <code>es7.decorator</code>
et le plugin <code>angular2-annotations</code>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pipes">10. <em>Pipes</em></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_ceci_n_est_pas_une_pipe">10.1. Ceci n&#8217;est pas une pipe</h3>
<div class="paragraph">
<p>Souvent, les données brutes n&#8217;ont pas la forme exacte que l&#8217;on voudrait afficher dans la vue.
On a envie de les transformer, les filtrer, les tronquer, etc&#8230;&#8203;
AngularJS&#160;1.x avait une fonctionnalité bien pratique pour ça, mais mal-nommée&#160;: les filters ("filtres").
Ils en ont tiré une leçon, et ces transformateurs de données ont désormais un nom pertinent&#160;!
Non, c&#8217;est une blague&#160;: ils se nomment désormais <em>pipes</em> ("tuyaux") :).</p>
</div>
<div class="paragraph">
<p>Un <em>pipe</em> peut être utilisé dans le HTML, ou dans le code applicatif.
Etudions quelques cas d&#8217;exemple.</p>
</div>
</div>
<div class="sect2">
<h3 id="_json">10.2. json</h3>
<div class="paragraph">
<p><code>json</code> est un <em>pipe</em> pas tellement utile en production, mais bien pratique pour le débug.
Ce <em>pipe</em> applique simplement <code>JSON.stringify()</code> sur tes données.
Si tu as dans tes données un tableau de poneys nommé <code>ponies</code>, et que tu veux rapidement voir ce qu&#8217;il contient, tu aurais pu écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ ponies }}<span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Pas de chance, cela affichera <code>[object Object]</code>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Mais <code>JsonPipe</code> arrive à la rescousse.
Tu peux l&#8217;utiliser dans n&#8217;importe quelle expression, au sein de ton HTML&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ ponies | json }}<span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Et cela affichera la représentation JSON de ton objet&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>[ { &quot;name&quot;: &quot;Rainbow Dash&quot; }, { &quot;name&quot;: &quot;Pinkie Pie&quot; } ]<span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut aussi comprendre avec cet exemple d&#8217;où vient le nom 'pipe'. Pour utiliser un <em>pipe</em>, il faut ajouter le caractère <em>pipe</em> (<code>|</code>) après tes données, puis le nom du <em>pipe</em> à utiliser. L&#8217;expression est évaluée, et le résultat traverse le <em>pipe</em>. Et il est possible de chaîner plusieurs <em>pipes</em>, genre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ ponies | slice:0:2 | json }}<span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On reviendra sur le <em>pipe</em> <code>slice</code>, mais tu constates qu&#8217;on enchaîne le <em>pipe</em> <code>slice</code> et le <em>pipe</em> <code>json</code>.</p>
</div>
<div class="paragraph">
<p>Tu peux en utiliser dans une expression interpolée, ou une expression de propriété, mais <strong>pas</strong> dans une instruction d&#8217;événement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p</span> <span class="error">[</span><span class="attribute-name">textContent</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">ponies</span> <span class="error">|</span> <span class="attribute-name">json</span><span class="error">&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut aussi l&#8217;utiliser dans le code&#160;, via l&#8217;injection de dépendance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="comment">// you need to import the pipe you want to use</span>
<span class="reserved">import</span> { JsonPipe } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/common</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-ponies</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;p&gt;</span>{{poniesAsJson}}<span class="tag">&lt;/p&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PoniesComponent {
  <span class="key">ponies</span>: Array&lt;any&gt; = [{ <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span> }, { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Pinkie Pie</span><span class="delimiter">'</span></span> }];

  poniesAsJson: string;

  <span class="comment">// inject the Pipe you want</span>
  constructor(jsonPipe: JsonPipe) {
    <span class="comment">// and then call the transform method on it</span>
    <span class="local-variable">this</span>.poniesAsJson = jsonPipe.transform(<span class="local-variable">this</span>.ponies);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais prends garde&#160;: le <em>pipe</em> doit être ajouté aux <code>providers</code> de ton <code>@NgModule</code> (ou de ton <code>@Component</code>) pour pouvoir l&#8217;injecter et l&#8217;utiliser dans ton composant.</p>
</div>
<div class="paragraph">
<p>Comme l&#8217;utilisation programmatique est identique pour tous les <em>pipes</em>, je ne te montrerai désormais que des exemples HTML d&#8217;utilisation dans une interpolation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_slice">10.3. slice</h3>
<div class="paragraph">
<p>Si tu as envie de n&#8217;afficher qu&#8217;un sous-ensemble d&#8217;une collection, <code>slice</code> est ton ami.
Il fonctionne comme la méthode du même nom en JavaScript, et prend deux paramètres&#160;:
un indice de départ et, éventuellement, un indice de fin.
Pour passer un paramètre à un <em>pipe</em>, il faut lui ajouter un caractère <code>:</code> et le premier paramètre, puis éventuellement un autre <code>:</code> et le second argument, etc&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Cet exemple va afficher les deux premiers éléments de ma liste de poneys.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ ponies | slice:0:2 | json }}<span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>slice</code> fonctionne non seulement avec des tableaux, mais aussi avec des chaînes de caractères, pour n&#8217;en afficher qu&#8217;une partie&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ 'Ninja Squad' | slice:0:5 }}<span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>et cela affichera seulement 'Ninja'.</p>
</div>
<div class="paragraph">
<p>Si tu passes à <code>slice</code> seulement un entier positif N, il prendra les éléments de N à la fin.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ 'Ninja Squad' | slice:3 }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display 'ja Squad' --&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu lui passes un entier négatif, il prendra les N <strong>derniers</strong> éléments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ 'Ninja Squad' | slice:-5 }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display 'Squad' --&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme nous l&#8217;avons vu, tu peux aussi passer à <code>slice</code> un indice de fin&#160;:
il prendra alors les éléments de l&#8217;indice de départ jusqu&#8217;à l&#8217;indice de fin.</p>
</div>
<div class="paragraph">
<p>Si cet indice est négatif, il prendra les éléments jusqu&#8217;à cet indice, mais en partant cette fois de la fin.</p>
</div>
<div class="paragraph">
<p>Comme tu peux utiliser <code>slice</code> dans n&#8217;importe quelle expression, tu peux aussi l&#8217;utiliser avec <code>NgFor</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-ponies</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngFor</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">let pony of ponies | slice:0:2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>{{pony.name}}<span class="tag">&lt;/div&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PoniesComponent {
  <span class="key">ponies</span>: Array&lt;any&gt; = [
    { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span> },
    { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Pinkie Pie</span><span class="delimiter">'</span></span> },
    { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Fluttershy</span><span class="delimiter">'</span></span> }
  ];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le composant ne créera ici que deux <code>div</code>, pour les deux premiers poneys, parce qu&#8217;on a appliqué <code>slice</code> à la collection.</p>
</div>
<div class="paragraph">
<p>Le paramètre d&#8217;un pipe peut bien évidemment avoir une valeur dynamique&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-ponies</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngFor</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">let pony of ponies | slice:0:size</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>{{pony.name}}<span class="tag">&lt;/div&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PoniesComponent {
  <span class="key">size</span>: number = <span class="integer">2</span>;
  ponies: Array&lt;any&gt; = [
    { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span> },
    { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Pinkie Pie</span><span class="delimiter">'</span></span> },
    { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Fluttershy</span><span class="delimiter">'</span></span> }
  ];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Voici l&#8217;exemple parfait d&#8217;affichage dynamique où l&#8217;utilisateur décide combien d&#8217;éléments il veut voir affichés.</p>
</div>
</div>
<div class="sect2">
<h3 id="_uppercase_majuscule">10.4. uppercase ("majuscule")</h3>
<div class="paragraph">
<p>Comme son nom le révèle merveilleusement aux bilingues, ce <em>pipe</em> transforme une chaîne de caractères dans sa version MAJUSCULE&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ 'Ninja Squad' | uppercase }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display 'NINJA SQUAD' --&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lowercase_minuscule">10.5. lowercase ("minuscule")</h3>
<div class="paragraph">
<p>Pendant du précédent, ce <em>pipe</em> transforme une chaîne de caractères dans sa version minuscule&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ 'Ninja Squad' | lowercase }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display 'ninja squad' --&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_replace_remplacer">10.6. replace ("remplacer")</h3>
<div class="paragraph">
<p>Ce <em>pipe</em> remplace une portion d&#8217;une chaîne de caractères par une autre.
Le <em>pattern</em> à remplacer peut être une chaîne de caractères ou une expression régulière,
et la première occurrence du <em>pattern</em> rencontrée sera remplacée.</p>
</div>
<div class="paragraph">
<p>Si tu veux remplacer toutes les occurrences d&#8217;un <em>pattern</em>,
tu dois utiliser une expression régulière avec un flag <code>g</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ 'Ninja Squad' | replace:'a':'4' }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display 'Ninj4 Squad' --&gt;</span>

<span class="comment">&lt;!-- replaceAllA = /a/g in component --&gt;</span>
<span class="tag">&lt;p&gt;</span>{{ 'Ninja Squad' | replace:replaceAllA:'4' }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display 'Ninj4 Squ4d' --&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_number_nombre">10.7. number ("nombre")</h3>
<div class="paragraph">
<p>Ce <em>pipe</em> permet de formater un nombre.</p>
</div>
<div class="paragraph">
<p>Il prend un seul paramètre, une chaîne de caractères, sous la forme <code>{integerDigits}.{minFractionDigits}-{maxFractionDigits}</code>, où chaque partie est facultative.
Ces parties indiquent:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>combien de chiffres veut-on dans la partie entière;</p>
</li>
<li>
<p>combien de chiffres de précision minimale veut-on dans la partie décimale;</p>
</li>
<li>
<p>combien de chiffres de précision maximale veut-on dans la partie décimale.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Quelques exemples, à commencer sans <em>pipe</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ 12345 }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display '12345' --&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Utiliser le <em>pipe</em> <code>number</code> va grouper la partie entière, même sans aucun paramètre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ 12345 | number }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display '12,345' --&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Le paramètre <code>integerDigits</code> va compléter à gauche avec des zéros si besoin&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html">  <span class="tag">&lt;p&gt;</span>{{ 12345 | number:'6.' }}<span class="tag">&lt;/p&gt;</span>
  <span class="comment">&lt;!-- will display '012,345' --&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Le paramètre <code>minFractionDigits</code> est la précision minimale de la partie décimale, donc il complétera avec des zéros à droite&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ 12345 | number:'.2' }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display '12,345.00' --&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Le paramètre <code>maxFractionDigits</code> est la précision maximale de la partie décimale. Il est obligatoire de donner une valeur à <code>minFractionDigits</code>, fut-elle 0, si tu veux l&#8217;utiliser. Si le nombre a plus de décimale que cette valeur, alors il sera arrondi&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ 12345.13 | number:'.1-1' }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display '12,345.1' --&gt;</span>

<span class="tag">&lt;p&gt;</span>{{ 12345.16 | number:'.1-1' }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display '12,345.2' --&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Ce <em>pipe</em> (ainsi que <code>percent</code> et <code>currency</code>) s&#8217;appuie sur l&#8217;API d&#8217;internationalisation des navigateurs,
et cette API n&#8217;est pas <a href="http://caniuse.com/#search=intl">disponible dans tous les navigateurs à l&#8217;heure actuelle</a>.
C&#8217;est un problème connu, et il oblige à utiliser un <em>polyfill</em> pour cette API dans certains navigateurs (notamment Safari/iOS).
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_percent_pourcent">10.8. percent ("pourcent")</h3>
<div class="paragraph">
<p>Sur le même principe, <code>percent</code> permet d&#8217;afficher&#8230;&#8203; un pourcentage&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ 0.8 | percent }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display '80%' --&gt;</span>

<span class="tag">&lt;p&gt;</span>{{ 0.8 | percent:'.3' }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display '80.000%' --&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_currency_devise_monétaire">10.9. currency ("devise monétaire")</h3>
<div class="paragraph">
<p>Comme on l&#8217;imagine, ce <em>pipe</em> permet de formater une somme d&#8217;argent dans la devise que tu veux.
Il faut lui fournir au moins un paramètre&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>le code ISO de la devise ('EUR', 'USD'&#8230;&#8203;)</p>
</li>
<li>
<p>Optionnellement, un flag booléen indiquant si l&#8217;on souhaite afficher le symbole ('€', '$') ou le code ISO. Par défaut, le flag est à <code>false</code>, et le symbole ne sera pas utilisé.</p>
</li>
<li>
<p>Optionnellement, une chaîne de formatage du montant, avec la même syntaxe que <code>number</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ 10.6 | currency:'EUR' }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display 'EUR10.60' --&gt;</span>

<span class="tag">&lt;p&gt;</span>{{ 10.6 | currency:'USD':true }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display '$10.60' --&gt;</span>

<span class="tag">&lt;p&gt;</span>{{ 10.6 | currency:'USD':true:'.3' }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display '$10.600' --&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_date">10.10. date</h3>
<div class="paragraph">
<p>Le <em>pipe</em> <code>date</code> transforme une date en chaîne de caractères au format désiré.
Cette date peut être un objet <code>Date</code>, ou un nombre de millisecondes.
Le format spécifié peut être soit un <em>pattern</em> comme 'dd/MM/yyyy' ou 'MM-yy', soit un des formats prédéfinis comme 'short', 'longDate', etc&#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ birthday | date:'dd/MM/yyyy' }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display '16/07/1986' --&gt;</span>

<span class="tag">&lt;p&gt;</span>{{ birthday | date:'longDate' }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display 'July 16, 1986' --&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Evidemment, tu peux aussi afficher la seule partie horaire d&#8217;une date&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>{{ birthday | date:'HH:mm' }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display '15:30' --&gt;</span>

<span class="tag">&lt;p&gt;</span>{{ birthday | date:'shortTime' }}<span class="tag">&lt;/p&gt;</span>
<span class="comment">&lt;!-- will display '3:30 PM' --&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_async">10.11. async</h3>
<div class="paragraph">
<p>Le <em>pipe</em> <code>async</code> permet d&#8217;afficher des données obtenues de manière asynchrone.
Sous le capot, il utilise <code>PromisePipe</code> ou <code>ObservablePipe</code> selon que tes données viennent d&#8217;une Promise ou d&#8217;un Observable.
Si tu ne te rappelles pas ce qu&#8217;est une Promise, c&#8217;est le moment de retourner au chapitre ES6. Et concernant l&#8217;Observable, nous y viendrons rapidement.</p>
</div>
<div class="paragraph">
<p>Un <em>pipe</em> <code>async</code> retourne une chaîne de caractères vide jusqu&#8217;à ce que les données deviennent disponibles (i.e. jusqu&#8217;à ce que la promise soit résolue, dans le cas d&#8217;une promise).
Une fois résolue, la valeur obtenue est retournée.
Et plus important, cela déclenche un cycle de détection de changement une fois la donnée obtenue.</p>
</div>
<div class="paragraph">
<p>L&#8217;exemple suivant utilise une Promise&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-greeting</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;div&gt;</span>{{ asyncGreeting | async }}<span class="tag">&lt;/div&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> GreetingComponent {
  <span class="key">asyncGreeting</span>: Promise&lt;string&gt; = <span class="keyword">new</span> Promise(resolve =&gt; {
    <span class="comment">// after 1 second, the promise will resolve</span>
    window.setTimeout(() =&gt; resolve(<span class="string"><span class="delimiter">'</span><span class="content">hello</span><span class="delimiter">'</span></span>), <span class="integer">1000</span>);
  });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux voir que le <em>pipe</em> <code>async</code> est appliqué à la variable <code>asyncGreeting</code>. Celle-ci est une promise, résolue après une seconde. Une fois la promise résolue, le navigateur affichera&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div&gt;</span>hello<span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Encore plus intéressant, si la source de données est un Observable,
alors le <em>pipe</em> se chargera de se désabonner de la source de données
à la destruction du composant (quand l&#8217;utilisateur naviguera vers une autre page, par exemple).</p>
</div>
</div>
<div class="sect2">
<h3 id="_créer_tes_propres_em_pipes_em">10.12. Créer tes propres <em>pipes</em></h3>
<div class="paragraph">
<p>On peut bien évidemment créer ses propres <em>pipes</em>.
C&#8217;est parfois très utile. En AngularJS&#160;1.x, on utilisait souvent des filtres customs. Par exemple, nous avions créé et utilisé dans plusieurs de nos applications un filtre permettant d&#8217;afficher le temps écoulé depuis une action utilisateur (genre "il y a 12 secondes", ou "il y a 3 jours").
Voyons comment faire la même chose en Angular&#160;2&#160;!</p>
</div>
<div class="paragraph">
<p>Tout d&#8217;abord, nous devons créer une nouvelle classe.
Elle doit implémenter l&#8217;interface <code>PipeTransform</code>,
ce qui nous amène à écrire une méthode <code>tranform()</code>, celle qui fait tout le travail.</p>
</div>
<div class="paragraph">
<p>Ça n&#8217;a pas l&#8217;air très compliqué, alors essayons&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { PipeTransform, Pipe } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="reserved">class</span> FromNowPipe <span class="reserved">implements</span> PipeTransform {
  transform(value, args) {
    <span class="comment">// do something here</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nous utiliserons la function <code>fromNow</code> de <a href="http://momentjs.com/docs/#/displaying/fromnow/">Moment.js</a> pour afficher combien de temps s&#8217;est écoulé depuis une date.</p>
</div>
<div class="paragraph">
<p>Tu peux installer Moment.js avec <code>NPM</code> si tu le souhaites&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">npm install moment</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et l&#8217;ajouter à la configuration de SystemJS&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">map: {
  <span class="key"><span class="delimiter">'</span><span class="content">angular2</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">node_modules/angular2</span><span class="delimiter">'</span></span>,
  <span class="key"><span class="delimiter">'</span><span class="content">rxjs</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">node_modules/rxjs</span><span class="delimiter">'</span></span>,
  <span class="key"><span class="delimiter">'</span><span class="content">moment</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">node_modules/moment/moment</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme on utilisera TypeScript, on aura aussi besoin de l&#8217;interface&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">typings install --save --ambient moment-node</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { PipeTransform, Pipe } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> * as moment from <span class="string"><span class="delimiter">'</span><span class="content">moment</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="reserved">class</span> FromNowPipe <span class="reserved">implements</span> PipeTransform {
  transform(value, args) {
    <span class="keyword">return</span> moment(value).fromNow();
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, nous devons rendre disponible notre <em>pipe</em> dans l&#8217;application.
Pour cela, il y a un décorateur particulier à utiliser: <code>@Pipe</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { PipeTransform, Pipe } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> * as moment from <span class="string"><span class="delimiter">'</span><span class="content">moment</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Pipe({ <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">fromNow</span><span class="delimiter">'</span></span> })
<span class="reserved">export</span> <span class="reserved">class</span> FromNowPipe <span class="reserved">implements</span> PipeTransform {
  transform(value, args) {
    <span class="keyword">return</span> moment(value).fromNow();
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le nom choisi sera celui qui nous permettra d&#8217;utiliser le <em>pipe</em> dans le template.
Pour pouvoir utiliser le <em>pipe</em> dans le template, la dernière chose à faire est d&#8217;ajouter le <em>pipe</em> dans les
<code>declarations</code> de ton <code>@NgModule</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>NgModule({
  <span class="key">imports</span>: [BrowserModule],
  <span class="key">declarations</span>: [PonyRacerAppComponent, RacesComponent, FromNowPipe],
  <span class="key">bootstrap</span>: [PonyRacerAppComponent]
})
<span class="reserved">export</span> <span class="reserved">class</span> AppModule {
}</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">N.B.</div>
<div class="paragraph">
<p>A sa grande déception, mais à notre soulagement, le traducteur n&#8217;a pas réussi à placer le calembour "casser ta pipe" dans le chapitre.
N&#8217;hésite toutefois pas à te manifester en cas de faute de goût qui nous aurait échappée.</p>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reactive-programming">11. Programmation réactive</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_ok_on_vous_rappellera">11.1. OK, on vous rappellera</h3>
<div class="paragraph">
<p>Tu as probablement entendu parler récemment de programmation réactive ou programmation fonctionnelle réactive (<em>reactive programming</em>).
C&#8217;est devenu assez populaire dans la plupart des plateformes, comme en .Net avec la bibliothèque <em>Reactive Extensions</em>,
qui est désormais disponible dans la plupart des langages (RxJava, RxJS, etc&#8230;&#8203;).</p>
</div>
<div class="paragraph">
<p>La programmation réactive n&#8217;est pas quelque chose de fondamentalement nouveau.
C&#8217;est une façon de construire une application avec des événements, et d&#8217;y réagir (d&#8217;où le nom).
Les événements peuvent être combinés, filtrés, groupés, etc&#8230;&#8203; en utilisant des fonctions comme <code>map</code>, <code>filter</code>, etc&#8230;&#8203;
C&#8217;est pourquoi tu croiseras parfois le terme de "programmation fonctionnelle réactive" (<em>functional reactive programming</em>).
Mais pour être tout à fait précis, la programmation réactive n&#8217;est pas foncièrement fonctionnelle,
parce qu&#8217;elle n&#8217;inclue pas forcément les concepts d&#8217;immuabilité, l&#8217;absence d&#8217;effets de bord, etc&#8230;&#8203;
Tu as probablement déjà réagi à des événements&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>dans le navigateur, en enregistrant des listeners sur des actions utilisateurs&#160;;</p>
</li>
<li>
<p>côté serveur, en traitement des événements d&#8217;un bus de messages.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Dans la programmation réactive, toute donnée entrante sera dans un flux.
Ces flux peuvent être écoutés, évidemment modifiés (filtrés, fusionnés, &#8230;&#8203;),
et même devenir un nouveau flux que l&#8217;on pourra aussi écouter.
Cette technique permet d&#8217;obtenir des programmes faiblement couplés&#160;:
tu n&#8217;as pas à te soucier des conséquences de ton appel de méthode,
tu te contentes de déclencher un événement, et toutes les parties de l&#8217;application intéressées réagiront en conséquence.
Et peut-être même qu&#8217;une de ces parties va aussi déclencher un événement, etc&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Maintenant, pourquoi est-ce que je parle de tout cela&#160;? Quel est le rapport avec Angular&#160;2&#160;?</p>
</div>
<div class="paragraph">
<p>Et bien Angular&#160;2 est construit sur de la programmation réactive,
et nous utiliserons aussi cette technique pour certaines parties.
Répondre à une requête HTTP&#160;? Programmation réactive.
Lever un événement spécifique dans un de nos composants&#160;? Programmation réactive.
Gérer un changement de valeurs dans un de nos formulaires&#160;? Programmation réactive.</p>
</div>
<div class="paragraph">
<p>Alors arrêtons-nous quelques minutes sur ce sujet.
Rien de bien compliqué, mais c&#8217;est mieux d&#8217;avoir les idées claires.</p>
</div>
</div>
<div class="sect2">
<h3 id="_principes_généraux">11.2. Principes généraux</h3>
<div class="paragraph">
<p>Dans la programmation réactive, tout est un flux.
Un flux est une séquence ordonnée d&#8217;événements.
Ces événements représentent des valeurs (hé, regarde, une nouvelle valeur&#160;!), des erreurs (oups, ça a merdé), ou des terminaisons (voilà, j&#8217;ai fini).
Tous ces événements sont poussés par un producteur de données, vers un consommateur.
En tant que développeur, ton job sera de t&#8217;abonner (<em>subscribe</em>) à ces flux, i.e. définir un listener capable de gérer ces trois possibilités.
Un tel listener sera appelé un <em>observer</em>, et le flux, un <em>observable</em>.
Ces termes ont été définis il y longtemps, car ils constituent un <em>design pattern</em> bien connu&#160;: l'<em>observer</em>.</p>
</div>
<div class="paragraph">
<p>Ils sont différents des <em>promises</em>, même s&#8217;ils y ressemblent, car ils gèrent tous deux des valeurs asynchrones.
Mais un <em>observer</em> n&#8217;est pas une chose à usage unique&#160;: il continuera d&#8217;écouter jusqu&#8217;à ce qu&#8217;il reçoive un événement de terminaison.</p>
</div>
<div class="paragraph">
<p>Pour le moment, les <em>observables</em> ne font pas partie de la spécification ECMAScript officielle,
mais ils feront peut-être partie d&#8217;une version future, un effort en cours va dans ce sens.</p>
</div>
<div class="paragraph">
<p>Les <em>observables</em> sont très similaires à des tableaux.
Un tableau est une collection de valeurs, comme un <em>observable</em>.
Un <em>observable</em> ajoute juste la notion de valeur reportée dans le temps&#160;:
dans un tableau, toutes les valeurs sont disponibles immédiatement,
dans un <em>observable</em>, les valeurs viendront plus tard, par exemple dans plusieurs minutes.</p>
</div>
<div class="paragraph">
<p>La bibliothèque la plus populaire de programmation réactive dans l&#8217;écosystème JavaScript est <a href="https://github.com/Reactive-Extensions/RxJS">RxJS</a>.
Et c&#8217;est celle choisie par Angular&#160;2.</p>
</div>
<div class="paragraph">
<p>Jetons-y un œil.</p>
</div>
</div>
<div class="sect2">
<h3 id="_rxjs">11.3. RxJS</h3>
<div class="paragraph">
<p>Tout <em>observable</em>, comme un tableau, peut être transformé avec des fonctions classiques&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>take(n)</code> va piocher les n premiers éléments.</p>
</li>
<li>
<p><code>map(fn)</code> va appliquer la fonction <code>fn</code> sur chaque événement et retourner le résultat.</p>
</li>
<li>
<p><code>filter(predicate)</code> laissera passer les seuls événements qui répondent positivement au prédicat.</p>
</li>
<li>
<p><code>reduce(fn)</code> appliquera la fonction <code>fn</code> à chaque événement pour réduire le flux à une seule valeur unique.</p>
</li>
<li>
<p><code>merge(s1, s2)</code> fusionnera les deux flux.</p>
</li>
<li>
<p><code>subscribe(fn)</code> appliquera la fonction <code>fn</code> à chaque événement qu&#8217;elle reçoit.</p>
</li>
<li>
<p>et bien d&#8217;autres&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Si tu as un tableau de nombres que tu veux tous multiplier par 2,
filtrer ceux inférieurs à 5, et les afficher enfin, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">[<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>, <span class="integer">5</span>]
  .map(x =&gt; x * <span class="integer">2</span>)
  .filter(x =&gt; x &gt; <span class="integer">5</span>)
  .forEach(x =&gt; console.log(x)); <span class="comment">// 6, 8, 10</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>RxJS nous permet de construire un <em>observable</em> à partir d&#8217;un tableau.
Et nous pouvons ainsi faire exactement la même chose&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">Observable.from([<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>, <span class="integer">5</span>])
  .map(x =&gt; x * <span class="integer">2</span>)
  .filter(x =&gt; x &gt; <span class="integer">5</span>)
  .subscribe(x =&gt; console.log(x)); <span class="comment">// 6, 8, 10</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais un <em>observable</em> est bien plus qu&#8217;une simple collection.
C&#8217;est une collection asynchrone, dont les événements arrivent au cours du temps.
Les événements dans le navigateur sont un bon exemple&#160;: ils arriveront au cours du temps,
donc ils sont de bons candidats pour l&#8217;utilisation d&#8217;un <em>observable</em>.
Voici un exemple avec jQuery&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let input = <span class="predefined">$</span>(<span class="string"><span class="delimiter">'</span><span class="content">input</span><span class="delimiter">'</span></span>);

Observable.fromEvent(input, <span class="string"><span class="delimiter">'</span><span class="content">keyup</span><span class="delimiter">'</span></span>)
  .subscribe(() =&gt; console.log(<span class="string"><span class="delimiter">'</span><span class="content">keyup!</span><span class="delimiter">'</span></span>));

input.trigger(<span class="string"><span class="delimiter">'</span><span class="content">keyup</span><span class="delimiter">'</span></span>); <span class="comment">// logs &quot;keyup!&quot;</span>
input.trigger(<span class="string"><span class="delimiter">'</span><span class="content">keyup</span><span class="delimiter">'</span></span>); <span class="comment">// logs &quot;keyup!&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux construire des <em>observables</em> depuis une requête AJAX,
un événement navigateur, une réponse de Websocket, une <em>promise</em>,
et tout ce que tu peux imaginer.
Et depuis une fonction évidemment&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let observable = Observable.create((observer) =&gt; observer.next(<span class="string"><span class="delimiter">'</span><span class="content">hello</span><span class="delimiter">'</span></span>));

observable.subscribe((value) =&gt; console.log(value));
<span class="comment">// logs &quot;hello&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Observable.create</code> reçoit une fonction qui émet des événements sur son paramètre <code>observer</code>.
 Ici, elle n&#8217;émet qu&#8217;un seul événement pour la démonstration.</p>
</div>
<div class="paragraph">
<p>Tu peux aussi traiter les erreurs, parce qu&#8217;un <em>observable</em> peut partir en sucette.
La méthode <code>subscribe</code> accepte un deuxième callback, consacré à la gestion des erreurs.</p>
</div>
<div class="paragraph">
<p>Ici, la méthode <code>map</code> lève une exception, donc le deuxième callback de la méthode <code>subscribe</code> va le tracer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">Observable.range(<span class="integer">1</span>, <span class="integer">5</span>)
  .map(x =&gt; {
    <span class="keyword">if</span> (x % <span class="integer">2</span> === <span class="integer">1</span>) {
      <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string"><span class="delimiter">'</span><span class="content">something went wrong</span><span class="delimiter">'</span></span>);
    } <span class="keyword">else</span> {
      <span class="keyword">return</span> x;
    }
  })
  .filter(x =&gt; x &gt; <span class="integer">5</span>)
  .subscribe(x =&gt; console.log(x), error =&gt; console.log(error)); <span class="comment">// something went wrong</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Une fois que l'<em>observable</em> sera terminé, il enverra un événement de terminaison, que tu peux détecter avec un troisième callback.
Ici, la méthode <code>range</code> utilisée pour générer des événements va boucler de 1 à 5, puis émettre un signal de terminaison&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">Observable.range(<span class="integer">1</span>, <span class="integer">5</span>)
  .map(x =&gt; x * <span class="integer">2</span>)
  .filter(x =&gt; x &gt; <span class="integer">5</span>)
  .subscribe(x =&gt; console.log(x), error =&gt; console.log(error), () =&gt; console.log(<span class="string"><span class="delimiter">'</span><span class="content">done</span><span class="delimiter">'</span></span>));
<span class="comment">// 6, 8, 10, done</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Et tu peux faire plein plein de trucs avec un <em>observable</em>&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>transformation (delaying, debouncing&#8230;&#8203;)</p>
</li>
<li>
<p>combinaison (merge, zip, combineLatest&#8230;&#8203;)</p>
</li>
<li>
<p>filtrage (distinct, filter, last&#8230;&#8203;)</p>
</li>
<li>
<p>mathématique (min, max, average, reduce&#8230;&#8203;)</p>
</li>
<li>
<p>conditions (amb, includes&#8230;&#8203;)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Il nous faudrait un livre entier pour en venir à bout&#160;!
Si tu veux en savoir plus, jette un œil au livre <a href="https://xgrommx.github.io/rx-book/index.html">Rx Book</a>.
Il contient la meilleure introduction que j&#8217;ai vue sur le sujet.
Et si tu veux avoir une chouette représentation visuelle de chaque fonction, va sur <a href="http://rxmarbles.com/">rxmarbles.com</a>.</p>
</div>
<div class="paragraph">
<p>Maintenant, regardons comment les <em>observables</em> seront utilisés dans Angular&#160;2.</p>
</div>
</div>
<div class="sect2">
<h3 id="_programmation_réactive_en_angular_2">11.4. Programmation réactive en Angular&#160;2</h3>
<div class="paragraph">
<p>Angular&#160;2 utilise RxJS, et nous permet aussi de l&#8217;utiliser.
Le framework propose un adaptateur autour de l&#8217;objet <code>Observable</code>&#160;: <code>EventEmitter</code>.
<code>EventEmitter</code> a une méthode <code>subscribe()</code> pour réagir aux événements,
et cette méthode reçoit trois paramètres&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>une méthode pour réagir aux événements.</p>
</li>
<li>
<p>une méthode pour réagir aux erreurs.</p>
</li>
<li>
<p>une méthode pour réagir à la terminaison.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Un <code>EventEmitter</code> peut émettre un événement
avec la méthode <code>emit()</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let emitter = <span class="keyword">new</span> EventEmitter();

emitter.subscribe(
  value =&gt; console.log(value),
  error =&gt; console.log(error),
  () =&gt; console.log(<span class="string"><span class="delimiter">'</span><span class="content">done</span><span class="delimiter">'</span></span>)
);

emitter.emit(<span class="string"><span class="delimiter">'</span><span class="content">hello</span><span class="delimiter">'</span></span>);
emitter.emit(<span class="string"><span class="delimiter">'</span><span class="content">there</span><span class="delimiter">'</span></span>);
emitter.complete();

<span class="comment">// logs &quot;hello&quot;, then &quot;there&quot;, then &quot;done&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que la méthode <code>subscribe</code> retourne un objet <em>subscription</em>,
avec une méthode <code>unsubscribe</code> pour se désabonner.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let emitter = <span class="keyword">new</span> EventEmitter();

let subscription = emitter.subscribe(
  value =&gt; console.log(value),
  error =&gt; console.log(error),
  () =&gt; console.log(<span class="string"><span class="delimiter">'</span><span class="content">done</span><span class="delimiter">'</span></span>)
);

emitter.emit(<span class="string"><span class="delimiter">'</span><span class="content">hello</span><span class="delimiter">'</span></span>);
subscription.unsubscribe(); <span class="comment">// unsubscribe</span>
emitter.emit(<span class="string"><span class="delimiter">'</span><span class="content">there</span><span class="delimiter">'</span></span>);

<span class="comment">// logs &quot;hello&quot; only</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant qu&#8217;on en sait un peu plus sur la programmation réactive, voyons l&#8217;usage qu&#8217;en fait Angular&#160;2.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-components">12. Créer des composants et directives</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction">12.1. Introduction</h3>
<div class="paragraph">
<p>Jusque-là, on a surtout vu des petits composants.
Et bien sûr, tu peux imaginer que dans la vraie vie,
comme ils sont la structure de nos applications, ils seront bien plus complexes que ceux qu&#8217;on a croisés.
Comment leur fournir des données&#160;? Comment gérer leur cycle de vie&#160;?
Quelles sont les bonnes pratiques pour construire ses composants&#160;?</p>
</div>
<div class="paragraph">
<p>Et les directives&#160;: c&#8217;est quoi, pourquoi, comment&#160;?</p>
</div>
</div>
<div class="sect2">
<h3 id="_directives">12.2. Directives</h3>
<div class="paragraph">
<p>Une directive est très semblable à un composant, sauf qu&#8217;elle n&#8217;a pas de template.
En fait, la classe <code>Component</code> hérite de la classe <code>Directive</code> dans le framework.</p>
</div>
<div class="paragraph">
<p>Il fait donc sens de commencer par étudier les directives, car tout ce que nous
verrons pour les directives s&#8217;appliquera également pour les composants.
On regardera les options de configuration qui te seront le plus utiles.
Les options plus exotiques seront réservées à un chapitre ultérieur,
quand tu maîtriseras déjà les bases.</p>
</div>
<div class="paragraph">
<p>Comme pour un composant, ta directive sera annotée d&#8217;un décorateur, mais
au lieu de <code>@Component</code>, ce sera <code>@Directive</code> (logique).</p>
</div>
<div class="paragraph">
<p>Les directives sont des briques minimalistes. On peut les concevoir comme des
décorateurs pour ton HTML&#160;: elles attacheront du comportement aux éléments du DOM.
Et tu peux avoir plusieurs directives appliquées à un même élément.</p>
</div>
<div class="paragraph">
<p>Une directive doit avoir un sélecteur CSS, qui indique au framework où l&#8217;activer
dans notre template.</p>
</div>
<div class="sect3">
<h4 id="_sélecteurs">12.2.1. Sélecteurs</h4>
<div class="paragraph">
<p>Les sélecteurs peuvent être de différents types&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>un élément, comme c&#8217;est généralement le cas pour les composants&#160;: <code>footer</code>.</p>
</li>
<li>
<p>une classe, mais c&#8217;est plutôt rare&#160;: <code>.alert</code>.</p>
</li>
<li>
<p>un attribut, ce qui est le plus fréquent pour une directive&#160;: <code>[color]</code>.</p>
</li>
<li>
<p>un attribut avec une valeur spécifique&#160;: <code>[color=red]</code>.</p>
</li>
<li>
<p>une combinaison de ceux précédents&#160;:
<code>footer[color=red]</code> désignera un élément <code>footer</code> avec un attribut <code>color</code> à la valeur <code>red</code>.
<code>[color],footer.alert</code> désignera n&#8217;importe quel élément avec un attribut <code>color</code>, ou (<code>,</code>) un élément <code>footer</code> portant la classe CSS <code>alert</code>.
<code>footer:not(.alert)</code> désignera un élément <code>footer</code> qui ne porte pas (<code>:not()</code>) la classe CSS <code>alert</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Par exemple, voici une directive très simple qui ne fait rien mais est activée
si un élément possède l&#8217;attribut <code>doNothing</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Directive({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">[doNothing]</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> DoNothingDirective {

  constructor() {
    console.log(<span class="string"><span class="delimiter">'</span><span class="content">Do nothing directive</span><span class="delimiter">'</span></span>);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette directive sera activée sur un composant comme <code>TestComponent</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-test</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="string"><span class="delimiter">'</span><span class="content">&lt;div doNothing&gt;Click me&lt;/div&gt;</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> TestComponent {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un sélecteur plus complexe pourrait ressembler à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Directive({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">div.loggable[logText]:not([notLoggable=true])</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> ComplexSelectorDirective {

  constructor() {
    console.log(<span class="string"><span class="delimiter">'</span><span class="content">Complex selector directive</span><span class="delimiter">'</span></span>);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Celui-là désignera tous les éléments <code>div</code> portant la class <code>loggable</code> et un
attribut <code>logText</code>, mais n&#8217;ayant pas d&#8217;attribut <code>notLoggable</code> avec la valeur <code>true</code>.</p>
</div>
<div class="paragraph">
<p>Ainsi, ce template déclenchera la directive&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">loggable</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">logText</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Hello<span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais celui-là, non&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">loggable</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">logText</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">notLoggable</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Hello<span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais pour être honnête, si tu en es à écrire quelque chose comme cela, c&#8217;est
qu&#8217;il y a un truc qui ne va pas&#160;! :)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Les sélecteurs CSS à base de descendants, de frères, ou d&#8217;identifiants,
et les pseudo-sélecteurs (autres que <code>:not</code>) ne sont pas supportés.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Ne nomme pas tes sélecteurs avec un préfixe <code>bind-</code>, <code>on-</code>, <code>let-</code> ou <code>ref-</code>&#160;:
ils ont une autre signification pour le parseur, car ils font partie de la syntaxe
canonique des templates.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Bien&#160;! Maintenant on sait déclarer une directive.
Il est temps d&#8217;en faire une qui sert vraiment à quelque chose&#160;!</p>
</div>
</div>
<div class="sect3">
<h4 id="_entrées">12.2.2. Entrées</h4>
<div class="paragraph">
<p>Le binding de données est généralement une étape capitale du travail de création
d&#8217;un composant ou d&#8217;une directive.
À chaque fois que tu voudras qu&#8217;un composant fournisse des données à l&#8217;un de ses
enfants, tu devras utiliser du binding de propriété.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, nous allons définir toutes les propriétés qui acceptent du binding
de données, grâce à l&#8217;attribut <code>inputs</code> du décorateur <code>@Directive</code>.
Cet attribut accepte un tableau de chaînes de caractères, chacune sous la forme
<code>property: binding</code>, où <code>property</code> désigne la propriété de l&#8217;instance du composant,
et <code>binding</code> une propriété du DOM qui contiendra l&#8217;expression.</p>
</div>
<div class="paragraph">
<p>Par exemple, cette directive binde la propriété <code>logText</code> du DOM sur la propriété
<code>text</code> de l&#8217;instance de directive&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Directive({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">[loggable]</span><span class="delimiter">'</span></span>,
  <span class="key">inputs</span>: [<span class="string"><span class="delimiter">'</span><span class="content">text: logText</span><span class="delimiter">'</span></span>]
})
<span class="reserved">export</span> <span class="reserved">class</span> SimpleTextDirective {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si la propriété n&#8217;existe pas dans ta directive, elle est créée.
Et, à chaque fois que l&#8217;entrée est modifiée, la propriété est mise à jour automatiquement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="attribute-name">loggable</span> <span class="attribute-name">logText</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Some text</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Hello<span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux être notifié quand la propriété est modifiée, tu peux ajouter un setter à ta directive.
Le <em>setter</em> sera appelé lors de chaque modification de la propriété <code>logText</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Directive({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">[loggable]</span><span class="delimiter">'</span></span>,
  <span class="key">inputs</span>: [<span class="string"><span class="delimiter">'</span><span class="content">text: logText</span><span class="delimiter">'</span></span>]
})
<span class="reserved">export</span> <span class="reserved">class</span> SimpleTextWithSetterDirective {

  set text(value) {
    console.log(value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ainsi, si on l&#8217;utilise&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="attribute-name">loggable</span> <span class="attribute-name">logText</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Some text</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Hello<span class="tag">&lt;/div&gt;</span>
// our directive will log &quot;Some text&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il y a également une autre façon de faire que l&#8217;on verra dans quelques minutes.</p>
</div>
<div class="paragraph">
<p>Ici, le texte est statique, mais il pourrait évidemment être une valeur dynamique,
avec une interpolation&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="attribute-name">loggable</span> <span class="attribute-name">logText</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">{{expression}}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Hello<span class="tag">&lt;/div&gt;</span>
// our directive will log the value of 'expression' in the component</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou avec la syntaxe crochets&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="attribute-name">loggable</span> <span class="error">[</span><span class="attribute-name">logText</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">expression</span><span class="error">&quot;</span><span class="tag">&gt;</span>Hello<span class="tag">&lt;/div&gt;</span>
// our directive will log the value of 'expression' in the component</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est un des chouettes avantages de la nouvelle syntaxe de template&#160;:
en tant que développeur de composant, tu n&#8217;as pas à te préoccuper de la façon
dont ton composant sera utilisé, tu définis juste quelles propriétés peuvent
être bindées (si tu as écris un peu d&#8217;AngularJS&#160;1.x, tu sais que c&#8217;était
différent avec les notations <code>@</code> et <code>=</code>).</p>
</div>
<div class="paragraph">
<p>Tu peux aussi utiliser des <em>pipes</em> dans tes bindings&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="attribute-name">loggable</span> <span class="error">[</span><span class="attribute-name">logText</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">expression</span> <span class="error">|</span> <span class="attribute-name">uppercase</span><span class="error">&quot;</span><span class="tag">&gt;</span>Hello<span class="tag">&lt;/div&gt;</span>
// our directive will log the value of 'expression' in the component in uppercase</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux binder une propriété du DOM sur un attribut de ta directive qui porte
le même nom, tu peux écrire simplement <code>property</code> au lieu de <code>property: binding</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Directive({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">[loggable]</span><span class="delimiter">'</span></span>,
  <span class="key">inputs</span>: [<span class="string"><span class="delimiter">'</span><span class="content">logText</span><span class="delimiter">'</span></span>]
})
<span class="reserved">export</span> <span class="reserved">class</span> SameNameInputDirective {

  set logText(value) {
    console.log(value);
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="attribute-name">loggable</span> <span class="attribute-name">logText</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Hello<span class="tag">&lt;/div&gt;</span>
// our directive will log &quot;Hello&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il y a une autre façon de déclarer une entrée dans ta directive&#160;: avec le décorateur <code>@Input</code>.
Je l&#8217;aime bien, alors beaucoup d&#8217;exemples vont désormais l&#8217;utiliser,
mais tu es libre d&#8217;utiliser la façon que tu préfères.</p>
</div>
<div class="paragraph">
<p>Les exemples ci-dessus peuvent être ainsi réécrits&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Directive({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">[loggable]</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> InputDecoratorDirective {

  <span class="error">@</span>Input(<span class="string"><span class="delimiter">'</span><span class="content">logText</span><span class="delimiter">'</span></span>) text: string;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou, si la propriété et le binding ont le même nom&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Directive({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">[loggable]</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> SameNameInputDecoratorDirective {

  <span class="error">@</span>Input() logText: string;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela va fonctionner mais avoir un champ et un setter avec le même nom va faire crier le compilateur TypeScript.
Une façon de réparer cela (si vous avez besoin du setter, ce qui n&#8217;est pas toujours le cas)
est d&#8217;utiliser le décorateur <code>@Input</code> directement sur le setter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Directive({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">[loggable]</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> InputDecoratorOnSetterDirective {

  <span class="error">@</span>Input(<span class="string"><span class="delimiter">'</span><span class="content">logText</span><span class="delimiter">'</span></span>)
  set text(value) {
    console.log(value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>et si le setter et le binding ont le même nom&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Directive({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">[loggable]</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> SameNameInputDecoratorOnSetterDirective {

  <span class="error">@</span>Input()
  set logText(value) {
    console.log(value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les entrées sont parfaites pour passer des données d&#8217;un élément supérieur
à un élément inférieur. Par exemple, si tu veux avoir un composant affichant
une liste de poneys, il est probable que tu auras un composant supérieur
contenant la liste, et un autre composant inférieur affichant un poney&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-pony</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;div&gt;</span>{{pony.name}}<span class="tag">&lt;/div&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PonyComponent {
  <span class="error">@</span>Input() pony: Pony;
}

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-ponies</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;h2&gt;</span>Ponies<span class="tag">&lt;/h2&gt;</span>
    // the pony is handed to PonyComponent via [pony]=&quot;currentPony&quot;
    <span class="tag">&lt;ns-pony</span> <span class="error">*</span><span class="attribute-name">ngFor</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">let currentPony of ponies</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="attribute-name">pony</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">currentPony</span><span class="error">&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/ns-pony&gt;</span>
  <span class="tag">&lt;/div&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PoniesComponent {
  <span class="key">ponies</span>: Array&lt;Pony&gt; = [
    { <span class="key">id</span>: <span class="integer">1</span>, <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span> },
    { <span class="key">id</span>: <span class="integer">2</span>, <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Pinkie Pie</span><span class="delimiter">'</span></span> }
  ];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>OK, et maintenant, comment passe-t-on des données vers le haut&#160;?
On ne peut pas utiliser des propriétés pour passer des données de <code>PonyComponent</code> vers
<code>PoniesComponent</code>. Mais on peut utiliser des événements&#160;!</p>
</div>
</div>
<div class="sect3">
<h4 id="_sorties">12.2.3. Sorties</h4>
<div class="paragraph">
<p>Retournons à notre exemple précédent, et disons que nous voudrions sélectionner
un poney en cliquant dessus, et en informer le composant parent. Pour cela,
on utilisera un événement spécifique.</p>
</div>
<div class="paragraph">
<p>C&#8217;est quelque chose de fondamental.
En Angular&#160;2, les données entrent dans un composant via des propriétés, et en
sortent via des événements.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag b2d3146ab1c737802272ce242b4e2831" width="200" height="252">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag f3776dea4cf8c16bebf34e8f01246e3f" width="220" height="252">
</div>
</div>
<div class="paragraph">
<p>Tu te rappelles du dernier chapitre sur la programmation réactive&#160;?
Cool, parce que ça va devenir très utile&#160;!
Les événements spécifiques sont émis grâce à un <code>EventEmitter</code>,
et doivent être déclarés dans le décorateur, via l&#8217;attribut <code>outputs</code>.
Comme l&#8217;attribut <code>inputs</code>, il accepte un tableau contenant la liste des
événements que ta directive ou ton composant peut déclencher.</p>
</div>
<div class="paragraph">
<p>Disons qu&#8217;on veut émettre un événement appelé <code>ponySelected</code>.
Il y aura trois étapes à réaliser&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>déclarer la sortie dans le décorateur&#160;;</p>
</li>
<li>
<p>créer un <code>EventEmitter</code>&#160;;</p>
</li>
<li>
<p>et émettre un événement quand le poney est sélectionné.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-pony</span><span class="delimiter">'</span></span>,
  <span class="key">inputs</span>: [<span class="string"><span class="delimiter">'</span><span class="content">pony</span><span class="delimiter">'</span></span>],
  <span class="comment">// we declare the custom event as an output</span>
  <span class="key">outputs</span>: [<span class="string"><span class="delimiter">'</span><span class="content">ponySelected</span><span class="delimiter">'</span></span>],
  <span class="comment">// the method `selectPony()` will be called on click</span>
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;div</span> <span class="error">(</span><span class="attribute-name">click</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">selectPony</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>{{pony.name}}<span class="tag">&lt;/div&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> SelectablePonyComponent {
  <span class="key">pony</span>: Pony;
  <span class="comment">// the EventEmitter is used to emit the event</span>
  ponySelected: EventEmitter&lt;Pony&gt; = <span class="keyword">new</span> EventEmitter&lt;Pony&gt;();

  <span class="comment">/**
   * Selects a pony when the component is clicked.
   * Emits a custom event.
   */</span>
  selectPony() {
    <span class="local-variable">this</span>.ponySelected.emit(<span class="local-variable">this</span>.pony);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour l&#8217;utiliser dans le template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ns-pony</span> <span class="error">[</span><span class="attribute-name">pony</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">pony</span><span class="error">&quot;</span> <span class="error">(</span><span class="attribute-name">ponySelected</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">betOnPony</span><span class="error">(</span><span class="error">$</span><span class="attribute-name">event</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/ns-pony&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans l&#8217;exemple ci-dessus, chaque fois que l&#8217;utilisateur clique sur le nom d&#8217;un poney,
un événement <code>ponySelected</code> est émis, avec le poney qui en constitue la valeur
(le paramètre de la méthode <code>emit()</code>).
Le composant parent écoute cet événement, comme tu peux le voir dans le template,
et il appellera sa méthode <code>betOnPony</code> avec la valeur de l&#8217;événement <code>$event</code>.
<code>$event</code> est la syntaxe qui doit être utilisée pour accéder à l&#8217;événement déclenché&#160;:
dans notre cas, ce sera un poney.</p>
</div>
<div class="paragraph">
<p>Le composant parent doit ensuite implémenter une méthode <code>betOnPony()</code>, qui sera appelée
avec le poney sélectionné&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">betOnPony(pony) {
  <span class="comment">// do something with the pony</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux, tu peux définir un nom d&#8217;événement différent de celui choisi par
l&#8217;émetteur, avec la syntaxe <code>emitter: event</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-pony</span><span class="delimiter">'</span></span>,
  <span class="key">inputs</span>: [<span class="string"><span class="delimiter">'</span><span class="content">pony</span><span class="delimiter">'</span></span>],
  <span class="comment">// the emitter is called `emitter`</span>
  <span class="comment">// and the event `ponySelected`</span>
  <span class="key">outputs</span>: [<span class="string"><span class="delimiter">'</span><span class="content">emitter: ponySelected</span><span class="delimiter">'</span></span>],
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;div</span> <span class="error">(</span><span class="attribute-name">click</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">selectPony</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>{{pony.name}}<span class="tag">&lt;/div&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> OtherSelectablePonyComponent {
  <span class="key">pony</span>: Pony;
  emitter: EventEmitter&lt;Pony&gt; = <span class="keyword">new</span> EventEmitter&lt;Pony&gt;();

  selectPony() {
    <span class="local-variable">this</span>.emitter.emit(<span class="local-variable">this</span>.pony);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme pour les <code>inputs</code>, il est possible d&#8217;utiliser un décorateur pour déclarer un événement.
De nouveau, j&#8217;aime l&#8217;utiliser, mais fais le choix qui te convient.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-pony</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;div</span> <span class="error">(</span><span class="attribute-name">click</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">selectPony</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>{{pony.name}}<span class="tag">&lt;/div&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> SelectablePonyWithDecoratorComponent {
  <span class="error">@</span>Input() pony: Pony;
  <span class="error">@</span>Output() ponySelected: EventEmitter&lt;Pony&gt; = <span class="keyword">new</span> EventEmitter&lt;Pony&gt;();

  selectPony() {
    <span class="local-variable">this</span>.ponySelected.emit(<span class="local-variable">this</span>.pony);
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cycle_de_vie">12.2.4. Cycle de vie</h4>
<div class="paragraph">
<p>Tu peux avoir besoin que ta directive réagisse à certains moments de sa vie.</p>
</div>
<div class="paragraph">
<p>C&#8217;est un sujet plutôt avancé, et tu n&#8217;en auras pas besoin tous les jours, alors je vais aller vite.</p>
</div>
<div class="paragraph">
<p>Il y a cependant un point important à comprendre,
qui te sauvera pas mal de temps si tu l&#8217;intègres bien&#160;:
<strong>les entrées d&#8217;un composant ne sont pas encore évaluées dans son constructeur</strong>.</p>
</div>
<div class="paragraph">
<p>Cela signifie qu&#8217;un composant comme celui-ci ne fonctionnera pas&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Directive({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">[undefinedInputs]</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> UndefinedInputsDirective {

  <span class="error">@</span>Input() pony: string;

  constructor() {
    console.log(<span class="error">`</span>inputs are <span class="predefined">$</span>{<span class="local-variable">this</span>.pony}<span class="error">`</span>);
    <span class="comment">// will log &quot;inputs are undefined&quot;, always</span>
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux accéder à la valeur d&#8217;une entrée,
pour par exemple charger des données complémentaires depuis un serveur,
il te faudra utiliser une phase du cycle de vie.</p>
</div>
<div class="paragraph">
<p>Il y a plusieurs phases accessibles, chacune avec ses spécificités propres&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ngOnChanges</code> sera la première appelée quand la valeur d&#8217;une propriété bindée est modifiée.
Elle recevra une map <code>changes</code>, contenant les valeurs courante et précédente du binding,
emballées dans un <code>SimpleChange</code>.
Elle ne sera pas appelée s&#8217;il n&#8217;y a pas de changement.</p>
</li>
<li>
<p><code>ngOnInit</code> sera appelée une seule fois après le premier changement (alors que <code>ngOnChanges</code> est appelée à chaque changement).
Cela en fait la phase parfaite pour du travail d&#8217;initialisation, comme son nom le laisse à penser.</p>
</li>
<li>
<p><code>ngOnDestroy</code> est appelée quand le composant est supprimé.
Utile pour y faire du nettoyage.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>D&#8217;autres phases sont disponibles, mais pour des cas d&#8217;usage plus avancés&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ngDoCheck</code> est légèrement différente. Si elle est présente, elle sera appelée à chaque cycle de détection de changements,
redéfinissant l&#8217;algorithme par défaut de détection, qui inspecte les différences pour chaque valeur de propriété bindée.
Cela signifie que si une propriété au moins est modifiée, le composant est considéré modifié par défaut,
et ses enfants seront inspectés et réaffichés.
Mais tu peux redéfinir cela si tu sais que la modification de certaines entrées n&#8217;a pas de conséquence.
Cela peut être utile si tu veux accélérer le cycle de détection de changements en n&#8217;inspectant que le minimum,
mais en règle générale tu ne devrais pas avoir à le faire.</p>
</li>
<li>
<p><code>ngAfterContentInit</code> est appelée quand tous les bindings du composant ont été vérifiés pour la première fois.</p>
</li>
<li>
<p><code>ngAfterContentChecked</code> est appelée quand tous les bindings du composant ont été vérifiés,
même s&#8217;ils n&#8217;ont pas changé.</p>
</li>
<li>
<p><code>ngAfterViewInit</code> est appelée quand tous les bindings des directives enfants ont été vérifiés pour la première fois.</p>
</li>
<li>
<p><code>ngAfterViewChecked</code> est appelée quand tous les bindings des directives enfants ont été vérifiés,
même s&#8217;ils n&#8217;ont pas changé.
Cela peut être utile si ton composant attend quelque chose de ses composants enfants.
Comme <code>ngAfterViewInit</code>, cela n&#8217;a de sens que pour un composant (une directive n&#8217;a pas de vue).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Notre exemple précédent fonctionnera mieux en utilisant <code>ngOnInit</code>.
Angular&#160;2 appelle la méthode <code>ngOnInit()</code> si elle est présente,
pour que tu n&#8217;aies qu&#8217;à l&#8217;implémenter dans ta directive.
Si tu utilises TypeScript pour écrire ton application, tu peux bénéficier de
l&#8217;interface <code>OnInit</code> qui t&#8217;oblige à implémenter cette méthode&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Directive({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">[initDirective]</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> OnInitDirective <span class="reserved">implements</span> OnInit {

  <span class="error">@</span>Input() pony: string;

  ngOnInit() {
    console.log(<span class="error">`</span>inputs are <span class="predefined">$</span>{<span class="local-variable">this</span>.pony}<span class="error">`</span>);
    <span class="comment">// inputs are not undefined \o/</span>
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant on a accès à nos entrées&#160;!</p>
</div>
<div class="paragraph">
<p>Si tu veux faire un truc lors de chaque changement de la propriété, utilise <code>ngOnChanges</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Directive({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">[changeDirective]</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> OnChangesDirective <span class="reserved">implements</span> OnChanges {

  <span class="error">@</span>Input() pony: string;

  ngOnChanges(changes: SimpleChanges) {
    let ponyValue = changes[<span class="string"><span class="delimiter">'</span><span class="content">pony</span><span class="delimiter">'</span></span>];
    console.log(<span class="error">`</span>changed from <span class="predefined">$</span>{ponyValue.previousValue} to <span class="predefined">$</span>{ponyValue.currentValue}<span class="error">`</span>);
    console.log(<span class="error">`</span>is it the first change? <span class="predefined">$</span>{ponyValue.isFirstChange()}<span class="error">`</span>);
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le paramètre <code>changes</code> est une map, dont les clés sont les noms de bindings,
et les valeurs un objet <code>SimpleChange</code> avec deux attributs (la valeur précédente et la valeur courante),
ainsi qu&#8217;une méthode <code>isFirstChange()</code> afin de savoir si c&#8217;est le premier changement.</p>
</div>
<div class="paragraph">
<p>Tu peux aussi utiliser un <em>setter</em> si tu veux réagir sur le changement d&#8217;un seul de tes bindings.
L&#8217;exemple suivant produira le même affichage que le précédent.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Directive({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">[setterDirective]</span><span class="delimiter">'</span></span>,
  <span class="key">inputs</span>: [<span class="string"><span class="delimiter">'</span><span class="content">pony</span><span class="delimiter">'</span></span>]
})
<span class="reserved">export</span> <span class="reserved">class</span> SetterDirective {

  <span class="reserved">private</span> ponyModel: string;

  set pony(newPony) {
    console.log(<span class="error">`</span>changed from <span class="predefined">$</span>{<span class="local-variable">this</span>.ponyModel} to <span class="predefined">$</span>{newPony}<span class="error">`</span>);
    <span class="local-variable">this</span>.ponyModel = newPony;
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ngOnChanges</code> est encore plus pratique si tu dois surveiller plusieurs bindings en même temps.
Elle ne sera invoquée que si au moins un binding a changé,
et elle ne contiendra que les propriétés modifiées.</p>
</div>
<div class="paragraph">
<p>La phase <code>ngOnDestroy</code> est parfaite pour nettoyer le composant. Par exemple, pour
y annuler les tâches de fond.
Ici <code>OnDestroyDirective</code> trace "hello" toute les secondes quand elle est créée.
Quand le composant sera supprimé de la page, on veut arrêter le <code>setInterval</code> pour
éviter des fuites mémoire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Directive({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">[destroyDirective]</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> OnDestroyDirective <span class="reserved">implements</span> OnDestroy {

  <span class="key">sayHello</span>: number;

  constructor() {
    <span class="local-variable">this</span>.sayHello = window.setInterval(() =&gt; console.log(<span class="string"><span class="delimiter">'</span><span class="content">hello</span><span class="delimiter">'</span></span>), <span class="integer">1000</span>);
  }

  ngOnDestroy() {
    window.clearInterval(<span class="local-variable">this</span>.sayHello);
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu ne fais pas cela, tu auras un thread traçant "hello" jusqu&#8217;à la fin de l&#8217;application (ou son plantage)&#8230;&#8203;</p>
</div>
</div>
<div class="sect3">
<h4 id="_providers">12.2.5. Providers</h4>
<div class="paragraph">
<p>On a déjà parlé des providers dans le
<a href="#dependency-injection">chapitre Injection de dépendances</a>
.
Cet attribut permet de déclarer des services qui seront injectables dans la directive courante
et ses enfants.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Directive({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">[providersDirective]</span><span class="delimiter">'</span></span>,
  <span class="key">providers</span>: [PoniesService]
})
<span class="reserved">export</span> <span class="reserved">class</span> ProvidersDirective {

  constructor(poniesService: PoniesService) {
    let ponies = poniesService.list();
    console.log(<span class="error">`</span>ponies are: <span class="predefined">$</span>{ponies}<span class="error">`</span>);
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_composants">12.3. Composants</h3>
<div class="paragraph">
<p>Un composant n&#8217;est pas vraiment différent d&#8217;une directive&#160;:
il a simplement deux attributs supplémentaires, optionnels, et <strong>doit</strong> avoir
une vue associée.
Il n&#8217;apporte pas beaucoup d&#8217;attributs nouveaux comparés à la directive.</p>
</div>
<div class="sect3">
<h4 id="_providers_limités_à_la_vue">12.3.1. Providers limités à la vue</h4>
<div class="paragraph">
<p>On a vu que tu peux spécifier les services injectables via <code>providers</code>.
<code>viewProviders</code> est similaire, mais les providers donnés ne seront disponibles
que dans la vue du composant courant, pas dans ses enfants.</p>
</div>
</div>
<div class="sect3">
<h4 id="_template_url_de_template">12.3.2. Template / URL de template</h4>
<div class="paragraph">
<p>La caractéristique principale d&#8217;un <code>@Component</code> est d&#8217;avoir un template,
alors qu&#8217;une directive n&#8217;en a pas.
Tu peux soit déclarer ton template en ligne, avec l&#8217;attribut <code>template</code>, ou
utiliser une URL pour le placer dans un fichier séparé avec <code>templateURL</code>
(mais tu ne peux pas définir les deux simultanément).</p>
</div>
<div class="paragraph">
<p>En règle générale, si ton template est petit (1-2 lignes),
c&#8217;est parfaitement acceptable de le garder en ligne.
Quand il commence à grossir, le déplacer dans son propre fichier est une bonne
façon d&#8217;éviter l&#8217;encombrement de ton composant.</p>
</div>
<div class="paragraph">
<p>Tu peux utiliser des chemins absolus pour ton URL, ou un relatif, ou même une URL HTTP complète.</p>
</div>
<div class="paragraph">
<p>Quand le composant est chargé, Angular&#160;2 résout l&#8217;URL et essaye de charger le template.
S&#8217;il y parvient, le template deviendra le <em>Shadow Root</em> du composant, et ses expressions seront évaluées.</p>
</div>
<div class="paragraph">
<p>Si j&#8217;ai un gros composant, je place en général le template dans un fichier séparé du même répertoire,
et j&#8217;utilise une URL relative pour le charger.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-templated-pony</span><span class="delimiter">'</span></span>,
  <span class="key">templateUrl</span>: <span class="string"><span class="delimiter">'</span><span class="content">components/pony/templated-pony.html</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> TemplatedPonyComponent {
  <span class="error">@</span>Input() pony: any;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu utilises une URL relative, l&#8217;URL sera résolue en utilisant l&#8217;URL de la base de ton application.
Cette URL peut être un peu lourde, car si ton composant est dans un répertoire <code>components/pony</code>,
ton URL de template sera <code>components/pony/pony.html</code>.</p>
</div>
<div class="paragraph">
<p>Mais tu peux faire légèrement mieux si tu packages ton application avec des modules CommonJS,
en utilisant la propriété <code>moduleId</code>.
Sa valeur doit être <code>module.id</code>, une valeur qui sera remplacée par CommonJS a l&#8217;éxecution.
Angular&#160;2 peut alors utiliser cette valeur et construire l&#8217;URL relative correcte.
Ton URL de template ressemble alors à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-templated-pony</span><span class="delimiter">'</span></span>,
  <span class="key">templateUrl</span>: <span class="string"><span class="delimiter">'</span><span class="content">templated-pony.html</span><span class="delimiter">'</span></span>,
  <span class="key">moduleId</span>: module.id
})
<span class="reserved">export</span> <span class="reserved">class</span> ModuleIdPonyComponent {
  <span class="error">@</span>Input() pony: any;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et tu peux maintenant mettre ton template dans le même dossier que ton composant&#160;!</p>
</div>
<div class="paragraph">
<p>Encore mieux: si tu utilises Webpack, avec un peu de configuration
(déjà faite pour toi par angular-cli), tu peux carrément enlever <code>module.id</code> et utiliser un chemin relatif directement.
Webpack génèrera le chemin absolu pour toi&#160;!</p>
</div>
</div>
<div class="sect3">
<h4 id="_styles_url_de_styles">12.3.3. Styles / URL de styles</h4>
<div class="paragraph">
<p>Tu peux aussi définir les styles de ton composant.
C&#8217;est particulièrement utile si tu comptes faire des composants vraiment isolés.
Tu peux spécifier cela avec <code>styles</code> ou <code>styleUrls</code>.</p>
</div>
<div class="paragraph">
<p>Comme tu peux le voir ci-dessous, l&#8217;attribut <code>styles</code> reçoit un tableau de règles
CSS sous forme de chaînes de caractères. Comme tu peux l&#8217;imaginer, elles deviennent
vite énormes, alors utiliser un fichier séparé et <code>styleUrls</code> est une bonne idée.
Comme le nom le laisse deviner, tu peux y indiquer un tableau d&#8217;URLs.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-styled-pony</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="string"><span class="delimiter">'</span><span class="content">&lt;div class=&quot;pony&quot;&gt;{{pony.name}}&lt;/div&gt;</span><span class="delimiter">'</span></span>,
  <span class="key">styles</span>: [<span class="string"><span class="delimiter">'</span><span class="content">.pony{ color: red; }</span><span class="delimiter">'</span></span>]
})
<span class="reserved">export</span> <span class="reserved">class</span> StyledPonyComponent {
  <span class="error">@</span>Input() pony: any;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_déclarations">12.3.4. Déclarations</h4>
<div class="paragraph">
<p>Rappelle-toi qu&#8217;il te faut déclarer dans les <code>declarations</code> de ton <code>@NgModule</code> chaque directive et composant que tu utilises.
Si tu ne le fais pas, ton composant ne sera pas déclenché par le template,
et tu perdras beaucoup de temps à comprendre pourquoi.</p>
</div>
<div class="paragraph">
<p>Les deux erreurs les plus fréquentes sont <strong>oublier de déclarer les directives</strong>
et <strong>définir le mauvais sélecteur</strong>.
Si un jour tu ne comprends pas pourquoi rien ne se passe, il serait de bon goût
de vérifier cela&#160;!</p>
</div>
<div class="paragraph">
<p>Nous avons laissé de côté deux ou trois points pour l&#8217;instant, comme les requêtes, les detections de changements,
les exports, les options d&#8217;encapsulation, etc&#8230;&#8203;
Comme ce sont des options plus avancées, tu n&#8217;en auras pas besoin immédiatement,
mais ne t&#8217;inquiète pas, nous les verrons bientôt dans un chapitre dédié aux sujets avancés&#160;!</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="styles">13. Style des composants et encapsulation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Faisons une pause pour parler un peu style et CSS quelques instants.
Oh nooOon, mais pourquoi parler de CSS&#160;?!
Parce qu&#8217;Angular&#160;2 fait beaucoup pour nous sur ce sujet.</p>
</div>
<div class="paragraph">
<p>En tant que développeur web, tu ajoutes souvent des classes CSS sur tes éléments.
Et l&#8217;essence même de CSS, c&#8217;est que ce style va <em>cascader</em> (rappelons que CSS signifie <em>Cascading Style Sheet</em>).
C&#8217;est souvent un comportement voulu (pour par exemple changer la police globalement dans toute l&#8217;application),
mais des fois non.
Imaginons que tu veux ajouter un style sur l&#8217;élément sélectionné d&#8217;une liste&#160;:
tu vas probablement utiliser un sélecteur CSS très restreint, comme <code>li.selected</code>.
Ou encore plus restreint, en utilisant une convention comme <a href="http://getbem.com/introduction/">BEM</a>,
parce que tu veux styler l&#8217;élément sélectionné dans une partie bien spécifique de ton application.</p>
</div>
<div class="paragraph">
<p>Et sur ce point Angular&#160;2 peut se rendre utile.
Les styles que tu définis dans un composant (soit dans l&#8217;attribut <code>styles</code>,
soit dans un fichier CSS dédié avec <code>styleUrls</code>)
sont limités par Angular à ce composant et seulement celui-ci.
Cela s&#8217;appelle l&#8217;encapsulation de style (<em>style encapsulation</em>).
Mais comment est-ce possible&#160;?</p>
</div>
<div class="paragraph">
<p>Tout commence par l&#8217;écriture d&#8217;un style.
Ensuite, cela dépend de la stratégie que tu auras choisie pour l&#8217;attribut <code>encapsulation</code>
du décorateur du composant. Cet attribut peut prendre trois valeurs&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ViewEncapsulation.Emulated</code>, qui est la valeur par défaut&#160;;</p>
</li>
<li>
<p><code>ViewEncapsulation.Native</code>, qui s&#8217;appuie sur le <em>Shadow DOM</em>&#160;;</p>
</li>
<li>
<p><code>ViewEncapsulation.None</code>, qui signifie que tu ne veux pas d&#8217;encapsulation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Chaque valeur va évidemment engendrer un comportement différent.
Prenons par exemple notre composant <code>PonyComponent</code>, que tu dois commencer à bien connaître.
C&#8217;est une version simplifiée, affichant seulement le nom du poney dans une <code>div</code>.
Pour l&#8217;exemple, ajoutons une classe CSS <code>red</code> à cette <code>div</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component, ViewEncapsulation } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-pony</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">red</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>{{name}}<span class="tag">&lt;/div&gt;</span><span class="error">`</span>,
  <span class="key">styles</span>: [<span class="error">`</span>.red {<span class="key">color</span>: red;}<span class="error">`</span>],
  <span class="comment">// that's the same as the default mode</span>
  <span class="key">encapsulation</span>: ViewEncapsulation.Emulated
})
<span class="reserved">export</span> <span class="reserved">class</span> PonyComponent {

  <span class="key">name</span>: string = <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span>;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette classe est ensuite utilisée dans les styles du composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="class">.red</span> {
  <span class="key">color</span>: <span class="value">red</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, on veut afficher le nom du poney avec une police rouge.</p>
</div>
<div class="sect2">
<h3 id="_stratégie_em_native_em">13.1. Stratégie <em>Native</em></h3>
<div class="paragraph">
<p>Si tu utilises la stratégie <code>Native</code>,
tu demandes à Angular&#160;2 d&#8217;utiliser le <em>Shadow DOM</em> du navigateur pour assurer l&#8217;encapsulation.
Le <em>Shadow DOM</em> fait partie de la spécification récente des Web Component.
Cette spécification permet de créer des éléments dans un DOM spécial, parfaitement encapsulé.
Avec cette stratégie, si on inspecte le DOM généré dans notre navigateur, on y verra&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;ns-pony&gt;</span>
  #shadow-root (open)
    <span class="tag">&lt;style&gt;</span><span class="inline"><span class="class">.red</span> {<span class="key">color</span>: <span class="value">red</span>}</span><span class="tag">&lt;/style&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">red</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Rainbow Dash<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/ns-pony&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux y repérer <code>#shadow-root (open)</code> que Chrome affiche dans l&#8217;inspecteur&#160;:
c&#8217;est parce que notre composant à été ajouté dans un élément du <em>Shadow DOM</em>&#160;!
Et on peut aussi voir que notre style a été ajouté en tête du contenu du composant.</p>
</div>
<div class="paragraph">
<p>Avec la stratégie <code>Native</code>, tu peux être sûr que les styles de ton composant ne
vont pas "transpirer" sur tes composants enfants.
Si nous avions un autre composant à l&#8217;intérieur de <code>PonyComponent</code>,
il pourrait aussi définir sa propre classe CSS <code>red</code> avec un style différent&#160;:
tu serais sûr que le bon serait utilisé, sans confusion entre eux&#160;!</p>
</div>
<div class="paragraph">
<p>Mais rappelle-toi, le <em>Shadow DOM</em> est une spécification vraiment récente,
qui n&#8217;est pas encore disponible dans tous les navigateurs.
Tu peux en vérifier la disponibilité sur le merveilleux site <a href="http://caniuse.com/#feat=shadowdom">caniuse.com</a>.
Alors sois prudent quand tu l&#8217;utilises dans tes applications&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_stratégie_em_emulated_em_émulée">13.2. Stratégie <em>Emulated</em> ("émulée")</h3>
<div class="paragraph">
<p>Comme je le disais précédemment, c&#8217;est la stratégie par défaut.
Et la raison en est simple&#160;:
elle émule (d&#8217;où le nom) la stratégie <code>Native</code>, mais sans utiliser le <em>Shadow DOM</em>.
Elle peut donc être utilisée partout, et aura le même comportement.</p>
</div>
<div class="paragraph">
<p>Pour y parvenir, Angular&#160;2 va <em>inliner</em> le CSS que nous définirons dans le <code>&lt;head&gt;</code> de la page
(et non pas dans chaque composant comme on l&#8217;a vu avec la stratégie <em>Native</em>).
Mais avant de l'<em>inliner</em>, Angular va réécrire le sélecteur CSS, pour lui ajouter un attribut identifiant unique.
Cet attribut unique sera ensuite ajouté sur tous les éléments du template du composant&#160;!
Comme ceci, le style s&#8217;appliquera sur notre composant uniquement.
Le même exemple donnerait donc ceci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;html&gt;</span>
  <span class="tag">&lt;head&gt;</span>
    <span class="tag">&lt;style&gt;</span><span class="inline"><span class="class">.red</span>[<span class="attribute-name">_ngcontent-dvb-3</span>] {<span class="key">color</span>: <span class="value">red</span>}</span><span class="tag">&lt;/style&gt;</span>
  <span class="tag">&lt;/head&gt;</span>
  <span class="tag">&lt;body&gt;</span>
    ...
    <span class="tag">&lt;ns-pony</span> <span class="attribute-name">_ngcontent-dvb-2</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">_nghost-dvb-3</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;div</span> <span class="attribute-name">_ngcontent-dvb-3</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">red</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Rainbow Dash<span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;/ns-pony&gt;</span>
  <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Le sélecteur de classe <code>red</code> a été réécrit en <code>.red[_ngcontent-dvb-3]</code>,
alors il ne s&#8217;appliquera que sur les éléments qui auront à la fois la classe <code>red</code>
et l&#8217;attribut <code>_ngcontent-dvb-3</code>.
Tu peux aussi vérifier que cet attribut a bien été ajouté automatiquement à notre <code>div</code>,
pour que tout fonctionne parfaitement.
L&#8217;élément <code>&lt;ns-pony&gt;</code> a aussi quelques attributs&#160;:
<code>_ngcontent-dvb-2</code> qui est l&#8217;identifiant unique généré pour son parent,
et <code>_nghost-dvb-3</code> qui est l&#8217;identifiant unique de l&#8217;élément hôte lui-même.
Oui, parce que l&#8217;on peut aussi ajouter des styles sur l&#8217;élément hôte, comme nous le verrons bientôt.</p>
</div>
</div>
<div class="sect2">
<h3 id="_stratégie_em_none_em_aucune">13.3. Stratégie <em>None</em> ("aucune")</h3>
<div class="paragraph">
<p>Cette stratégie ne réalise aucune encapsulation.
Les styles seront <em>inlinés</em> en haut de la page
(comme pour la stratégie <code>Emulated</code>), mais ne seront pas réécrits.
Ils se comporteront donc comme des styles "normaux", qui cascaderont sur les enfants.</p>
</div>
</div>
<div class="sect2">
<h3 id="_style_l_hôte">13.4. Style l&#8217;hôte</h3>
<div class="paragraph">
<p>Un sélecteur CSS spécial existe pour styler spécifiquement l&#8217;élément hôte.
Il s&#8217;appelle <code>:host</code>, et il vient de la spécification des Web Components&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="pseudo-class">:host</span> {
  <span class="key">display</span>: <span class="value">block</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il sera conservé tel quel avec la stratégie <code>Native</code>, comme dans la spécification du <em>Shadow DOM</em>,
ou sera réécrit en <code>[_nghost-xxx]</code> si tu utilises <code>Emulated</code>.</p>
</div>
<div class="paragraph">
<p>Pour conclure, il n&#8217;y a pas grand chose à faire pour avoir des styles parfaitement encapsulés,
car la stratégie <code>Emulated</code> fait tout le boulot pour nous.
Tu peux basculer sur la stratégie <code>Native</code> si tu ne cibles que des navigateurs spécifiques,
ou sur <code>None</code> si tu n&#8217;as pas besoin d&#8217;encapsuler tes styles.
Cette stratégie peut se définir au sein de chaque composant,
ou globalement pour l&#8217;application complète dans le module racine.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="services">14. Services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Angular&#160;2 propose le concept de services&#160;: des classes que tu peux injecter dans une autre.</p>
</div>
<div class="paragraph">
<p>Quelques services sont fournis par le framework, certains par les modules communs,
et tu peux en construire d&#8217;autres.
On verra ceux fournis par les modules communs dans un chapitre dédié,
alors jetons d&#8217;abord un œil à ceux fournis par le framework,
et découvrons comment on peut créer les nôtres.</p>
</div>
<div class="sect2">
<h3 id="_service_title">14.1. Service Title</h3>
<div class="paragraph">
<p>Le cœur du framework fournit vraiment peu de services, et encore moins que tu utiliseras
réellement dans tes applications.
Je dis peu, mais en fait, ce n&#8217;est même qu&#8217;un seul :).</p>
</div>
<div class="paragraph">
<p>Une question qui revient souvent est comment modifier le titre de ma page&#160;?
Facile&#160;! Il y a un service <code>Title</code> que tu peux t&#8217;injecter,
et il propose un getter et un setter&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { Title } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/platform-browser</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ponyracer-app</span><span class="delimiter">'</span></span>,
  <span class="key">viewProviders</span>: [Title],
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;h1&gt;</span>PonyRacer<span class="tag">&lt;/h1&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PonyRacerAppComponent {

  constructor(title: Title) {
    title.setTitle(<span class="string"><span class="delimiter">'</span><span class="content">PonyRacer - Bet on ponies</span><span class="delimiter">'</span></span>);
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le service créera automatiquement l&#8217;élément <code>title</code> dans la section <code>head</code> si besoin
et positionnera correctement la valeur&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_créer_son_propre_service">14.2. Créer son propre service</h3>
<div class="paragraph">
<p>C&#8217;est vraiment simple.
Il suffit d&#8217;écrire une classe, et voilà&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">export</span> <span class="reserved">class</span> RacesService {

  list() {
    <span class="keyword">return</span> [{ <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">London</span><span class="delimiter">'</span></span> }];
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme en AngularJS&#160;1.x, un service est un singleton, donc la même instance unique sera injectée partout.
Cela en fait le candidat idéal pour partager un état parmi plusieurs composants séparés&#160;!</p>
</div>
<div class="paragraph">
<p>Si le service a lui aussi des dépendances, alors il faut lui ajouter le décorateur <code>@Injectable()</code>.</p>
</div>
<div class="paragraph">
<p>Sans ce décorateur, le framework ne pourra pas faire l&#8217;injection de dépendances.</p>
</div>
<div class="paragraph">
<p>Plutôt que renvoyer la même liste à chaque fois,
notre <code>RacesService</code> va probablement interroger une API REST.
Pour faire une requête HTTP, le framework nous donne le service <code>Http</code>.
Ne t&#8217;inquiète pas, on verra très bientôt comment il fonctionne.</p>
</div>
<div class="paragraph">
<p>Notre service a une dépendance vers <code>Http</code> pour récupérer les courses,
nous allons donc devoir ajouter un constructeur avec le service <code>Http</code> en argument,
et ajouter le décorateur <code>@Injectable()</code> sur la classe.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Injectable } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { Http } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/http</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Injectable()
<span class="reserved">export</span> <span class="reserved">class</span> RacesServiceWithHttp {

  constructor(<span class="reserved">private</span> http: Http) {
  }

  list() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.http.get(<span class="string"><span class="delimiter">'</span><span class="content">/api/races</span><span class="delimiter">'</span></span>);
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bon c&#8217;est pas tout ça, mais il faut que l&#8217;on se penche sur les tests maintenant&#160;!</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tests">15. Tester ton application</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_tester_c_est_douter">15.1. Tester c&#8217;est douter</h3>
<div class="paragraph">
<p>J&#8217;adore les tests automatisés.
Ma vie professionnelle tourne autour de cette barre de progression qui devient verte dans mon IDE,
et me félicite d&#8217;avoir bien travaillé.
J&#8217;espère que les tests sont aussi importants pour toi, car ils sont le filet de sécurité ultime quand on écrit du code.
Rien n&#8217;est plus pénible que tester du code manuellement.</p>
</div>
<div class="paragraph">
<p>Angular&#160;2 fait du bon boulot en ce qui concerne la facilité d&#8217;écriture de tests.
AngularJS&#160;1.x était déjà très bon, et c&#8217;était une des raisons pour lesquelles j&#8217;appréciais ce framework.
Comme en AngularJS&#160;1.x, on peut écrire deux types de tests&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>tests unitaires&#160;;</p>
</li>
<li>
<p>tests <em>end-to-end</em> ("de bout en bout").</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Les premiers sont là pour affirmer qu&#8217;une petite portion de code (un composant, un service, un <em>pipe</em>) fonctionne correctement en isolation,
c&#8217;est à dire indépendamment de ses dépendances.
Ecrire un tel test unitaire demande d&#8217;exécuter chacune des méthodes d&#8217;un composant/service/<em>pipe</em>,
et de vérifier que les sorties sont celles attendues pour les entrées fournies.
On peut aussi vérifier que les dépendances utilisées par cette portion sont correctement invoquées,
par exemple qu&#8217;un service fait la bonne requête HTTP.</p>
</div>
<div class="paragraph">
<p>On peut aussi écrire des tests <em>end-to-end</em> ("de bout en bout").
Ceux-ci émulent une interaction utilisateur réelle avec ton application,
en démarrant une vraie instance et en pilotant le navigateur pour saisir des valeurs dans les champs,
cliquer sur les boutons, etc&#8230;&#8203;
On vérifiera ensuite que la page affichée contient ce qui est attendu, que l&#8217;URL est correcte, et tout ce que tu peux imaginer.</p>
</div>
<div class="paragraph">
<p>On va parler de tout cela, mais commençons par les tests unitaires.</p>
</div>
</div>
<div class="sect2">
<h3 id="_test_unitaire">15.2. Test unitaire</h3>
<div class="paragraph">
<p>Comme on l&#8217;a vu, les tests unitaires vérifient une petite portion de code en <strong>isolation</strong>.
Ces tests garantissent seulement qu&#8217;une petite partie de l&#8217;application fonctionne comme prévu,
mais ils ont de nombreux avantages&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ils sont vraiment rapides, tu peux en exécuter plusieurs centaines en quelques secondes.</p>
</li>
<li>
<p>ils sont très efficaces pour tester (quasiment) l&#8217;intégralité de ton code, et particulièrement les cas limites,
qui peuvent être difficiles à reproduire manuellement dans l&#8217;application réelle.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>L&#8217;un des concepts au cœur d&#8217;un test unitaire est celui d&#8217;isolation&#160;:
on ne veut pas que notre test soit biaisé par ses dépendances.
Alors on utilise généralement des objets bouchonnés (<em>mock</em>) comme dépendances.
Ce sont des objets factices créés juste pour les besoins du test.</p>
</div>
<div class="paragraph">
<p>Pour tout cela, on va compter sur quelques outils.
D&#8217;abord, on a besoin d&#8217;une bibliothèque pour écrire des tests.
Une des plus populaires (sinon la plus populaire) est <a href="http://jasmine.github.io/">Jasmine</a>,
on va donc utiliser celle-ci&#160;!</p>
</div>
<div class="sect3">
<h4 id="_jasmine_karma">15.2.1. Jasmine &amp; Karma</h4>
<div class="paragraph">
<p>Jasmine nous propose plusieurs méthodes pour déclarer nos tests&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>describe()</code> déclare une suite de tests (un groupe de tests)&#160;;</p>
</li>
<li>
<p><code>it()</code> déclare un test&#160;;</p>
</li>
<li>
<p><code>expect()</code> déclare une assertion.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Un test JavaScript basique ressemble à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> Pony {
  constructor(<span class="reserved">public</span> name: string, <span class="reserved">public</span> speed: number) {
  }

  isFasterThan(speed) {
    <span class="keyword">return</span> <span class="local-variable">this</span>.speed &gt; speed;
  }
}

describe(<span class="string"><span class="delimiter">'</span><span class="content">My first test suite</span><span class="delimiter">'</span></span>, () =&gt; {
  it(<span class="string"><span class="delimiter">'</span><span class="content">should construct a Pony</span><span class="delimiter">'</span></span>, () =&gt; {
    let pony: Pony = <span class="keyword">new</span> Pony(<span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span>, <span class="integer">10</span>);
    expect(pony.name).toBe(<span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span>);
    expect(pony.speed).not.toBe(<span class="integer">1</span>);
    expect(pony.isFasterThan(<span class="integer">8</span>)).toBe(<span class="predefined-constant">true</span>);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;appel à <code>expect()</code> peut être chaîné avec plein de méthodes comme <code>toBe()</code>,
<code>toBeLessThan()</code>, <code>toBeUndefined()</code>, etc&#8230;&#8203;
Chaque méthode peut être rendue négative avec l&#8217;attribut <code>not</code> de l&#8217;objet retourné par <code>expect()</code>.</p>
</div>
<div class="paragraph">
<p>Le fichier de test est un fichier séparé du code que tu veux tester,
en général avec une extension comme <code>.spec.ts</code>.</p>
</div>
<div class="paragraph">
<p>Le test d&#8217;une classe Pony écrite dans un fichier <code>pony.ts</code> sera normalement dans un fichier nommé <code>pony.spec.ts</code>.
Tu peux soit poser ce fichier de test juste à côté du fichier à tester,
soit dans un répertoire dédié contenant tous les tests.
J&#8217;ai tendance à placer le code et le test dans le même répertoire,
mais les deux approches sont parfaitement acceptables&#160;: choisis ton camp.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Une astuce&#160;: si tu utilises <code>fdescribe()</code> au lieu de <code>describe()</code>
alors cette seule suite de tests sera exécutée (le "f" ajouté signifie "focus").
Même chose si tu ne veux exécuter qu&#8217;un seul test&#160;: utilise <code>fit()</code> au lieu de <code>it()</code>.
Si tu veux exclure un test, utilise <code>xit()</code>, ou <code>xdescribe()</code> pour une suite de tests.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Tu peux aussi utiliser la méthode <code>beforeEach()</code> pour initialiser un contexte avec chaque test.
Si j&#8217;ai plusieurs tests sur le même poney,
il est préférable d&#8217;utiliser <code>beforeEach()</code> pour initialiser ce poney,
plutôt que copier/coller le même morceau de code dans tous les tests.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">describe(<span class="string"><span class="delimiter">'</span><span class="content">Pony</span><span class="delimiter">'</span></span>, () =&gt; {
  let pony: Pony;

  beforeEach(() =&gt; {
    pony = <span class="keyword">new</span> Pony(<span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span>, <span class="integer">10</span>);
  });

  it(<span class="string"><span class="delimiter">'</span><span class="content">should have a name</span><span class="delimiter">'</span></span>, () =&gt; {
    expect(pony.name).toBe(<span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span>);
  });

  it(<span class="string"><span class="delimiter">'</span><span class="content">should have a speed</span><span class="delimiter">'</span></span>, () =&gt; {
    expect(pony.speed).not.toBe(<span class="integer">1</span>);
    expect(pony.speed).toBeGreaterThan(<span class="integer">9</span>);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il existe aussi une méthode <code>afterEach</code>, mais je n&#8217;en ai juste jamais eu besoin&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Une dernière astuce&#160;: Jasmine nous permet de créer des objets factices (bouchons ou espions, comme tu veux),
ou même d&#8217;espionner une méthode d&#8217;un véritable objet.
On peut alors faire quelques assertions sur ces méthodes,
comme <code>toHaveBeenCalled()</code> qui vérifie que la méthode a bien été invoquée,
ou <code>toHaveBeenCalledWith()</code> qui vérifie les paramètres exacts utilisés lors de l&#8217;invocation de la méthode espionnée.
Tu peux aussi vérifier combien de fois la méthode a été invoquée, ou vérifier si elle ne l&#8217;a pas été, etc&#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">describe(<span class="string"><span class="delimiter">'</span><span class="content">My first test suite with spyOn</span><span class="delimiter">'</span></span>, () =&gt; {
  let pony: Pony;

  beforeEach(() =&gt; {
    pony = <span class="keyword">new</span> Pony(<span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span>, <span class="integer">10</span>);
    <span class="comment">// define a spied method</span>
    spyOn(pony, <span class="string"><span class="delimiter">'</span><span class="content">isFasterThan</span><span class="delimiter">'</span></span>).and.returnValue(<span class="predefined-constant">true</span>);
  });

  it(<span class="string"><span class="delimiter">'</span><span class="content">should test if the Pony is fast</span><span class="delimiter">'</span></span>, () =&gt; {
    let runPonyRun = pony.isFasterThan(<span class="integer">60</span>);
    expect(runPonyRun).toBe(<span class="predefined-constant">true</span>); <span class="comment">// as the spied method always returns</span>
    expect(pony.isFasterThan).toHaveBeenCalled();
    expect(pony.isFasterThan).toHaveBeenCalledWith(<span class="integer">60</span>);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand tu écris des tests unitaires, garde à l&#8217;esprit qu&#8217;ils doivent rester courts et lisibles.
Et n&#8217;oublie pas de les faire d&#8217;abord échouer, pour être sûr que tu testes la bonne chose.</p>
</div>
<div class="paragraph">
<p>La dernière étape est l&#8217;exécution de nos tests.
Pour cela, l&#8217;équipe Angular a développé <a href="http://karma-runner.github.io">Karma</a>,
dont le seul but est d&#8217;exécuter nos tests dans un ou plusieurs navigateurs.
Cette bibliothèque peut aussi surveiller nos fichiers pour réexécuter nos tests lors de chaque enregistrement.
Comme l&#8217;exécution est très rapide, c&#8217;est vraiment bien d&#8217;avoir ça,
pour avoir un retour instantané sur notre code.</p>
</div>
<div class="paragraph">
<p>Je ne vais pas me lancer dans les détails de la mise en place de Karma,
mais c&#8217;est un projet très intéressant avec une tonne de plugins à disposition,
pour le faire fonctionner avec tes outils préférés, pour mesurer la couverture de tests, etc&#8230;&#8203;
Si comme moi tu écris ton code en TypeScript,
la stratégie que tu peux adopter est de laisser le compilateur TypeScript surveiller ton code et tes tests,
et produire les fichiers compilés dans un répertoire séparé,
et avoir Karma qui surveille ce dernier répertoire.</p>
</div>
<div class="paragraph">
<p>Donc on sait maintenant comment écrire un test unitaire en JavaScript.
Ajoutons maintenant Angular&#160;2 à la recette.</p>
</div>
</div>
<div class="sect3">
<h4 id="_utiliser_l_injection_de_dépendances">15.2.2. Utiliser l&#8217;injection de dépendances</h4>
<div class="paragraph">
<p>Disons que j&#8217;ai une application Angular&#160;2 avec un service simple, comme <code>RaceService</code>,
avec une méthode retournant une liste de courses codée en dur.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">export</span> <span class="reserved">class</span> RaceService {
  list() {
    let race1 = <span class="keyword">new</span> Race(<span class="string"><span class="delimiter">'</span><span class="content">London</span><span class="delimiter">'</span></span>);
    let race2 = <span class="keyword">new</span> Race(<span class="string"><span class="delimiter">'</span><span class="content">Lyon</span><span class="delimiter">'</span></span>);
    <span class="keyword">return</span> [race1, race2];
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Essayons de tester cela.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">describe(<span class="string"><span class="delimiter">'</span><span class="content">RaceService</span><span class="delimiter">'</span></span>, () =&gt; {
  it(<span class="string"><span class="delimiter">'</span><span class="content">should return races when list() is called</span><span class="delimiter">'</span></span>, () =&gt; {
    let raceService: RaceService = <span class="keyword">new</span> RaceService();
    expect(raceService.list().length).toBe(<span class="integer">2</span>);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ca fonctionne.
Mais on pourrait aussi bénéficier de l&#8217;injection de dépendances proposée par Angular pour récupérer
le RaceService et l&#8217;injecter dans notre test.
C&#8217;est d&#8217;autant plus utile que notre <code>RaceService</code> a lui aussi des dépendances&#160;:
plutôt que devoir instancier nous-même chacune des ses dépendances,
on peut compter sur l&#8217;injecteur pour le faire à notre place en lui disant
"hé, j&#8217;ai besoin de RaceService, débrouille-toi pour le créer, lui fournir ce dont il a besoin, et me le donner".</p>
</div>
<div class="paragraph">
<p>Pour utiliser le système d&#8217;injection de dépendances dans notre test,
le framework a une méthode utilitaire nommée <code>inject</code>,
dans le module <code>@angular/core/testing</code>.</p>
</div>
<div class="paragraph">
<p>Cette méthode est utilisée pour emballer notre fonction de test (le second paramètre de notre fonction <code>it</code>),
et y injecter des dépendances spécifiques.</p>
</div>
<div class="paragraph">
<p>Si on retourne à notre exemple, cette fois-ci en utilisant <code>inject</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { inject, TestBed } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core/testing</span><span class="delimiter">'</span></span>;

describe(<span class="string"><span class="delimiter">'</span><span class="content">RaceService</span><span class="delimiter">'</span></span>, () =&gt; {
  it(<span class="string"><span class="delimiter">'</span><span class="content">should return races when list() is called</span><span class="delimiter">'</span></span>, inject([RaceService], (raceService) =&gt; {
    expect(raceService.list().length).toBe(<span class="integer">2</span>);
  }));
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, <code>inject</code> prend deux paramètres&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>un tableau contenant les classes qu&#8217;on veut injecter comme dépendances&#160;;</p>
</li>
<li>
<p>une fonction de test, dont les paramètres coïncident avec les dépendances déclarées.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ça ne fonctionnera pas exactement comme cela,
parce qu&#8217;il nous faudra aussi indiquer au test ce qui est disponible à l&#8217;injection,
comme on le fait avec le module racine quand on démarre l&#8217;application.</p>
</div>
<div class="paragraph">
<p>La classe <code>TestBed</code> va nous aider.
Sa méthode <code>configureTestingModule</code> permet de déclarer ce qui pourra être injecté dans le test,
en créant un module de test ne contenant que ce dont nous avons besoin.
Essaye de n&#8217;injecter que le strict nécessaire dans ton test,
pour le rendre le plus faiblement couplé possible du reste de l&#8217;application.
La méthode est appelée dans le <code>beforeEach</code> de Jasmine pour être exécutée avant nos tests,
et prend une configuration de module comme paramètre, très proche de ce que nous passons au décorateur <code>@NgModule</code>.
L&#8217;attribut <code>providers</code> reçoit un tableau de dépendances qui deviendront disponibles à l&#8217;injection.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { inject, TestBed } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core/testing</span><span class="delimiter">'</span></span>;

describe(<span class="string"><span class="delimiter">'</span><span class="content">RaceService</span><span class="delimiter">'</span></span>, () =&gt; {

  beforeEach(() =&gt; TestBed.configureTestingModule({
    <span class="key">providers</span>: [RaceService]
  }));

  it(<span class="string"><span class="delimiter">'</span><span class="content">should return races when list() is called</span><span class="delimiter">'</span></span>, inject([RaceService], (raceService) =&gt; {
    expect(raceService.list().length).toBe(<span class="integer">2</span>);
  }));
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant ça fonctionne, cool&#160;!
Note que si notre <code>RaceService</code> avait lui aussi des dépendances,
nous aurions dû les déclarer dans l&#8217;attribut <code>providers</code>,
pour les rendre disponibles à l&#8217;injection.</p>
</div>
<div class="paragraph">
<p>Comme on l&#8217;a fait dans l&#8217;exemple simple de Jasmine,
on devrait déplacer l&#8217;initialisation de <code>RaceService</code> dans une méthode <code>beforeEach</code>.
On peut aussi utiliser <code>inject</code> dans un <code>beforeEach</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { inject, TestBed } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core/testing</span><span class="delimiter">'</span></span>;

describe(<span class="string"><span class="delimiter">'</span><span class="content">RaceService</span><span class="delimiter">'</span></span>, () =&gt; {
  let service: RaceService;

  beforeEach(() =&gt; TestBed.configureTestingModule({
    <span class="key">providers</span>: [RaceService]
  }));

  beforeEach(inject([RaceService], (raceService) =&gt; service = raceService));

  it(<span class="string"><span class="delimiter">'</span><span class="content">should return races when list() is called</span><span class="delimiter">'</span></span>, () =&gt; {
    expect(service.list().length).toBe(<span class="integer">2</span>);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>On a déplacé la logique <code>inject</code> dans un <code>beforeEach</code>, et maintenant notre test est plutôt clair.
Pense bien à toujours invoquer <code>TestBed.configureTestingModule</code> (qui initialise l&#8217;injecteur)
avant d&#8217;utiliser l&#8217;injecteur avec <code>inject</code>, ou sinon ton test échouera.</p>
</div>
<div class="paragraph">
<p>Évidemment, un véritable <code>RaceService</code> n&#8217;aura pas une liste de courses écrite en dure,
et il est fortement probable que cette réponse soit asynchrone.
Disons que la méthode <code>list</code> retourne une promesse.
Qu&#8217;est-ce que cela change dans notre test&#160;?
Et bien nous devrons mettre <code>expect</code> dans le callback <code>then</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { async, inject, TestBed } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core/testing</span><span class="delimiter">'</span></span>;

describe(<span class="string"><span class="delimiter">'</span><span class="content">RaceService</span><span class="delimiter">'</span></span>, () =&gt; {
  let service: RaceService;

  beforeEach(() =&gt; TestBed.configureTestingModule({
    <span class="key">providers</span>: [RaceService]
  }));

  beforeEach(inject([RaceService], (raceService) =&gt; service = raceService));

  it(<span class="string"><span class="delimiter">'</span><span class="content">should return a promise of 2 races</span><span class="delimiter">'</span></span>, async(() =&gt; {
    service.list().then(races =&gt; {
      expect(races.length).toBe(<span class="integer">2</span>);
    });
  }));
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu te dis peut-être que cela ne fonctionnera pas,
car le test se terminera avant que la promesse soit résolue,
et notre assertion ne sera jamais exécutée.</p>
</div>
<div class="paragraph">
<p>Mais nous avons utilisé la méthode <code>async()</code> en plus de la méthode <code>inject()</code>.
Et cette méthode est vraiment intelligente&#160;:
elle enregistre tous les appels asynchrones faits dans le test
et attend leur résolution.</p>
</div>
<div class="paragraph">
<p>Angular&#160;2 utilise un nouveau concept appelé <a href="https://github.com/angular/zone.js"><strong>zones</strong></a>.
Ces <strong>zones</strong> sont des contextes d&#8217;exécution,
et, pour simplifier, elles enregistrent tout ce qui se passe en leur sein
(timeouts, event listeners, callbacks, &#8230;&#8203;).
Elles proposent aussi des points d&#8217;extensions qui peuvent être appelés quand on entre ou sort de la zone.
Une application Angular&#160;2 tourne dans une zone,
et c&#8217;est comme cela que le framework sait qu&#8217;il doit rafraîchir le DOM quand une action asynchrone est réalisée.</p>
</div>
<div class="paragraph">
<p>Ce concept est aussi utilisé dans les tests si ton test utilise <code>async()</code>&#160;:
chaque test tourne dans une zone, ainsi le framework sait quand toutes les actions asynchrones sont terminées,
et ne se finira pas jusqu&#8217;alors.</p>
</div>
<div class="paragraph">
<p>Et donc nos assertions asynchrones seront exécutés. Cool&#160;!</p>
</div>
<div class="paragraph">
<p>Il y a une autre façon de gérer les tests asynchrones en Angular&#160;2,
en utilisant <code>fakeAsync()</code> et <code>tick()</code>,
mais on garde ça pour un chapitre plus avancé.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dépendances_factices">15.3. Dépendances factices</h3>
<div class="paragraph">
<p>Pouvoir déclarer les dépendances dans le module de test
a une autre utilité&#160;: on peut sans problème y déclarer une dépendance factice plutôt qu&#8217;une vraie.</p>
</div>
<div class="paragraph">
<p>Pour le bien de mon exemple, disons que mon <code>RaceService</code> utilise le <em>local storage</em> pour stocker les courses,
avec une clé <code>races</code>.
Tes collègues ont développé un service appelé <code>LocalStorageService</code> qui gère la sérialisation JSON, etc&#8230;&#8203;
que notre <code>RaceService</code> utilise.
La méthode <code>list()</code> ressemble à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Injectable()
<span class="reserved">export</span> <span class="reserved">class</span> RaceService {
  constructor(<span class="reserved">private</span> localStorage: LocalStorageService) {
  }

  list() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.localStorage.get(<span class="string"><span class="delimiter">'</span><span class="content">races</span><span class="delimiter">'</span></span>);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, nous ne voulons pas vraiment tester le service <code>LocalStorageService</code>,
nous voulons juste tester notre <code>RaceService</code>.
Cela peut être fait en bénéficiant du système d&#8217;injection de dépendances pour
donner un <code>LocalStorageService</code> factice&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> FakeLocalStorage {
  get(key) {
    <span class="keyword">return</span> [{ <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Lyon</span><span class="delimiter">'</span></span> }, { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">London</span><span class="delimiter">'</span></span> }];
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>au <code>RaceService</code> dans notre test, en utilisant <code>provide</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { inject, TestBed } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core/testing</span><span class="delimiter">'</span></span>;

describe(<span class="string"><span class="delimiter">'</span><span class="content">RaceService</span><span class="delimiter">'</span></span>, () =&gt; {

  beforeEach(() =&gt; TestBed.configureTestingModule({
    <span class="key">providers</span>: [
      { <span class="key">provide</span>: LocalStorageService, <span class="key">useClass</span>: FakeLocalStorage },
      RaceService
    ]
  }));

  it(<span class="string"><span class="delimiter">'</span><span class="content">should return 2 races from localStorage</span><span class="delimiter">'</span></span>, inject([RaceService], service =&gt; {
    const races = service.list();
    expect(races.length).toBe(<span class="integer">2</span>);
  }));
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cool&#160;!
Mais je ne suis pas complètement satisfait de ce test.
Créer manuellement un service factice est laborieux,
et Jasmine peut nous aider à espionner le service et à remplacer son implémentation par une factice.
Elle permet aussi de vérifier que la méthode <code>get()</code> a été invoquée avec la bonne clé <code>'races'</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { inject, TestBed } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core/testing</span><span class="delimiter">'</span></span>;

describe(<span class="string"><span class="delimiter">'</span><span class="content">RaceService</span><span class="delimiter">'</span></span>, () =&gt; {

  const localStorage = jasmine.createSpyObj(<span class="string"><span class="delimiter">'</span><span class="content">LocalStorageService</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">get</span><span class="delimiter">'</span></span>]);

  beforeEach(() =&gt; TestBed.configureTestingModule({
    <span class="key">providers</span>: [
      { <span class="key">provide</span>: LocalStorageService, <span class="key">useValue</span>: localStorage },
      RaceService
    ]
  }));

  it(<span class="string"><span class="delimiter">'</span><span class="content">should return 2 races from localStorage</span><span class="delimiter">'</span></span>, inject([RaceService], (service) =&gt; {
    localStorage.get.and.returnValue([{ <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Lyon</span><span class="delimiter">'</span></span> }, { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">London</span><span class="delimiter">'</span></span> }]);

    const races = service.list();

    expect(races.length).toBe(<span class="integer">2</span>);
    expect(localStorage.get).toHaveBeenCalledWith(<span class="string"><span class="delimiter">'</span><span class="content">races</span><span class="delimiter">'</span></span>);
  }));
})
;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tester_des_composants">15.4. Tester des composants</h3>
<div class="paragraph">
<p>Après avoir testé un service simple, l&#8217;étape suivante est de tester un composant.
Un test de composant est légèrement différent car il nous faut créer le composant.
On ne peut pas compter sur le système d&#8217;injection de dépendances pour nous fournir une instance du composant à tester
(tu as probablement déjà remarqué que les composants ne sont pas injectables dans d&#8217;autres composants :) ).</p>
</div>
<div class="paragraph">
<p>Commençons par écrire un composant à tester.
Pourquoi pas notre composant <code>PonyComponent</code>&#160;?
Il prend un poney en entrée et émet un événement <code>ponyClicked</code> quand le composant est cliqué.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-pony</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span>&lt;img [src]=<span class="string"><span class="delimiter">&quot;</span><span class="content">'/images/pony-' + pony.color.toLowerCase() + '.png'</span><span class="delimiter">&quot;</span></span> (click)=<span class="string"><span class="delimiter">&quot;</span><span class="content">clickOnPony()</span><span class="delimiter">&quot;</span></span>&gt;<span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PonyComponent {

  <span class="error">@</span>Input() pony: PonyModel;
  <span class="error">@</span>Output() ponyClicked: EventEmitter&lt;PonyModel&gt; = <span class="keyword">new</span> EventEmitter&lt;PonyModel&gt;();

  clickOnPony() {
    <span class="local-variable">this</span>.ponyClicked.emit(<span class="local-variable">this</span>.pony);
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il a un template plutôt simple&#160;:
une image avec une source dynamique dépendante de la couleur du poney,
et un gestionnaire de clic.</p>
</div>
<div class="paragraph">
<p>Pour tester un tel composant, tu as d&#8217;abord besoin de créer une instance.
Pour ce faire, nous allons aussi utiliser <code>TestBed</code>.
Cette classe vient avec une méthode utilitaire, nommée <code>createComponent</code>, pour créer un composant.
Cette méthode retourne un <code>ComponentFixture</code>, une représentation de notre composant.</p>
</div>
<div class="paragraph">
<p>Note que pour créer un composant, il doit être connu du module de test,
nous devons donc l&#8217;ajouter à l&#8217;attribut <code>declarations</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { TestBed } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core/testing</span><span class="delimiter">'</span></span>;

<span class="reserved">import</span> { PonyComponent } from <span class="string"><span class="delimiter">'</span><span class="content">./pony_cmp</span><span class="delimiter">'</span></span>;

describe(<span class="string"><span class="delimiter">'</span><span class="content">PonyComponent</span><span class="delimiter">'</span></span>, () =&gt; {

  it(<span class="string"><span class="delimiter">'</span><span class="content">should have an image</span><span class="delimiter">'</span></span>, () =&gt; {
    TestBed.configureTestingModule({
      <span class="key">declarations</span>: [PonyComponent]
    });
    const fixture = TestBed.createComponent(PonyComponent);
    <span class="comment">// given a component instance with a pony input initialized</span>
    const ponyComponent = fixture.componentInstance;
    ponyComponent.pony = { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span>, <span class="key">color</span>: <span class="string"><span class="delimiter">'</span><span class="content">BLUE</span><span class="delimiter">'</span></span> };

    <span class="comment">// when we trigger the change detection</span>
    fixture.detectChanges();

    <span class="comment">// then we should have an image with the correct source attribute</span>
    <span class="comment">// depending of the pony color</span>
    const element = fixture.nativeElement;
    expect(element.querySelector(<span class="string"><span class="delimiter">'</span><span class="content">img</span><span class="delimiter">'</span></span>).getAttribute(<span class="string"><span class="delimiter">'</span><span class="content">src</span><span class="delimiter">'</span></span>)).toBe(<span class="string"><span class="delimiter">'</span><span class="content">/images/pony-blue.png</span><span class="delimiter">'</span></span>);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici, on suit le modèle "Given/When/Then" ("soit/quand/alors") pour écrire notre test.
Tu trouveras une littérature complète sur le sujet, mais il se résume à&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>une phase "Given", où on met en place le contexte du test. On y récupère l&#8217;instance du composant créée, et lui donne un poney.
Cela simule une entrée qui viendrait d&#8217;un composant parent dans la vraie application.</p>
</li>
<li>
<p>une phase "When", où on déclenche manuellement la détection de changements, via la méthode <code>detectChanges()</code>.
Dans un test, la détection de changement est de notre responsabilité&#160;: ce n&#8217;est pas automatique comme ça l&#8217;est dans une application.</p>
</li>
<li>
<p>et une phase "Then", contenant les assertions.
On peut récupérer l&#8217;élément natif et interroger le DOM comme on le ferait dans un navigateur (avec <code>querySelector()</code> par exemple).
Ici on teste si la source de l&#8217;image est la bonne.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On peut également tester que le composant émet bien un événement&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">it(<span class="string"><span class="delimiter">'</span><span class="content">should emit an event on click</span><span class="delimiter">'</span></span>, () =&gt; {
  TestBed.configureTestingModule({
    <span class="key">declarations</span>: [PonyComponent]
  });
  const fixture = TestBed.createComponent(PonyComponent);

  <span class="comment">// given a pony</span>
  const ponyComponent = fixture.componentInstance;
  ponyComponent.pony = { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span>, <span class="key">color</span>: <span class="string"><span class="delimiter">'</span><span class="content">BLUE</span><span class="delimiter">'</span></span> };

  <span class="comment">// we fake the event emitter with a spy</span>
  spyOn(ponyComponent.ponyClicked, <span class="string"><span class="delimiter">'</span><span class="content">emit</span><span class="delimiter">'</span></span>);

  <span class="comment">// when we click on the pony</span>
  const element = fixture.nativeElement;
  const image = element.querySelector(<span class="string"><span class="delimiter">'</span><span class="content">img</span><span class="delimiter">'</span></span>);
  image.dispatchEvent(<span class="keyword">new</span> Event(<span class="string"><span class="delimiter">'</span><span class="content">click</span><span class="delimiter">'</span></span>));

  <span class="comment">// and we trigger the change detection</span>
  fixture.detectChanges();

  <span class="comment">// then the event emitter should have fired an event</span>
  expect(ponyComponent.ponyClicked.emit).toHaveBeenCalled();
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Examinons un autre composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-race</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;h1&gt;</span>{{race.name}}<span class="tag">&lt;/h1&gt;</span>
    <span class="tag">&lt;ns-pony</span> <span class="error">*</span><span class="attribute-name">ngFor</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">let currentPony of race.ponies</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="attribute-name">pony</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">currentPony</span><span class="error">&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/ns-pony&gt;</span>
  <span class="tag">&lt;/div&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RaceComponent {

  <span class="error">@</span>Input() race: any;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>et son test&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">describe(<span class="string"><span class="delimiter">'</span><span class="content">RaceComponent</span><span class="delimiter">'</span></span>, () =&gt; {

  let fixture: ComponentFixture&lt;RaceComponent&gt;;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({
      <span class="key">declarations</span>: [RaceComponent, PonyComponent]
    });
    fixture = TestBed.createComponent(RaceComponent);
  });

  it(<span class="string"><span class="delimiter">'</span><span class="content">should have a name and a list of ponies</span><span class="delimiter">'</span></span>, () =&gt; {
    <span class="comment">// given a component instance with a race input initialized</span>
    const raceComponent = fixture.componentInstance;
    raceComponent.race = { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">London</span><span class="delimiter">'</span></span>, <span class="key">ponies</span>: [{ <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span>, <span class="key">color</span>: <span class="string"><span class="delimiter">'</span><span class="content">BLUE</span><span class="delimiter">'</span></span> }] };

    <span class="comment">// when we trigger the change detection</span>
    fixture.detectChanges();

    <span class="comment">// then we should have a name with the race name</span>
    const element = fixture.nativeElement;
    expect(element.querySelector(<span class="string"><span class="delimiter">'</span><span class="content">h1</span><span class="delimiter">'</span></span>).textContent).toBe(<span class="string"><span class="delimiter">'</span><span class="content">London</span><span class="delimiter">'</span></span>);

    <span class="comment">// and a list of ponies</span>
    const ponies = fixture.debugElement.queryAll(By.directive(PonyComponent));
    expect(ponies.length).toBe(<span class="integer">1</span>);
    <span class="comment">// we can check if the pony is correctly initialized</span>
    const rainbowDash = ponies[<span class="integer">0</span>].componentInstance.pony;
    expect(rainbowDash.name).toBe(<span class="string"><span class="delimiter">'</span><span class="content">Rainbow Dash</span><span class="delimiter">'</span></span>);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici on requête toutes les directives de type <code>PonyComponent</code> et on teste si le premier poney est correctement initialisé.</p>
</div>
<div class="paragraph">
<p>Tu peux récupérer les composants au sein de ton composant avec <code>children</code>
ou les requêter avec <code>query()</code> et <code>queryAll()</code>.
Ces méthodes prennent un prédicat en argument qui peut être soit <code>By.css</code> ou soit <code>By.directive</code>.
C&#8217;est ce qu&#8217;on fait pour obtenir les poneys affichés, parce qu&#8217;elles sont des instances de <code>PonyComponent</code>.
Garde à l&#8217;esprit que c&#8217;est différent d&#8217;une requête DOM avec <code>querySelector()</code>&#160;:
elle ne trouvera que les éléments gérés par Angular,
et retourne un <code>ComponentFixture</code>, pas un élément du DOM
(ce qui te donnera accès à <code>componentInstance</code> du résultat par exemple).</p>
</div>
</div>
<div class="sect2">
<h3 id="_tester_avec_des_templates_ou_providers_factices">15.5. Tester avec des templates ou providers factices</h3>
<div class="paragraph">
<p>Quand on teste un composant,
on veut parfois créer un composant parent qui l&#8217;utilise.
Et si il y a plusieurs cas d&#8217;utilisation,
on devrait créer plusieurs composants parents juste pour essayer les différents <em>inputs</em> par exemple.</p>
</div>
<div class="paragraph">
<p>Heureusement, quand nous sommes dans un test,
nous pouvons modifier n&#8217;importe quel composant pour le réutiliser dans différents tests,
en surchargeant son template.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, le <code>TestBed</code> propose une méthode <code>overrideComponent()</code>,
à appeler avant <code>createComponent()</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">describe(<span class="string"><span class="delimiter">'</span><span class="content">RaceComponent</span><span class="delimiter">'</span></span>, () =&gt; {

  let fixture: ComponentFixture&lt;RaceComponent&gt;;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({
      <span class="key">declarations</span>: [RaceComponent, PonyComponent]
    });
    TestBed.overrideComponent(RaceComponent, { <span class="key">set</span>: { <span class="key">template</span>: <span class="string"><span class="delimiter">'</span><span class="content">&lt;h2&gt;{{race.name}}&lt;/h2&gt;</span><span class="delimiter">'</span></span> } });
    fixture = TestBed.createComponent(RaceComponent);
  });

  it(<span class="string"><span class="delimiter">'</span><span class="content">should have a name</span><span class="delimiter">'</span></span>, () =&gt; {
    <span class="comment">// given a component instance with a race input initialized</span>
    let raceComponent = fixture.componentInstance;
    raceComponent.race = { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">London</span><span class="delimiter">'</span></span> };

    <span class="comment">// when we trigger the change detection</span>
    fixture.detectChanges();

    <span class="comment">// then we should have a name</span>
    let element = fixture.nativeElement;
    expect(element.querySelector(<span class="string"><span class="delimiter">'</span><span class="content">h2</span><span class="delimiter">'</span></span>).textContent).toBe(<span class="string"><span class="delimiter">'</span><span class="content">London</span><span class="delimiter">'</span></span>);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, cette méthode prend deux arguments&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>le composant que tu veux surcharger&#160;;</p>
</li>
<li>
<p>la méta-donnée que tu veux ajouter, supprimer ou remplacer (par exemple ici on remplace le template).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cela signifie que tu peux modifier le template du composant que tu testes,
ou celui d&#8217;un de ses enfants (pour remplacer le template complexe d&#8217;un composant par un plus simple).</p>
</div>
<div class="paragraph">
<p><code>template</code> n&#8217;est pas la seule méta-donnée disponible, tu peux aussi utiliser&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>providers</code> pour remplacer les dépendances d&#8217;un composant&#160;;</p>
</li>
<li>
<p><code>styles</code> pour remplacer le style utilisé dans le template d&#8217;un composant&#160;;</p>
</li>
<li>
<p>ou n&#8217;importe quelle propriété que tu peux passer au décorateur <code>@Component</code>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Maintenant tu es prêt pour tester ton application&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_tests_end_to_end_de_bout_en_bout">15.6. Tests end-to-end ("de bout en bout")</h3>
<div class="paragraph">
<p>Les tests end-to-end ("de bout en bout", abrégés en <em>e2e</em>) sont l&#8217;autre type de tests qu&#8217;on peut faire.
Un test end-to-end consiste à lancer réellement ton application dans un navigateur et à simuler l&#8217;interaction d&#8217;un utilisateur
(clic sur les boutons, saisie de formulaires, etc&#8230;&#8203;).
Ils ont l&#8217;avantage de vraiment tester l&#8217;application dans son ensemble, mais&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ils sont bien plus lents (plusieurs secondes par test)&#160;;</p>
</li>
<li>
<p>c&#8217;est souvent difficile de tester les cas limites.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Comme tu l&#8217;as deviné, tu n&#8217;as pas besoin de choisir entre les tests unitaires et les tests e2e&#160;:
tu combineras les deux pour avoir à la fois une bonne couverture et quelques garanties que ton application complète fonctionne comme prévue.</p>
</div>
<div class="paragraph">
<p>Les tests e2e s&#8217;appuient sur un outil appelé <a href="https://angular.github.io/protractor/#/">Protractor</a>.
C&#8217;est le même outil qu&#8217;on utilisait en AngularJS&#160;1.x.
Et la bonne nouvelle, c&#8217;est qu&#8217;il fonctionne de la même façon avec AngularJS&#160;1.x et Angular&#160;2&#160;!</p>
</div>
<div class="paragraph">
<p>Tu écriras ta suite de tests avec Jasmine comme pour un test unitaire,
mais tu utiliseras l&#8217;API de Protractor pour interagir avec ton application.</p>
</div>
<div class="paragraph">
<p>Un test simple ressemblerait à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">describe(<span class="string"><span class="delimiter">'</span><span class="content">Home</span><span class="delimiter">'</span></span>, () =&gt; {

  it(<span class="string"><span class="delimiter">'</span><span class="content">should display title, tagline and logo</span><span class="delimiter">'</span></span>, () =&gt; {
    browser.get(<span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>);
    expect(element.all(by.css(<span class="string"><span class="delimiter">'</span><span class="content">img</span><span class="delimiter">'</span></span>)).count()).toEqual(<span class="integer">1</span>);
    expect(<span class="predefined">$</span>(<span class="string"><span class="delimiter">'</span><span class="content">h1</span><span class="delimiter">'</span></span>).getText()).toContain(<span class="string"><span class="delimiter">'</span><span class="content">PonyRacer</span><span class="delimiter">'</span></span>);
    expect(<span class="predefined">$</span>(<span class="string"><span class="delimiter">'</span><span class="content">small</span><span class="delimiter">'</span></span>).getText()).toBe(<span class="string"><span class="delimiter">'</span><span class="content">Always a pleasure to bet on ponies</span><span class="delimiter">'</span></span>);
  });

});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Protractor nous fournit un objet <code>browser</code>,
avec quelques méthodes utilitaires comme <code>get()</code> pour aller à une URL.
Puis tu as <code>element.all()</code> pour sélectionner tous les éléments répondant à un prédicat donné.
Ce prédicat s&#8217;appuie souvent sur <code>by</code> et ses méthodes variées
(<code>by.css()</code> pour faire une requête CSS, <code>by.id()</code> pour récupérer un élément par son identifiant, etc&#8230;&#8203;).
<code>element.all()</code> retournera une promesse, avec une méthode spéciale <code>count()</code> utilisée dans le test ci-dessus.</p>
</div>
<div class="paragraph">
<p><code>$('h1')</code> est un raccourci, équivalent de <code>element(by.css('h1'))</code>.
Il récupérera le premier élément correspondant à la requête CSS.</p>
</div>
<div class="paragraph">
<p>Tu peux utiliser plusieurs méthodes sur la promesse retournée par <code>$()</code>, comme <code>getText()</code> et <code>getAttribute()</code> pour récupérer des informations,
ou <code>click()</code> et <code>sendKeys()</code> pour agir sur l&#8217;élément.</p>
</div>
<div class="paragraph">
<p>Ces tests peuvent être bien plus longs à écrire et à débugger (bien plus que des tests unitaires),
mais ils sont vraiment utiles.
Tu peux faire plein de trucs incroyables avec ces tests,
comme tester dans plusieurs navigateurs, prendre une capture d&#8217;écran à chaque échec, etc&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Avec les tests unitaires et les tests e2e, tu as toutes les cartes en main pour construire une application solide et maintenable&#160;!</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="forms">16. Formulaires</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Ce chapitre utilise la nouvelle API de formulaire (du package <code>@angular/forms</code> qui est apparu en <code>rc.2</code>).
Si tu utilises l&#8217;ancienne API maintenant dépréciée, c&#8217;est le moment de mettre à jour. Ce chapitre t&#8217;aidera à faire la migration&#160;!
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_form_form_form_idable">16.1. Form, form, form-idable&#160;!</h3>
<div class="paragraph">
<p>La gestion des formulaires a toujours été super soignée en Angular.
C&#8217;était une des fonctionnalités les plus mises en avant en 1.x,
et, comme toute application inclue en général des formulaires, elle a gagné le cœur de beaucoup de développeurs.</p>
</div>
<div class="paragraph">
<p>Les formulaires, c&#8217;est compliqué&#160;: tu dois valider les saisies de l&#8217;utilisateur,
afficher les erreurs correspondantes, tu peux avoir des champs obligatoires ou non,
ou qui dépendent d&#8217;un autre champ, tu veux pouvoir réagir sur les changements de certains, etc&#8230;&#8203;
On a aussi besoin de tester ces formulaires, et c&#8217;était impossible dans un test unitaire en AngularJS&#160;1.x.
C&#8217;était seulement possible avec un test end-to-end, ce qui peut être lent.</p>
</div>
<div class="paragraph">
<p>En Angular&#160;2, le même soin a été appliqué aux formulaires,
et le framework nous propose une façon élégante d&#8217;écrire nos formulaires.
En fait, il en propose même deux&#160;!</p>
</div>
<div class="paragraph">
<p>Tu peux écrire ton formulaire en utilisant seulement des directives dans ton template&#160;:
c&#8217;est la façon "pilotée par le template".
D&#8217;après notre expérience, c&#8217;est particulièrement utile pour des formulaires simples, sans trop de validation.</p>
</div>
<div class="paragraph">
<p>L&#8217;autre façon de procéder est la façon "pilotée par le code", où tu écris une description du formulaire
dans ton composant, puis utilises ensuite des directives pour lier ce formulaire aux inputs/textareas/selects de ton template.
C&#8217;est plus verbeux, mais aussi plus puissant, notamment pour faire de la validation custom,
ou pour générer des formulaires dynamiquement.</p>
</div>
<div class="paragraph">
<p>Alors prenons un cas d&#8217;utilisation, codons-le de chacune des deux façons, et étudions les différences.</p>
</div>
<div class="paragraph">
<p>On va écrire un formulaire simple, pour enregistrer de nouveaux utilisateurs dans
notre merveilleuse application PonyRacer. Comme on a besoin d&#8217;un composant de base
pour chacun des cas d&#8217;utilisation, commençons par celui-ci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-register</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span>
  <span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
  <span class="tag">&lt;form&gt;</span><span class="tag">&lt;/form&gt;</span>
  <span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RegisterFormComponent {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Rien d&#8217;extraordinaire&#160;: un composant avec un simple template contenant un formulaire.
Dans les minutes qui viennent, on y ajoutera les champs permettant d&#8217;enregistrer un utilisateur
avec un nom et un mot de passe.</p>
</div>
<div class="paragraph">
<p>Quelque soit la méthode choisie (piloté par le template ou par le code),
Angular crée une représentation de notre formulaire.</p>
</div>
<div class="paragraph">
<p>Dans la méthode "pilotée par le template", c&#8217;est automatique&#160;:
on a juste besoin d&#8217;ajouter les bonnes directives dans le template
et le framework s&#8217;occupe de créer la représentation du formulaire.</p>
</div>
<div class="paragraph">
<p>Dans la méthode "pilotée par le code", on crée cette représentation manuellement,
et on lie ensuite la représentation du formulaire aux inputs en utilisant des directives.</p>
</div>
<div class="paragraph">
<p>Sous le capot, un champ du formulaire, comme un <code>input</code> ou un <code>select</code>, sera représenté par un <code>FormControl</code> en Angular&#160;2.
C&#8217;est la plus petite partie d&#8217;un formulaire, et il encapsule l&#8217;état du champ et sa valeur.</p>
</div>
<div class="paragraph">
<p>Un <code>FormControl</code> a plusieurs attributs&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>valid</code>&#160;: si le champ est valide, au regard des contraintes et des validations qui lui sont appliquées.</p>
</li>
<li>
<p><code>errors</code>&#160;: un objet contenant les erreurs du champ.</p>
</li>
<li>
<p><code>dirty</code>&#160;: <code>false</code> jusqu&#8217;à ce que l&#8217;utilisateur modifie la valeur du champ.</p>
</li>
<li>
<p><code>pristine</code>&#160;: l&#8217;opposé de <code>dirty</code>.</p>
</li>
<li>
<p><code>touched</code>&#160;: <code>false</code> jusqu&#8217;à ce que l&#8217;utilisateur soit entré dans le champ.</p>
</li>
<li>
<p><code>untouched</code>&#160;: l&#8217;opposé de <code>touched</code>.</p>
</li>
<li>
<p><code>value</code>&#160;: la valeur du champ.</p>
</li>
<li>
<p><code>valueChanges</code>&#160;: un <em>Observable</em> qui émet à chaque changement sur le champ.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Il propose aussi quelques méthodes comme <code>hasError()</code> pour contrôler si le contrôle a une erreur donnée.</p>
</div>
<div class="paragraph">
<p>Tu peux ainsi écrire des trucs comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let password = <span class="keyword">new</span> FormControl();
console.log(password.dirty); <span class="comment">// false until the user enters a value</span>
console.log(password.value); <span class="comment">// null until the user enters a value</span>
console.log(password.hasError(<span class="string"><span class="delimiter">'</span><span class="content">required</span><span class="delimiter">'</span></span>)); <span class="comment">// false</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que tu peux passer un paramètre au constructeur, qui deviendra sa valeur initiale.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let password = <span class="keyword">new</span> FormControl(<span class="string"><span class="delimiter">'</span><span class="content">Cédric</span><span class="delimiter">'</span></span>);
console.log(password.value); <span class="comment">// logs &quot;Cédric&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ces contrôles peuvent être regroupés dans un <code>FormGroup</code> ("groupe de formulaire") pour constituer une partie du formulaire
qui a des règles de validation communes. Un formulaire lui-même est un groupe de contrôle.</p>
</div>
<div class="paragraph">
<p>Un <code>FormGroup</code> a les mêmes propriétés qu&#8217;un <code>FormControl</code>, avec quelques différences&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>valid</code>&#160;: si tous les champs sont valides, alors le groupe est valide.</p>
</li>
<li>
<p><code>errors</code>&#160;: un objet contenant les erreurs du groupe, ou <code>null</code> si le groupe est entièrement valide.
Chaque erreur en constitue la clé, et la valeur associée est un tableau contenant chaque contrôle affecté par cette erreur.</p>
</li>
<li>
<p><code>dirty</code>&#160;: <code>false</code> jusqu&#8217;à ce qu&#8217;un des contrôles devienne "dirty".</p>
</li>
<li>
<p><code>pristine</code>&#160;: l&#8217;opposé de <code>dirty</code>.</p>
</li>
<li>
<p><code>touched</code>&#160;: <code>false</code> jusqu&#8217;à ce qu&#8217;un des contrôles devienne "touched".</p>
</li>
<li>
<p><code>untouched</code>&#160;: l&#8217;opposé de <code>touched</code>.</p>
</li>
<li>
<p><code>value</code>&#160;: la valeur du groupe. Pour être plus précis, c&#8217;est un objet dont les clé/valeurs sont les contrôles et leur valeur respective.</p>
</li>
<li>
<p><code>valueChanges</code>&#160;: un <code>Observable</code> qui émet à chaque changement sur un contrôle du groupe.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Un groupe propose les mêmes méthodes qu&#8217;un <code>FormControl</code>, comme <code>hasError()</code>.
Il a aussi une méthode <code>get()</code> pour récupérer un contrôle dans le groupe.</p>
</div>
<div class="paragraph">
<p>Tu peux en créer un comme cela&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let form = <span class="keyword">new</span> FormGroup({
  <span class="key">username</span>: <span class="keyword">new</span> FormControl(<span class="string"><span class="delimiter">'</span><span class="content">Cédric</span><span class="delimiter">'</span></span>),
  <span class="key">password</span>: <span class="keyword">new</span> FormControl()
});
console.log(form.dirty); <span class="comment">// logs false until the user enters a value</span>
console.log(form.value); <span class="comment">// logs Object {username: &quot;Cédric&quot;, password: null}</span>
console.log(form.get(<span class="string"><span class="delimiter">'</span><span class="content">username</span><span class="delimiter">'</span></span>)); <span class="comment">// logs the Control</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Commençons avec un formulaire piloté par le template&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_formulaire_piloté_par_le_template">16.2. Formulaire piloté par le template</h3>
<div class="paragraph">
<p>Dans cette méthode, on va mettre en œuvre un paquet de directives dans notre formulaire,
et laisser le framework construire les instances de <code>FormControl</code> et <code>FormGroup</code> nécessaires.
Par exemple, la directive <code>NgForm</code> qui transforme l&#8217;élément <code>&lt;form&gt;</code> en sa
version Angular&#160;2 super-puissante&#160;: tu peux le voir comme la différence entre Bruce Wayne et Batman.</p>
</div>
<div class="paragraph">
<p>Toutes ces directives sont incluses dans le module <code>FormsModule</code>,
nous devons donc l&#8217;importer dans notre module racine.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html">import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { FormsModule } from '@angular/forms';

@NgModule({
  imports: [BrowserModule, FormsModule],
  declarations: [PonyRacerAppComponent],
  bootstrap: [PonyRacerAppComponent]
})
export class AppModule {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>FormsModule</code> contient les directives pour la façon "pilotée par le template".
Nous verrons plus tard qu&#8217;il existe un autre module, <code>ReactiveFormsModule</code>,
dans le même package <code>@angular/forms</code>, qui est nécessaire pour la façon "pilotée par le code".</p>
</div>
<div class="paragraph">
<p>Ajoutons un bouton <em>submit</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-register</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span>
  <span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
  <span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>
    <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
  <span class="tag">&lt;/form&gt;</span>
  <span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RegisterFormComponent {
  register() {
    <span class="comment">// we will have to handle the submission</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>J&#8217;ai ajouté un bouton, et défini un handler d&#8217;événement <code>ngSubmit</code> sur l&#8217;élément <code>&lt;form&gt;</code>.
L&#8217;événement <code>ngSubmit</code> est émis par la directive <code>form</code> lors de la soumission du formulaire.
Cela invoquera la méthode <code>register()</code> de notre composant, qu&#8217;on implémentera plus tard.</p>
</div>
<div class="paragraph">
<p>Une dernière chose&#160;: comme notre template va rapidement grossir, extrayons-le
tout de suite dans un fichier dédié, grâce à <code>templateUrl</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-register</span><span class="delimiter">'</span></span>,
  <span class="key">templateUrl</span>: <span class="string"><span class="delimiter">'</span><span class="content">register-form.component.html</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RegisterFormComponent {
  register() {
    <span class="comment">// we will have to handle the submission</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans la façon "pilotée par le template", tu écris tes formulaires à peu près comme tu l&#8217;aurais fait en AngularJS&#160;1.x,
avec beaucoup de trucs dans ton template et peu dans ton composant.</p>
</div>
<div class="paragraph">
<p>Dans sa forme la plus simple, tu ajoutes simplement les directives <code>ngModel</code> dans le template, et c&#8217;est tout.
La directive <code>NgModel</code> crée le <code>FormControl</code> pour toi,
et le <code>&lt;form&gt;</code> crée automatiquement le <code>FormGroup</code>.
Note que tu dois donner un <code>name</code> à l&#8217;input,
qui sera utilisé par le framework pour construire le <code>FormGroup</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ngModel</span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ngModel</span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, on doit évidemment faire quelque-chose pour la soumission, et récupérer les valeurs saisies.
Pour cela, on va utiliser une variable locale et lui assigner l&#8217;objet <code>NgForm</code> créé par Angular pour le formulaire.
Tu te rappelles le chapitre
<a href="#local-variables">Template</a>
&#160;?
On va définir une variable, <code>userForm</code>, qui référencera le formulaire.
C&#8217;est possible parce que la directive exporte l&#8217;instance de la directive <code>NgForm</code>,
qui a les mêmes méthodes que la classe <code>FormGroup</code>.
On verra comment exporter des données plus en détail quand on étudiera comment construire des directives.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
<span class="comment">&lt;!-- we use a local variable #userForm --&gt;</span>
<span class="comment">&lt;!-- and give its value to the register method --&gt;</span>
<span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="attribute-name">userForm.value</span><span class="error">)</span><span class="error">&quot;</span> <span class="error">#</span><span class="attribute-name">userForm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ngForm</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ngModel</span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ngModel</span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre méthode <code>register</code> est désormais appelée avec la valeur du formulaire en paramètre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-register</span><span class="delimiter">'</span></span>,
  <span class="key">templateUrl</span>: <span class="string"><span class="delimiter">'</span><span class="content">register.component.html</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RegisterFormComponent {
  register(user) {
    console.log(user);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est seulement du binding uni-directionnel cependant.
Si tu mets à jour le champ, le modèle sera mis à jour,
mais mettre à jour le modèle ne mettra pas à jour la valeur du champ.
Mais <code>ngModel</code> est plus puissant qu&#8217;on ne le croit&#160;!</p>
</div>
<div class="sect3">
<h4 id="_binding_bi_directionnel">16.2.1. Binding bi-directionnel</h4>
<div class="paragraph">
<p>Si tu as utilisé AngularJS&#160;1.x, ou même juste lu un article dessus,
tu as du voir le fameux exemple avec un champ et une expression affichant la valeur de celui-ci,
qui se mettait à jour toute seule dès que l&#8217;utilisateur entrait une valeur dans le champ,
et le champ se mettant à jour automatiquement dès que le modèle changeait.
Le fameux "Binding Bi-directionnel", quelque chose comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="comment">&lt;!-- AngularJS 1.x code example --&gt;</span>
<span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-model</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;p&gt;</span>{{username}}<span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut faire quelque chose de similaire en Angular&#160;2.</p>
</div>
<div class="paragraph">
<p>Tu commences par définir un modèle de ce qui sera saisi dans le formulaire.
On va faire cela dans une classe <code>User</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> User {
  <span class="key">username</span>: string;
  password: string;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre <code>RegisterFormComponent</code> doit avoir un attribut <code>user</code> de type <code>User</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;

<span class="reserved">class</span> User {
  <span class="key">username</span>: string;
  password: string;
}

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-register</span><span class="delimiter">'</span></span>,
  <span class="key">templateUrl</span>: <span class="string"><span class="delimiter">'</span><span class="content">register-form.component.html</span><span class="delimiter">'</span></span>,
})
<span class="reserved">export</span> <span class="reserved">class</span> RegisterFormComponent {
  <span class="key">user</span>: User = <span class="keyword">new</span> User();

  register() {
    console.log(<span class="local-variable">this</span>.user);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, la méthode <code>register()</code> trace désormais directement l&#8217;objet <code>user</code>.</p>
</div>
<div class="paragraph">
<p>On est donc prêt à ajouter les champs dans notre formulaire.
Il nous faut lier les champs au modèle défini.
Et pour cela, il y a donc la directive <code>ngModel</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="error">(</span><span class="attribute-name">ngModel</span><span class="error">)</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">user.username</span><span class="error">&quot;</span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="error">(</span><span class="attribute-name">ngModel</span><span class="error">)</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">user.password</span><span class="error">&quot;</span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Wow&#160;! <code>[(ngModel)]</code>&#160;? Qu&#8217;est-ce que c&#8217;est que ce truc&#160;?!
Ce n&#8217;est que du sucre syntaxique ajouté pour exprimer la même chose que&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="attribute-name">ngModel</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">user.username</span><span class="error">&quot;</span> <span class="error">(</span><span class="attribute-name">ngModelChange</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">user.username</span> = <span class="error">$</span><span class="attribute-value">event</span><span class="error">&quot;</span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La directive <code>NgModel</code> met à jour le modèle lié <code>user.username</code> à chaque changement sur l'<code>input</code>,
d&#8217;où la partie <code>[ngModel]="user.username"</code>.
Et elle génère un événement depuis un output nommé <code>ngModelChange</code> à chaque fois que le modèle est modifié,
où l&#8217;événement est la nouvelle valeur,
d&#8217;où la partie <code>(ngModelChange)="user.username = $event"</code>.</p>
</div>
<div class="paragraph">
<p>Au lieu d&#8217;écrire cette forme verbeuse, on peut donc utiliser la syntaxe raccourcie <code>[()]</code>.
Si, comme moi, tu as du mal à te rappeler si c&#8217;est <code>[()]</code> ou <code>([])</code>,
il y a un très bon moyen mnémotechnique : c&#8217;est une boîte de bananes&#160;!
Mais si, regarde&#160;: le <code>[]</code> est une boîte, et, dedans, il y a deux bananes qui se regardent <code>()</code>&#160;!</p>
</div>
<div class="paragraph">
<p>Maintenant chaque fois qu&#8217;on tapera quelque chose dans le champ,
le modèle sera mis à jour.
Et si le modèle est mis à jour dans notre composant,
le champ affichera automatiquement la nouvelle valeur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="error">(</span><span class="attribute-name">ngModel</span><span class="error">)</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">user.username</span><span class="error">&quot;</span><span class="tag">&gt;</span>
    <span class="tag">&lt;small&gt;</span>{{ user.username }} is an awesome username!<span class="tag">&lt;/small&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="error">(</span><span class="attribute-name">ngModel</span><span class="error">)</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">user.password</span><span class="error">&quot;</span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu essayes l&#8217;exemple ci-dessus, tu verras que le binding bi-directionnel fonctionne.
Et notre formulaire aussi&#160;: si on le soumet, le composant tracera notre objet <code>user</code>&#160;!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_formulaire_piloté_par_le_code">16.3. Formulaire piloté par le code</h3>
<div class="paragraph">
<p>En AngularJS&#160;1.x, tu devais essentiellement construire tes formulaires dans tes templates.
Angular&#160;2 introduit une déclaration impérative, qui permet de construire les formulaires programmatiquement.</p>
</div>
<div class="paragraph">
<p>Désormais, on peut manipuler les formulaires directement depuis le code.
C&#8217;est plus verbeux mais plus puissant.</p>
</div>
<div class="paragraph">
<p>Pour construire un formulaire dans notre code, nous allons utiliser les abstractions dont nous avons parlé:
<code>FormControl</code> et <code>FormGroup</code>.</p>
</div>
<div class="paragraph">
<p>Avec ces briques de bases on peut construire un formulaire dans notre composant.
Mais au lieu d&#8217;utiliser <code>new FormControl()</code> ou <code>new FormGroup()</code>,
on va utiliser une classe utilitaire, <code>FormBuilder</code>, qu&#8217;on peut s&#8217;injecter&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { FormBuilder } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/forms</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-register</span><span class="delimiter">'</span></span>,
  <span class="key">templateUrl</span>: <span class="string"><span class="delimiter">'</span><span class="content">register-form.component.html</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RegisterFormComponent {

  constructor(fb: FormBuilder) {
    <span class="comment">// we will have to build the form</span>
  }

  register() {
    <span class="comment">// we will have to handle the submission</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>FormBuilder</code> est une classe utilitaire, avec plein de méthodes bien pratiques pour créer
des contrôles et des groupes.
Faisons simple, et créons un petit formulaire avec deux contrôles, un nom d&#8217;utilisateur et un mot de passe.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { FormBuilder, FormGroup } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/forms</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-register</span><span class="delimiter">'</span></span>,
  <span class="key">templateUrl</span>: <span class="string"><span class="delimiter">'</span><span class="content">register-form.component.html</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RegisterFormComponent {
  <span class="key">userForm</span>: FormGroup;

  constructor(fb: FormBuilder) {
    <span class="local-variable">this</span>.userForm = fb.group({
      <span class="key">username</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>,
      <span class="key">password</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>
    });
  }

  register() {
    <span class="comment">// we will have to handle the submission</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On a créé un <code>&lt;form&gt;</code> avec deux contrôles.
Tu peux voir que chaque contrôle est créé avec la valeur <code>''</code>.
C&#8217;est la même chose que d&#8217;utiliser la méthode <code>control()</code> du <code>FormBuilder</code> avec cette chaîne de caractères comme paramètre,
et la même chose que d&#8217;appeler le constructeur <code>new FormControl('')</code>&#160;:
la chaîne de caractères représente la valeur initiale que nous voulons afficher dans le formulaire.
Ici elle est vide, donc l&#8217;input sera vide.
Mais tu peux mettre une valeur bien sûr, si tu veux éditer une entité existante par exemple.
La méthode utilitaire peut aussi recevoir d&#8217;autres attributs, que nous verrons plus tard.</p>
</div>
<div class="paragraph">
<p>On veut maintenant implémenter la méthode <code>register</code>.
Comme on l&#8217;a vu, l&#8217;objet <code>FormGroup</code> a un attribut <code>value</code>, alors on peut facilement tracer son contenu avec&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { FormBuilder, FormGroup } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/forms</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-register</span><span class="delimiter">'</span></span>,
  <span class="key">templateUrl</span>: <span class="string"><span class="delimiter">'</span><span class="content">register-form.component.html</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RegisterFormComponent {
  <span class="key">userForm</span>: FormGroup;

  constructor(fb: FormBuilder) {
    <span class="local-variable">this</span>.userForm = fb.group({
      <span class="key">username</span>: fb.control(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>),
      <span class="key">password</span>: fb.control(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>)
    });
  }

  register() {
    console.log(<span class="local-variable">this</span>.userForm.value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On veut maintenant affiner un peu le template.
On va utiliser d&#8217;autres directives que celles que nous avons dans les formulaires "pilotés par le template".
Ces directives sont dans le module <code>ReactiveFormsModule</code> que nous devons importer dans notre module racine.
Leurs noms commencent par <code>form</code> au lieu de <code>ng</code> comme c&#8217;était le cas avec la façon "pilotée par le template".</p>
</div>
<div class="paragraph">
<p>Le formulaire doit être relié à notre objet <code>userForm</code>, grâce à la directive <code>formGroup</code>.
Chaque champ de saisie est relié à un <code>FormControl</code>, grâce à la directive <code>formControlName</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span> <span class="error">[</span><span class="attribute-name">formGroup</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">userForm</span><span class="error">&quot;</span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On utilise la notation avec crochets <code>[formGroup]="userForm"</code> pour relier notre objet <code>userForm</code> à <code>formGroup</code>.
Chaque <code>input</code> reçoit la directive <code>formControlName</code> avec pour valeur le nom du contrôle auquel il est relié.
Si tu indiques un nom qui n&#8217;existe pas, tu auras une erreur.
Comme on passe une valeur (et pas une expression), on n&#8217;utilise pas les <code>[]</code> autour de <code>formControlName</code>.</p>
</div>
<div class="paragraph">
<p>Et c&#8217;est tout&#160;: un clic sur le bouton <em>submit</em> va tracer un objet contenant le nom d&#8217;utilisateur et le mot de passe choisi&#160;!</p>
</div>
<div class="paragraph">
<p>Si tu en as besoin, tu peux mettre à jour la valeur d&#8217;un <code>FormControl</code> depuis ton composant en utilisant <code>setValue()</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { FormBuilder, FormGroup, FormControl } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/forms</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-register</span><span class="delimiter">'</span></span>,
  <span class="key">templateUrl</span>: <span class="string"><span class="delimiter">'</span><span class="content">register-form.component.html</span><span class="delimiter">'</span></span>,
})
<span class="reserved">export</span> <span class="reserved">class</span> RegisterFormComponent {
  <span class="key">usernameCtrl</span>: FormControl;
  passwordCtrl: FormControl;
  userForm: FormGroup;

  constructor(fb: FormBuilder) {
    <span class="local-variable">this</span>.usernameCtrl = fb.control(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>);
    <span class="local-variable">this</span>.passwordCtrl = fb.control(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>);
    <span class="local-variable">this</span>.userForm = fb.group({
      <span class="key">username</span>: <span class="local-variable">this</span>.usernameCtrl,
      <span class="key">password</span>: <span class="local-variable">this</span>.passwordCtrl
    });
  }

  reset() {
    <span class="local-variable">this</span>.usernameCtrl.setValue(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>);
    <span class="local-variable">this</span>.passwordCtrl.setValue(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>);
  }

  register() {
    console.log(<span class="local-variable">this</span>.userForm.value);
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_un_peu_de_validation">16.4. Un peu de validation</h3>
<div class="paragraph">
<p>La validation de données est traditionnellement une partie importante de la construction de formulaire.
Certains champs sont obligatoires, certains dépendent d&#8217;autres,
certains doivent respecter un format spécifique,
certains ne doivent pas avoir de valeur plus grande ou plus petite que X, par exemple.</p>
</div>
<div class="paragraph">
<p>Commençons par ajouter quelques règles basiques&#160;: tous nos champs sont obligatoires.</p>
</div>
<div class="sect3">
<h4 id="_dans_un_formulaire_piloté_par_le_code">16.4.1. Dans un formulaire piloté par le code</h4>
<div class="paragraph">
<p>Pour spécifier que chaque champ est requis, on va utiliser <code>Validator</code>.
Un validateur retourne une <em>map</em> des erreurs, ou <code>null</code> si aucune n&#8217;a été détectée.</p>
</div>
<div class="paragraph">
<p>Quelques validateurs sont fournis par le framework&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Validators.required</code> pour vérifier qu&#8217;un contrôle n&#8217;est pas vide&#160;;</p>
</li>
<li>
<p><code>Validators.minLength(n)</code> pour s&#8217;assurer que la valeur entrée a au moins <em>n</em> caractères&#160;;</p>
</li>
<li>
<p><code>Validators.maxLength(n)</code> pour s&#8217;assurer que la valeur entrée a au plus <em>n</em> caractères&#160;;</p>
</li>
<li>
<p><code>Validators.pattern(p)</code> pour s&#8217;assurer que la valeur entrée correspond à l&#8217;expression régulière <em>p</em> définie.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Les validateurs peuvent être combinés, avec <code>Validators.compose()</code>,
et peuvent s&#8217;appliquer sur un <code>FormControl</code> ou un <code>FormGroup</code>.
Comme on veut que tous les champs soient obligatoires, on peut ajouter
le validator <code>required</code> sur chaque contrôle,
et s&#8217;assurer que le nom de l&#8217;utilisateur fait 3 caractères au minimum.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { FormBuilder, FormGroup, Validators } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/forms</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-register</span><span class="delimiter">'</span></span>,
  <span class="key">templateUrl</span>: <span class="string"><span class="delimiter">'</span><span class="content">register-form.component.html</span><span class="delimiter">'</span></span>,
})
<span class="reserved">export</span> <span class="reserved">class</span> RegisterFormComponent {
  <span class="key">userForm</span>: FormGroup;

  constructor(fb: FormBuilder) {
    <span class="local-variable">this</span>.userForm = fb.group({
      <span class="key">username</span>: fb.control(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, Validators.compose([Validators.required, Validators.minLength(<span class="integer">3</span>)])),
      <span class="key">password</span>: fb.control(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, Validators.required)
    });
  }

  register() {
    console.log(<span class="local-variable">this</span>.userForm.value);
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_dans_un_formulaire_piloté_par_le_template">16.4.2. Dans un formulaire piloté par le template</h4>
<div class="paragraph">
<p>Ajouter un champ requis dans un formulaire piloté par le template est aussi rapide.
Il suffit de rajouter l&#8217;attribut <code>required</code> sur les <code>&lt;input&gt;</code>.
<code>required</code> est une directive fournie par le framework, qui ajoutera automatiquement le validateur sur le champ.
Même chose avec <code>minlength</code> et <code>maxlength</code>.</p>
</div>
<div class="paragraph">
<p>En partant de l&#8217;exemple de binding bi-directionnel&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="attribute-name">userForm.value</span><span class="error">)</span><span class="error">&quot;</span> <span class="error">#</span><span class="attribute-name">userForm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ngForm</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ngModel</span> <span class="attribute-name">required</span> <span class="attribute-name">minlength</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ngModel</span> <span class="attribute-name">required</span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que cela peut s&#8217;utiliser dans un formulaire piloté par le code également.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_erreurs_et_soumission">16.5. Erreurs et soumission</h3>
<div class="paragraph">
<p>Evidemment, on veut que l&#8217;utilisateur ne puisse pas soumettre le formulaire tant qu&#8217;il reste des erreurs,
et ces erreurs doivent être parfaitement affichées.</p>
</div>
<div class="paragraph">
<p>Si tu utilises les exemples plus haut, tu verras que même si les champs sont requis,
on peut quand même soumettre le formulaire. Peut-être qu&#8217;on peut y faire quelque chose&#160;?</p>
</div>
<div class="paragraph">
<p>On sait qu&#8217;on peut facilement désactiver un bouton avec l&#8217;attribut <code>disabled</code>,
mais encore faut-il lui passer une expression qui reflète l&#8217;état de validité du formulaire courant.</p>
</div>
<div class="sect3">
<h4 id="_erreurs_et_soumission_dans_un_formulaire_piloté_par_le_code">16.5.1. Erreurs et soumission dans un formulaire piloté par le code</h4>
<div class="paragraph">
<p>Nous avons ajouter un champ <code>userForm</code>, du type <code>FormGroup</code>&#160;, à notre composant.
Ce champ fournit une vision complète de l&#8217;état du formulaire et de ses champs, incluant ses erreurs de validation.</p>
</div>
<div class="paragraph">
<p>Par exemple, on peut désactiver la soumission si le formulaire n&#8217;est pas valide&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span> <span class="error">[</span><span class="attribute-name">formGroup</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">userForm</span><span class="error">&quot;</span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="attribute-name">disabled</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="error">!</span><span class="attribute-name">userForm.valid</span><span class="error">&quot;</span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois dans la dernière ligne, il suffit de lier <code>disabled</code> à la propriété <code>valid</code> du <code>userForm</code>.</p>
</div>
<div class="paragraph">
<p>Désormais, on ne pourra soumettre que si tous les contrôles sont valides.
Pour informer l&#8217;utilisateur de la raison de cette impossibilité, il faut encore afficher les messages d&#8217;erreur.</p>
</div>
<div class="paragraph">
<p>Toujours grâce au <code>userForm</code>, on peut écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span> <span class="error">[</span><span class="attribute-name">formGroup</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">userForm</span><span class="error">&quot;</span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userForm.get('username').hasError('required')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Username is required<span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userForm.get('username').hasError('minlength')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Username should be 3 characters min<span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userForm.get('password').hasError('required')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Password is required<span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="attribute-name">disabled</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="error">!</span><span class="attribute-name">userForm.valid</span><span class="error">&quot;</span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cool&#160;! Les erreurs sont désormais affichées si les champs sont vides,
et elles disparaissent quand ils ont une valeur. Mais elles sont affichées dès
l&#8217;apparition du formulaire. Peut-être qu&#8217;on devrait les masquer jusqu&#8217;à ce que
l&#8217;utilisateur remplisse une valeur&#160;?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span> <span class="error">[</span><span class="attribute-name">formGroup</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">userForm</span><span class="error">&quot;</span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userForm.get('username').dirty </span><span class="content">&amp;</span><span class="content">&amp;</span> <span class="content">userForm.get('username').hasError('required')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      Username is required
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userForm.get('username').dirty </span><span class="content">&amp;</span><span class="content">&amp;</span> <span class="content">userForm.get('username').hasError('minlength')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      Username should be 3 characters min
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userForm.get('password').dirty </span><span class="content">&amp;</span><span class="content">&amp;</span> <span class="content">userForm.get('password').hasError('required')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      Password is required
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="attribute-name">disabled</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="error">!</span><span class="attribute-name">userForm.valid</span><span class="error">&quot;</span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est un peu verbeux, mais on peut créer des références sur chaque contrôle dans le composant pour améliorer cela&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-register</span><span class="delimiter">'</span></span>,
  <span class="key">templateUrl</span>: <span class="string"><span class="delimiter">'</span><span class="content">register-form.component.html</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RegisterFormComponent {
  <span class="key">userForm</span>: FormGroup;
  usernameCtrl: FormControl;
  passwordCtrl: FormControl;

  constructor(fb: FormBuilder) {
    <span class="local-variable">this</span>.usernameCtrl = fb.control(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, Validators.required);
    <span class="local-variable">this</span>.passwordCtrl = fb.control(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, Validators.required);

    <span class="local-variable">this</span>.userForm = fb.group({
      <span class="key">username</span>: <span class="local-variable">this</span>.usernameCtrl,
      <span class="key">password</span>: <span class="local-variable">this</span>.passwordCtrl
    });
  }

  register() {
    console.log(<span class="local-variable">this</span>.userForm.value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ensuite on utilise ces références dans le template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span> <span class="error">[</span><span class="attribute-name">formGroup</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">userForm</span><span class="error">&quot;</span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">usernameCtrl.dirty </span><span class="content">&amp;</span><span class="content">&amp;</span> <span class="content">usernameCtrl.hasError('required')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Username is required<span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">usernameCtrl.dirty </span><span class="content">&amp;</span><span class="content">&amp;</span> <span class="content">usernameCtrl.hasError('minlength')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Username should be 3 characters min<span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">passwordCtrl.dirty </span><span class="content">&amp;</span><span class="content">&amp;</span> <span class="content">passwordCtrl.hasError('required')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Password is required<span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="attribute-name">disabled</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="error">!</span><span class="attribute-name">userForm.valid</span><span class="error">&quot;</span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_erreurs_et_soumission_dans_un_formulaire_piloté_par_le_template">16.5.2. Erreurs et soumission dans un formulaire piloté par le template</h4>
<div class="paragraph">
<p>Dans un formulaire piloté par le template, nous n&#8217;avons pas de champ dans notre composant référençant le <code>FormGroup</code>,
mais nous avons déjà déclaré une variable locale dans le template,
référençant l&#8217;objet <code>NgForm</code> exporté par la directive.
Une fois encore, cette variable permet de connaître l&#8217;état du formulaire et d&#8217;accéder aux champs.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="attribute-name">userForm.value</span><span class="error">)</span><span class="error">&quot;</span> <span class="error">#</span><span class="attribute-name">userForm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ngForm</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ngModel</span> <span class="attribute-name">required</span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ngModel</span> <span class="attribute-name">required</span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="attribute-name">disabled</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="error">!</span><span class="attribute-name">userForm.valid</span><span class="error">&quot;</span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant il nous faut afficher les erreurs sur chaque champ.</p>
</div>
<div class="paragraph">
<p>Comme le formulaire, chaque contrôle expose son objet <code>FormControl</code>, on peut donc
créer une variable locale pour accéder aux erreurs&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="attribute-name">userForm.value</span><span class="error">)</span><span class="error">&quot;</span> <span class="error">#</span><span class="attribute-name">userForm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ngForm</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ngModel</span> <span class="attribute-name">required</span> <span class="error">#</span><span class="attribute-name">username</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ngModel</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username.control.dirty </span><span class="content">&amp;</span><span class="content">&amp;</span> <span class="content">username.control.hasError('required')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Username is required<span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ngModel</span> <span class="attribute-name">required</span> <span class="error">#</span><span class="attribute-name">password</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ngModel</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password.control.dirty </span><span class="content">&amp;</span><span class="content">&amp;</span> <span class="content">password.control.hasError('required')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Password is required<span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="attribute-name">disabled</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="error">!</span><span class="attribute-name">userForm.valid</span><span class="error">&quot;</span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Yeah&#160;!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_un_peu_de_style">16.6. Un peu de style</h3>
<div class="paragraph">
<p>Quelle que soit la façon que tu as choisie pour créer tes formulaires,
Angular&#160;2 réalise une autre tâche bien pratique pour nous&#160;:
il ajoute et enlève automatiquement certaines classes CSS sur chaque champ (et le formulaire)
pour nous permettre d&#8217;affiner le style visuel.</p>
</div>
<div class="paragraph">
<p>Par exemple, un champ aura la classe <code>ng-invalid</code> si un de ses validateurs échoue,
ou <code>ng-valid</code> si tous ses validateurs passent.
Cela signifie que tu peux facilement ajouter du style, comme la traditionnelle bordure rouge autour des champs invalides&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;style&gt;</span>
<span class="inline">  <span class="tag">input</span><span class="class">.ng-invalid</span> {
    <span class="key">border</span>: <span class="float">3px</span> <span class="value">red</span> <span class="value">solid</span>;
  }</span>
<span class="tag">&lt;/style&gt;</span>
<span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="attribute-name">userForm.value</span><span class="error">)</span><span class="error">&quot;</span> <span class="error">#</span><span class="attribute-name">userForm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ngForm</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ngModel</span> <span class="attribute-name">required</span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ngModel</span> <span class="attribute-name">required</span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="attribute-name">disabled</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="error">!</span><span class="attribute-name">userForm.valid</span><span class="error">&quot;</span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ng-dirty</code> est une autre classe CSS utile, qui sera présente si l&#8217;utilisateur a modifié la valeur.
Son contraire est <code>ng-pristine</code>, présente si l&#8217;utilisateur n&#8217;a jamais modifié la valeur.
En général, je n&#8217;affiche une bordure rouge qu&#8217;une fois que l&#8217;utilisateur a modifié la valeur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;style&gt;</span>
<span class="inline">  <span class="tag">input</span><span class="class">.ng-invalid</span><span class="class">.ng-dirty</span> {
    <span class="key">border</span>: <span class="float">3px</span> <span class="value">red</span> <span class="value">solid</span>;
  }</span>
<span class="tag">&lt;/style&gt;</span>
<span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="attribute-name">userForm.value</span><span class="error">)</span><span class="error">&quot;</span> <span class="error">#</span><span class="attribute-name">userForm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ngForm</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ngModel</span> <span class="attribute-name">required</span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ngModel</span> <span class="attribute-name">required</span><span class="tag">&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="attribute-name">disabled</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="error">!</span><span class="attribute-name">userForm.valid</span><span class="error">&quot;</span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Et enfin, il y a une dernière classe CSS&#160;: <code>ng-touched</code>.
Elle sera présente si l&#8217;utilisateur est entré et sorti du champ au moins une fois (même s&#8217;il n&#8217;a rien modifié)
Son contraire est <code>ng-untouched</code>.</p>
</div>
<div class="paragraph">
<p>Quand tu afficheras un formulaire pour la première fois,
un champ portera généralement les classes CSS <code>ng-pristine ng-untouched ng-invalid</code>.
Ensuite, quand l&#8217;utilisateur sera rentré puis sorti du champ, elle basculeront à <code>ng-pristine ng-touched ng-invalid</code>.
Quand l&#8217;utilisateur modifiera la valeur, toujours invalide, on aura <code>ng-dirty ng-touched ng-invalid</code>.
Et enfin, quand la valeur deviendra valide&#160;: <code>ng-dirty ng-touched ng-valid</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_créer_un_validateur_spécifique">16.7. Créer un validateur spécifique</h3>
<div class="paragraph">
<p>Les courses de poneys sont très addictives (TRÈS), alors on ne peut s&#8217;inscrire que si on a plus de 18 ans.
Et on veut que l&#8217;utilisateur entre son mot de passe deux fois, pour éviter toute erreur de saisie.</p>
</div>
<div class="paragraph">
<p>Comment fait-on cela&#160;? En créant un validateur spécifique.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, il suffit de créer une méthode qui accepte un <code>FormControl</code>,
teste sa <code>value</code>, et retourne un objet avec les erreurs, ou <code>null</code> si
la valeur est valide.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const isOldEnough = (control: FormControl) =&gt; {
  <span class="comment">// control is a date input, so we can build the Date from the value</span>
  const birthDatePlus18 = <span class="keyword">new</span> Date(control.value);
  birthDatePlus18.setFullYear(birthDatePlus18.getFullYear() + <span class="integer">18</span>);
  <span class="keyword">return</span> birthDatePlus18 &lt; <span class="keyword">new</span> Date() ? <span class="predefined-constant">null</span> : { <span class="key">tooYoung</span>: <span class="predefined-constant">true</span> };
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre validation est plutôt simple&#160;: on prend la valeur du contrôle,
on crée une date, on vérifie si le 18ème anniversaire est avant aujourd&#8217;hui,
et on retourne une erreur avec la clé <code>tooYoung</code> ("trop jeune") sinon.</p>
</div>
<div class="paragraph">
<p>Maintenant il nous faut inclure ce validateur.</p>
</div>
<div class="sect3">
<h4 id="_utiliser_un_validateur_dans_un_formulaire_piloté_par_le_code">16.7.1. Utiliser un validateur dans un formulaire piloté par le code</h4>
<div class="paragraph">
<p>On doit ajouter un nouveau contrôle dans notre formulaire, via le <code>FormBuilder</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { FormBuilder, FormControl, FormGroup, Validators } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/forms</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-register</span><span class="delimiter">'</span></span>,
  <span class="key">templateUrl</span>: <span class="string"><span class="delimiter">'</span><span class="content">register-form.component.html</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RegisterFormComponent {
  <span class="key">usernameCtrl</span>: FormControl;
  passwordCtrl: FormControl;
  birthdateCtrl: FormControl;
  userForm: FormGroup;

  <span class="reserved">static</span> isOldEnough(control: FormControl) {
    <span class="comment">// control is a date input, so we can build the Date from the value</span>
    const birthDatePlus18 = <span class="keyword">new</span> Date(control.value);
    birthDatePlus18.setFullYear(birthDatePlus18.getFullYear() + <span class="integer">18</span>);
    <span class="keyword">return</span> birthDatePlus18 &lt; <span class="keyword">new</span> Date() ? <span class="predefined-constant">null</span> : { <span class="key">tooYoung</span>: <span class="predefined-constant">true</span> };
  }

  constructor(fb: FormBuilder) {
    <span class="local-variable">this</span>.usernameCtrl = fb.control(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, Validators.required);
    <span class="local-variable">this</span>.passwordCtrl = fb.control(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, Validators.required);
    <span class="local-variable">this</span>.birthdateCtrl = fb.control(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, Validators.compose([Validators.required, RegisterFormComponent.isOldEnough]));
    <span class="local-variable">this</span>.userForm = fb.group({
      <span class="key">username</span>: <span class="local-variable">this</span>.usernameCtrl,
      <span class="key">password</span>: <span class="local-variable">this</span>.passwordCtrl,
      <span class="key">birthdate</span>: <span class="local-variable">this</span>.birthdateCtrl
    });
  }

  register() {
    console.log(<span class="local-variable">this</span>.userForm.value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, on a ajouté un nouveau contrôle <code>birthdate</code> ("date de naissance"),
avec deux validateurs combinés.
Le premier validateur est <code>required</code>, et le second est la méthode statique <code>isOldEnough</code> de notre classe.
Bien sûr, la méthode pourrait appartenir à une autre classe (<code>required</code> est statique par exemple).</p>
</div>
<div class="paragraph">
<p>N&#8217;oublie pas d&#8217;ajouter le champ et d&#8217;afficher les erreurs dans le formulaire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span> <span class="error">[</span><span class="attribute-name">formGroup</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">userForm</span><span class="error">&quot;</span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">usernameCtrl.dirty </span><span class="content">&amp;</span><span class="content">&amp;</span> <span class="content">usernameCtrl.hasError('required')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Username is required<span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">passwordCtrl.dirty </span><span class="content">&amp;</span><span class="content">&amp;</span> <span class="content">passwordCtrl.hasError('required')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Password is required<span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Birth date<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">birthdate</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">birthdateCtrl.dirty</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">birthdateCtrl.hasError('required')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Birth date is required<span class="tag">&lt;/div&gt;</span>
      <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">birthdateCtrl.hasError('tooYoung')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>You're way too young to be betting on pony races<span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="attribute-name">disabled</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="error">!</span><span class="attribute-name">userForm.valid</span><span class="error">&quot;</span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Plutôt facile, non&#160;?</p>
</div>
</div>
<div class="sect3">
<h4 id="_utiliser_un_validateur_dans_un_formulaire_piloté_par_le_template">16.7.2. Utiliser un validateur dans un formulaire piloté par le template</h4>
<div class="paragraph">
<p>Pour cela, on doit définir une directive custom qui s&#8217;applique sur un <code>input</code>,
mais franchement c&#8217;est beaucoup plus simple en utilisant l&#8217;approche pilotée par le code&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Ou tu peux combiner le meilleur des deux mondes&#160;!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_combiner_les_approches_pilotée_par_le_code_et_pilotée_par_le_template_pour_la_validation">16.8. Combiner les approches pilotée par le code et pilotée par le template pour la validation</h3>
<div class="paragraph">
<p>Tu peux tout faire dans le template, à l&#8217;exception de la validation custom&#160;!
Tu aurais quelque chose comme ça dans la vue&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="attribute-name">formControl</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">usernameCtrl</span><span class="error">&quot;</span> <span class="error">[</span><span class="error">(</span><span class="attribute-name">ngModel</span><span class="error">)</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">user.username</span><span class="error">&quot;</span> <span class="attribute-name">required</span><span class="tag">&gt;</span>
<span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">error</span><span class="delimiter">&quot;</span></span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">usernameCtrl.dirty </span><span class="content">&amp;</span><span class="content">&amp;</span> <span class="content">usernameCtrl.hasError('notAllowed')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Username is not allowed<span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Et dans le composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html">usernameCtrl: FormControl = new FormControl('', RegisterFormComponent.usernameValidator);

static usernameValidator(control: FormControl) {
  return control.value !== 'admin' ? null : { notAllowed: true };
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est un très bon compromis&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>pas besoin de tout écrire comme dans l&#8217;approche pilotée par le code&#160;;</p>
</li>
<li>
<p>pas besoin de composer les validateurs <code>required</code> et <code>usernameAllowed</code> toi-même&#160;: Angular le fait pour toi&#160;;</p>
</li>
<li>
<p>tu as toujours le binding bi-directionnel, que l&#8217;on n&#8217;a pas dans l&#8217;approche pilotée par le code.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>C&#8217;est une solution à garder en tête&#160;:
combiner l&#8217;approche pilotée par le template pour les choses simples et le binding bi-directionnel,
et l&#8217;approche pilotée par le code quand de la validation custom est nécessaire.</p>
</div>
</div>
<div class="sect2">
<h3 id="_regrouper_des_champs">16.9. Regrouper des champs</h3>
<div class="paragraph">
<p>Jusqu&#8217;à présent, on n&#8217;avait qu&#8217;un seul groupe&#160;: le formulaire global.
Mais on peut déclarer des groupes au sein d&#8217;un groupe.
C&#8217;est très pratique si tu veux valider un groupe de champs globalement,
comme une adresse postale par exemple, ou, comme dans notre exemple, si tu veux
vérifier que le mot de passe et sa confirmation sont bien identiques.</p>
</div>
<div class="paragraph">
<p>la solution est d&#8217;utiliser un formulaire piloté par le code
(que l&#8217;on peut combiner avec un formulaire piloté par le template si besoin, comme au-dessus).</p>
</div>
<div class="paragraph">
<p>D&#8217;abord, on crée un nouveau groupe <code>passwordForm</code>, avec les deux champs, et
on l&#8217;ajoute dans le groupe <code>userForm</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { FormBuilder, FormControl, FormGroup, Validators } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/forms</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-register</span><span class="delimiter">'</span></span>,
  <span class="key">templateUrl</span>: <span class="string"><span class="delimiter">'</span><span class="content">register-form.component.html</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RegisterFormComponent {
  <span class="key">passwordForm</span>: FormGroup;
  userForm: FormGroup;
  usernameCtrl: FormControl;
  passwordCtrl: FormControl;
  confirmCtrl: FormControl;

  <span class="reserved">static</span> passwordMatch(control: FormGroup) {
    let password = control.controls[<span class="string"><span class="delimiter">'</span><span class="content">password</span><span class="delimiter">'</span></span>].value;
    let confirm = control.controls[<span class="string"><span class="delimiter">'</span><span class="content">confirm</span><span class="delimiter">'</span></span>].value;
    <span class="keyword">return</span> password === confirm ? <span class="predefined-constant">null</span> : { <span class="key">matchingError</span>: <span class="predefined-constant">true</span> };
  }

  constructor(fb: FormBuilder) {
    <span class="local-variable">this</span>.usernameCtrl = fb.control(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, Validators.required);
    <span class="local-variable">this</span>.passwordCtrl = fb.control(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, Validators.required);
    <span class="local-variable">this</span>.confirmCtrl = fb.control(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, Validators.required);

    <span class="local-variable">this</span>.passwordForm = fb.group(
      { <span class="key">password</span>: <span class="local-variable">this</span>.passwordCtrl, <span class="key">confirm</span>: <span class="local-variable">this</span>.confirmCtrl },
      { <span class="key">validator</span>: RegisterFormComponent.passwordMatch }
    );

    <span class="local-variable">this</span>.userForm = fb.group({ <span class="key">username</span>: <span class="local-variable">this</span>.usernameCtrl, <span class="key">passwordForm</span>: <span class="local-variable">this</span>.passwordForm });
  }

  register() {
    console.log(<span class="local-variable">this</span>.userForm.value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, on a ajouté un validateur sur le groupe, <code>passwordMatch</code>,
qui sera appelé à chaque fois qu&#8217;un des champs est modifié.</p>
</div>
<div class="paragraph">
<p>Mettons à jour le template pour refléter le nouveau formulaire,
grâce à la directive <code>formGroupName</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span> <span class="error">[</span><span class="attribute-name">formGroup</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">userForm</span><span class="error">&quot;</span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">usernameCtrl.dirty </span><span class="content">&amp;</span><span class="content">&amp;</span> <span class="content">usernameCtrl.hasError('required')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Username is required<span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">formGroupName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">passwordForm</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div&gt;</span>
      <span class="tag">&lt;label&gt;</span>Password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">passwordCtrl.dirty </span><span class="content">&amp;</span><span class="content">&amp;</span> <span class="content">passwordCtrl.hasError('required')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Password is required<span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div&gt;</span>
      <span class="tag">&lt;label&gt;</span>Confirm password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">confirm</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">confirmCtrl.dirty </span><span class="content">&amp;</span><span class="content">&amp;</span> <span class="content">confirmCtrl.hasError('required')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Confirm your password<span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">passwordForm.dirty </span><span class="content">&amp;</span><span class="content">&amp;</span> <span class="content">passwordForm.hasError('matchingError')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Your password does not match<span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="attribute-name">disabled</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="error">!</span><span class="attribute-name">userForm.valid</span><span class="error">&quot;</span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Et voilà&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_réagir_aux_modifications">16.10. Réagir aux modifications</h3>
<div class="paragraph">
<p>Dernier bénéfice d&#8217;un formulaire piloté par le code&#160;: tu peux facilement
réagir aux modifications, grâce à l'<em>observable</em> <code>valueChanges</code>. La programmation réactive pour les champions&#160;!
Par exemple, disons que notre champ de mot de passe doit afficher un indicateur de sécurité.
On veut en calculer la robustesse lors de chaque changement du mot de passe&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Component } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { FormBuilder, FormControl, FormGroup, Validators } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/forms</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> <span class="string"><span class="delimiter">'</span><span class="content">rxjs/add/operator/debounceTime</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> <span class="string"><span class="delimiter">'</span><span class="content">rxjs/add/operator/distinctUntilChanged</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ns-register</span><span class="delimiter">'</span></span>,
  <span class="key">templateUrl</span>: <span class="string"><span class="delimiter">'</span><span class="content">register-form.component.html</span><span class="delimiter">'</span></span>
})
<span class="reserved">export</span> <span class="reserved">class</span> RegisterFormComponent {
  <span class="key">userForm</span>: FormGroup;
  usernameCtrl: FormControl;
  passwordCtrl: FormControl;
  passwordStrength: number = <span class="integer">0</span>;

  constructor(fb: FormBuilder) {
    <span class="local-variable">this</span>.usernameCtrl = fb.control(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, Validators.required);
    <span class="local-variable">this</span>.passwordCtrl = fb.control(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, Validators.required);

    <span class="local-variable">this</span>.userForm = fb.group({
      <span class="key">username</span>: <span class="local-variable">this</span>.usernameCtrl,
      <span class="key">password</span>: <span class="local-variable">this</span>.passwordCtrl
    });

    <span class="comment">// we subscribe to every password change</span>
    <span class="local-variable">this</span>.passwordCtrl.valueChanges
      <span class="comment">// only recompute when the user stops typing for 400ms</span>
      .debounceTime(<span class="integer">400</span>)
      <span class="comment">// only recompute if the new value is different than the last</span>
      .distinctUntilChanged()
      .subscribe(newValue =&gt; <span class="local-variable">this</span>.passwordStrength = newValue.length);
  }

  register() {
    console.log(<span class="local-variable">this</span>.userForm.value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant on a un attribut <code>passwordStrength</code> dans notre instance de composant,
qu&#8217;on peut afficher à notre utilisateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;h2&gt;</span>Sign up<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;form</span> <span class="error">(</span><span class="attribute-name">ngSubmit</span><span class="error">)</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">register</span><span class="error">(</span><span class="error">)</span><span class="error">&quot;</span> <span class="error">[</span><span class="attribute-name">formGroup</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">userForm</span><span class="error">&quot;</span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">usernameCtrl.dirty </span><span class="content">&amp;</span><span class="content">&amp;</span> <span class="content">usernameCtrl.hasError('required')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Username is required<span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;label&gt;</span>Password<span class="tag">&lt;/label&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">formControlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div&gt;</span>Strength: {{passwordStrength}}<span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="error">*</span><span class="attribute-name">ngIf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">passwordCtrl.dirty </span><span class="content">&amp;</span><span class="content">&amp;</span> <span class="content">passwordCtrl.hasError('required')</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Password is required<span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="attribute-name">disabled</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="error">!</span><span class="attribute-name">userForm.valid</span><span class="error">&quot;</span><span class="tag">&gt;</span>Register<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On utilise les opérateurs RxJS pour ajouter quelques fonctionnalités bien cools&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>distinctTime(400)</code> émettra seulement des valeurs lorsque l&#8217;utilisateur arrête de taper pendant 400ms.
Cela évite de devoir calculer la force du mot de passe à chaque valeur entrée par l&#8217;utilisateur.
Cela peut être très intéressant si le calcul prend beaucoup de temps, ou lance une requête HTTP.</p>
</li>
<li>
<p><code>distinctUntilChanged()</code> émettra seulement des valeurs si la nouvelle valeur est différente de l&#8217;ancienne.
Très intéressant également&#160;: imagine que l&#8217;utilisateur entre <code>'password'</code> puis s&#8217;arrête.
On calcule la force du mot de passe. Puis il entre un nouveau caractère avant de l&#8217;effacer rapidement (en moins de 400ms).
Le prochain événement qui sortira de <code>distinctTime</code> sera à nouveau <code>'password'</code>.
Cela n&#8217;a pas de sens de recalculer la force du mot de passe à nouveau&#160;!
Cet opérateur n&#8217;émettra même pas la valeur, et nous économise un recalcul.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>RxJS peut faire une tonne de travail pour toi&#160;: imagine si tu devais recoder toi-même ce que l&#8217;on a fait en deux lignes.
Cela peut également se combiner facilement avec des requêtes HTTP, puisque le service <code>Http</code> utilise des observables également.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion_2">16.11. Conclusion</h3>
<div class="paragraph">
<p>Angular&#160;2 propose deux façons de construire un formulaire&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>une en mettant tout en place dans le template.
Mais, comme tu l&#8217;as vu,
ça oblige à écrire des directives custom pour la validation, et c&#8217;est plus dur à tester.
Cette façon est donc plus adaptée aux formulaires simples, qui n&#8217;ont par exemple qu&#8217;un seul ou quelques champs,
et nous donne du binding bi-directionnel.</p>
</li>
<li>
<p>une en mettant quasiment tout en place dans le composant.
Cette façon est plus adaptée à la validation et au test, avec plusieurs niveaux de groupes si besoin.
C&#8217;est donc le bon choix pour construire des formulaires complexes.
Et tu peux même réagir aux changements d&#8217;un groupe, ou d&#8217;un champ.</p>
</li>
<li>
<p>combiner à la fois la verbosité réduite de l&#8217;approche pilotée par le template,
et la puissance de l&#8217;approche pilotée par le code pour la validation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>C&#8217;est peut-être l&#8217;approche la plus pragmatique&#160;:
commence avec une approche orientée template et le binding bi-directionnel si ça te plaît,
et dès que tu as besoin d&#8217;accéder à un champ ou un groupe de champs,
pour par exemple ajouter de la validation custom ou de la programmation réactive,
alors tu peux déclarer ce dont tu as besoin dans le composant,
et lier les inputs et divs à ces déclarations avec les directives adéquates.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Il est possible d&#8217;avoir un formulaire NON transformé dans sa version Angular&#160;2 surpuissante
avec l&#8217;utilisation de l&#8217;attribut <code>ngNoForm</code>
(si pour une raison ou une autre tu as besoin d&#8217;un formulaire classique).
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="http">17. Envoyer et recevoir des données par HTTP</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ce ne sera pas une surprise, mais une grande part de notre travail consiste
à demander des données à un serveur, et de lui en envoyer d&#8217;autres.</p>
</div>
<div class="paragraph">
<p>Traditionnellement, on utilise HTTP, même si de nos jours il y a des alternatives,
comme les WebSockets.
Angular&#160;2 fournit un module http, mais ne te l&#8217;impose pas.
Si tu préfères, tu peux utiliser ta bibliothèque HTTP favorite pour faire des requêtes
asynchrones.</p>
</div>
<div class="paragraph">
<p>Une des nouvelles candidates est l&#8217;API <a href="https://github.com/github/fetch">fetch</a>,
pour le moment disponible sous forme de <em>polyfill</em>, mais elle devrait devenir
standard dans les navigateurs.
Tu peux parfaitement construire ton application en utilisant <code>fetch</code> ou une autre bibliothèque.
En fait, c&#8217;était ce que je j&#8217;utilisais avant que la partie HTTP existe dans Angular&#160;2.
Elle fonctionne très bien, sans besoin d&#8217;aucune plomberie pour informer le framework
de la réception de données et du besoin de déclencher le cycle de détection de changements
(contrairement à AngularJS&#160;1.x, où il fallait invoker <code>$scope.apply()</code> si tu utilisais
une bibliothèque externe&#160;: c&#8217;est la magie d&#8217;Angular&#160;2 et de ses zones&#160;!).</p>
</div>
<div class="paragraph">
<p>Mais si tu es content du framework, tu utiliseras un petit module appelé <code>HttpModule</code>,
codé par l&#8217;équipe interne.
C&#8217;est un module indépendant, donc tu peux vraiment faire comme tu préfères.
Note d&#8217;ailleurs qu&#8217;il ressemble beaucoup à la proposition de spécification de l&#8217;API Fetch.</p>
</div>
<div class="paragraph">
<p>Si tu veux l&#8217;utiliser, il te faudra utiliser les classes du package <code>@angular/http</code>.</p>
</div>
<div class="paragraph">
<p>Pourquoi préférer ce module à <code>fetch</code>&#160;?
La réponse est simple&#160;: pour les tests.
Comme on le verra, le module Http permet de bouchonner ton serveur,
et de retourner des réponses données.
C&#8217;est vraiment, vraiment très utile.</p>
</div>
<div class="paragraph">
<p>Une dernière chose avant de plonger dans l&#8217;API&#160;: le module Http utilise
largement le paradigme de la programmation réactive.
Alors si tu as sauté le
<a href="#reactive-programming">chapitre Programmation réactive</a>
, c&#8217;est le bon moment d&#8217;y retourner et de le lire vraiment cette fois ;).</p>
</div>
<div class="sect2">
<h3 id="_obtenir_des_données">17.1. Obtenir des données</h3>
<div class="paragraph">
<p>Le module Http propose un service nommé <code>Http</code> que tu peux t&#8217;injecter dans n&#8217;importe quel constructeur.
Comme le service est fourni par un autre module, il te faut le rendre disponible
à tes composants et services.
Pour cela il faut importer le module <code>HttpModule</code> dans le module racine&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { NgModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { BrowserModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/platform-browser</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { HttpModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/http</span><span class="delimiter">'</span></span>;

<span class="error">@</span>NgModule({
  <span class="key">imports</span>: [BrowserModule, HttpModule],
  <span class="key">declarations</span>: [PonyRacerAppComponent],
  <span class="key">bootstrap</span>: [PonyRacerAppComponent]
})
<span class="reserved">export</span> <span class="reserved">class</span> AppModule {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand cela est fait tu peux injecter le service <code>Http</code> partout où tu en as besoin&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Component({
  <span class="key">selector</span>: <span class="string"><span class="delimiter">'</span><span class="content">ponyracer-app</span><span class="delimiter">'</span></span>,
  <span class="key">template</span>: <span class="error">`</span><span class="tag">&lt;h1&gt;</span>PonyRacer<span class="tag">&lt;/h1&gt;</span><span class="error">`</span>
})
<span class="reserved">export</span> <span class="reserved">class</span> PonyRacerAppComponent {

  constructor(<span class="reserved">private</span> http: Http) {
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Par défaut, le service <code>Http</code> réalise des requêtes AJAX avec <code>XMLHttpRequest</code>.</p>
</div>
<div class="paragraph">
<p>Il propose plusieurs méthodes, correspondant au verbes HTTP communs&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>get</code></p>
</li>
<li>
<p><code>post</code></p>
</li>
<li>
<p><code>put</code></p>
</li>
<li>
<p><code>delete</code></p>
</li>
<li>
<p><code>patch</code></p>
</li>
<li>
<p><code>head</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Toutes ces méthodes sont en fait du simple sucre syntaxique, qui sous le capot
utilisent la méthode <code>request</code>.</p>
</div>
<div class="paragraph">
<p>Si tu as déjà utilisé le service <code>$http</code> en AngularJS&#160;1.x, tu dois te rappeler
qu&#8217;il utilisait largement les promesses (<em>Promises</em>).
Mais en Angular&#160;2, toutes ces méthodes retournent un objet <code>Observable</code>.</p>
</div>
<div class="paragraph">
<p>L&#8217;utilisation des Observables apporte plusieurs avantages, comme la possibilité
d&#8217;annuler une requête, de la retenter, d&#8217;en composer facilement plusieurs, etc&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Commençons par récupérer les courses enregistrées dans PonyRacer.
On supposera qu&#8217;un serveur est déjà prêt et disponible,
fournissant une belle API RESTful. Pour charger les courses, on enverra une requête
GET sur une URL genre 'http://backend.url/api/races'.</p>
</div>
<div class="paragraph">
<p>Généralement, l&#8217;URL de base de tes appels HTTP sera stockée dans une variable ou
un service, que tu pourras facilement variabiliser selon ton environnement.
Ou, si l&#8217;API REST est servie par le même serveur que l&#8217;application Angular, tu
peux simplement utiliser une URL relative&#160;: '/api/races'.</p>
</div>
<div class="paragraph">
<p>Avec le service <code>Http</code>, une telle requête est triviale&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">http.get(<span class="error">`</span><span class="predefined">$</span>{baseUrl}/api/races<span class="error">`</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela retourne un Observable, et tu peux donc t&#8217;y abonner pour obtenir la réponse.
La réponse est un objet <code>Response</code>, avec quelques champs et méthodes bien pratiques.
Tu peux ainsi facilement accéder au code <code>status</code>, au <code>headers</code>, etc&#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">http.get(<span class="error">`</span><span class="predefined">$</span>{baseUrl}/api/races<span class="error">`</span>)
  .subscribe(response =&gt; {
    console.log(response.status); <span class="comment">// logs 200</span>
    console.log(response.headers); <span class="comment">// logs []</span>
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Évidemment, le corps de la réponse est la partie la plus intéressante.
Mais pour y accéder, il te faudra utiliser une méthode&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>text()</code> si tu t&#8217;attends à du texte;</p>
</li>
<li>
<p><code>json()</code> si tu t&#8217;attends à un objet JSON, le parsing étant fait pour toi.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">http.get(<span class="error">`</span><span class="predefined">$</span>{baseUrl}/api/races<span class="error">`</span>)
  .subscribe(response =&gt; {
    console.log(response.json());
    <span class="comment">// logs the array of races</span>
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Envoyer des données est aussi trivial.
Il suffit d&#8217;appeler la méthode <code>post()</code>, avec l&#8217;URL et l&#8217;objet à poster&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// you currently need to stringify the object you send</span>
http.post(<span class="error">`</span><span class="predefined">$</span>{baseUrl}/api/races<span class="error">`</span>, newRace)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Je ne te montrerai pas les autres méthodes, je suis sûr que tu as compris le principe.</p>
</div>
</div>
<div class="sect2">
<h3 id="_transformer_des_données">17.2. Transformer des données</h3>
<div class="paragraph">
<p>Comme on obtient un objet Observable en réponse,
n&#8217;oublie pas que tu peux facilement transformer les données.</p>
</div>
<div class="paragraph">
<p>Tu veux une liste des noms des courses&#160;? Il suffit de requêter les courses,
et de mapper (<em>map</em>) leur nom&#160;!</p>
</div>
<div class="paragraph">
<p>Pour faire cela, il faut actuellement importer l&#8217;opérateur <code>map</code> pour RxJS.
L&#8217;équipe Angular ne veut pas inclure toute la library RxJS dans nos applications,
il faut donc importer explicitement les opérateurs requis&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> <span class="string"><span class="delimiter">'</span><span class="content">rxjs/add/operator/map</span><span class="delimiter">'</span></span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut ensuite l&#8217;utiliser&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">http.get(<span class="error">`</span><span class="predefined">$</span>{baseUrl}/api/races<span class="error">`</span>)
<span class="comment">// extract json body</span>
  .map(res =&gt; res.json())
  .subscribe(races =&gt; {
    <span class="comment">// store the array of the races in the component</span>
    <span class="local-variable">this</span>.races = races;
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce genre de travail sera généralement réalisé dans un service dédié.
J&#8217;ai tendance à créer un service, genre <code>RaceService</code>, où tout le travail sera réalisé.
Ainsi, mon composant n&#8217;a qu&#8217;à s&#8217;abonner à la méthode de mon service, sans savoir
ce qui est réalisé sous le capot.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">raceService.list()
  .subscribe(races =&gt; {
    <span class="comment">// store the array of the races in the component</span>
    <span class="local-variable">this</span>.races = races;
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux aussi bénéficier de la puissance de RxJS pour par exemple retenter
plusieurs fois une requête en échec.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">raceService.list()
  <span class="comment">// if the request fails, retry 3 times</span>
  .retry(<span class="integer">3</span>)
  .subscribe(races =&gt; {
    <span class="comment">// store the array of the races in the component</span>
    <span class="local-variable">this</span>.races = races;
  });</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_options_avancées">17.3. Options avancées</h3>
<div class="paragraph">
<p>Évidemment, tu peux ajuster tes requêtes plus finement.
Chaque méthode accepte un objet <code>RequestOptions</code> en paramêtre optionnel,
où tu peux configurer ta requête.
Quelques options sont vraiment pratiques, et tu peux tout surcharger dans la requête.
Certaines de ces options ont exactement les même valeurs que celles proposées par l&#8217;API Fetch.
L&#8217;option <code>url</code> est évidente, et surchargera l&#8217;URL de la requête.
L&#8217;option <code>method</code> est le verbe HTTP à utiliser, comme <code>RequestMethod.Get</code>.
Si tu veux construire une requête manuellement, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const options = <span class="keyword">new</span> RequestOptions({ <span class="key">method</span>: RequestMethod.Get });

http.request(<span class="error">`</span><span class="predefined">$</span>{baseUrl}/api/races/<span class="integer">3</span><span class="error">`</span>, options)
  .subscribe(response =&gt; {
    <span class="comment">// will get the race with id 3</span>
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;option <code>search</code> représente les paramètres à ajouter à l&#8217;URL.
Tu peux les définir en utilisant la classe <code>URLSearchParams</code>, et l&#8217;URL complète sera construite pour toi.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const searchParams = <span class="keyword">new</span> URLSearchParams();
searchParams.set(<span class="string"><span class="delimiter">'</span><span class="content">sort</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">ascending</span><span class="delimiter">'</span></span>);

const options = <span class="keyword">new</span> RequestOptions({ <span class="key">search</span>: searchParams });

http.get(<span class="error">`</span><span class="predefined">$</span>{baseUrl}/api/races<span class="error">`</span>, options)
  .subscribe(response =&gt; {
    <span class="comment">// will return the races sorted</span>
    <span class="local-variable">this</span>.races = response.json();
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;option <code>headers</code> est pratique pour ajouter quelques headers custom à ta requête.
Cela est notamment nécessaire pour certaines techniques d&#8217;authentification,
comme par exemple JSON Web Token&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const headers = <span class="keyword">new</span> Headers();
headers.append(<span class="string"><span class="delimiter">'</span><span class="content">Authorization</span><span class="delimiter">'</span></span>, <span class="error">`</span>Bearer <span class="predefined">$</span>{token}<span class="error">`</span>);

http.get(<span class="error">`</span><span class="predefined">$</span>{baseUrl}/api/races<span class="error">`</span>, <span class="keyword">new</span> RequestOptions({ headers }))
  .subscribe(response =&gt; {
    <span class="comment">// will return the races visible for the authenticated user</span>
    <span class="local-variable">this</span>.races = response.json();
  });</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jsonp">17.4. Jsonp</h3>
<div class="paragraph">
<p>Pour te permettre d&#8217;utiliser leur API sans être bloqué par la <em>Same Origin Policy</em> ("politique de même origine") assurée par les navigateurs web,
certains services web n&#8217;utilisent pas CORS, mais JSONP (<em>JSON with Padding</em>).</p>
</div>
<div class="paragraph">
<p>Le serveur ne retournera pas le JSON directement, mais l&#8217;emballera dans une fonction passée en callback.
La réponse arrive alors sous forme de script, et les scripts ne sont pas soumis à la <em>Same Origin Policy</em>.
Une fois chargé, tu peux alors accéder à la valeur JSON contenue dans la réponse.</p>
</div>
<div class="paragraph">
<p>En plus du module <code>HttpModule</code>, il y a aussi un <code>JsonpModule</code>,
qui fournit un service <code>Jsonp</code> qui facilite les interactions avec de telles APIs,
et assure tout le travail de plomberie pour nous.
Tout ce que tu as à faire est de fournir l&#8217;URL du service à appeler,
et d&#8217;ajouter <code>JSONP_CALLBACK</code> comme valeur du paramètre de callback.</p>
</div>
<div class="paragraph">
<p>Dans l&#8217;exemple ci-dessous, je vais récupérer tous les dépôts publics de
notre organisation Github via JSONP.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">jsonp.get(<span class="string"><span class="delimiter">'</span><span class="content">https://api.github.com/orgs/Ninja-Squad/repos?callback=JSONP_CALLBACK</span><span class="delimiter">'</span></span>)
<span class="comment">// extract json</span>
  .map(res =&gt; res.json())
  <span class="comment">// extract data</span>
  .map(res =&gt; res.data)
  .subscribe(response =&gt; {
    <span class="comment">// will return the public repos of Ninja-Squad</span>
    <span class="local-variable">this</span>.repos = response;
  });</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tests">17.5. Tests</h3>
<div class="paragraph">
<p>Nous avons maintenant un service appelant une API REST pour récupérer les courses.
Comment testons-nous ce service&#160;?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Injectable()
<span class="reserved">export</span> <span class="reserved">class</span> RaceService {
  constructor(<span class="reserved">private</span> http: Http) {
  }

  list() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.http.get(<span class="string"><span class="delimiter">'</span><span class="content">/api/races</span><span class="delimiter">'</span></span>).map(res =&gt; res.json());
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans un test unitaire, on ne veut pas vraiment appeler le serveur HTTP&#160;: ce n&#8217;est pas ce que nous testons.
Nous voulons faire un "faux" appel HTTP pour retourner de fausses données.
Pour cela, nous pouvons remplacer la dépendance au service <code>Http</code> par une implémentation bouchonnée
en utilisant une classe fournie par le framework appelée <code>MockBackend</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { async, inject, TestBed } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core/testing</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { BaseRequestOptions, Response, ResponseOptions, RequestMethod } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/http</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { MockBackend, MockConnection } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/http/testing</span><span class="delimiter">'</span></span>;

<span class="reserved">import</span> <span class="string"><span class="delimiter">'</span><span class="content">rxjs/add/operator/map</span><span class="delimiter">'</span></span>;

describe(<span class="string"><span class="delimiter">'</span><span class="content">RaceService</span><span class="delimiter">'</span></span>, () =&gt; {

  let raceService;
  let mockBackend;

  beforeEach(() =&gt; TestBed.configureTestingModule({
    <span class="key">providers</span>: [
      MockBackend,
      BaseRequestOptions,
      {
        <span class="key">provide</span>: Http,
        <span class="key">useFactory</span>: (backend, defaultOptions) =&gt; <span class="keyword">new</span> Http(backend, defaultOptions),
        <span class="key">deps</span>: [MockBackend, BaseRequestOptions]
      },
      RaceService
    ]
  }));

  beforeEach(inject([RaceService, MockBackend], (service, mock) =&gt; {
    raceService = service;
    mockBackend = mock;
  }));

  it(<span class="string"><span class="delimiter">'</span><span class="content">should return an Observable of 2 races</span><span class="delimiter">'</span></span>, async(() =&gt; {
    <span class="comment">// fake response</span>
    let hardcodedRaces = [<span class="keyword">new</span> Race(<span class="string"><span class="delimiter">'</span><span class="content">London</span><span class="delimiter">'</span></span>), <span class="keyword">new</span> Race(<span class="string"><span class="delimiter">'</span><span class="content">Lyon</span><span class="delimiter">'</span></span>)];
    let response = <span class="keyword">new</span> Response(<span class="keyword">new</span> ResponseOptions({ <span class="key">body</span>: hardcodedRaces }));

    <span class="comment">// on a the connection</span>
    mockBackend.connections.subscribe((connection: MockConnection) =&gt; {
      <span class="comment">// return the fake response when we receive a request</span>
      connection.mockRespond(response);
    });

    <span class="comment">// call the service</span>
    raceService.list().subscribe(races =&gt; {
      <span class="comment">// check that the returned array is deserialized as expected</span>
      expect(races.length).toBe(<span class="integer">2</span>);
    });
  }));
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et on peut également ajouter quelques assertions sur la requête HTTP sous-jacente&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// on a the connection</span>
mockBackend.connections.subscribe((connection: MockConnection) =&gt; {
  <span class="comment">// return the fake response when we receive a request</span>
  connection.mockRespond(response);

  <span class="comment">// check that the underlying HTTP request was correct</span>
  expect(connection.request.method).toBe(RequestMethod.Get);
  expect(connection.request.url).toBe(<span class="string"><span class="delimiter">'</span><span class="content">/api/races</span><span class="delimiter">'</span></span>);
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et le tour est joué&#160;!</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="router">18. Routeur</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Ce chapitre utilise la dernière version du routeur (v3).
Cela veut dire que le package du routeur a un numéro de version bizarre en <code>3.0.0</code>
alors que les autres packages du framework ont un numéro de version en <code>2.0.0</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Il est classique de vouloir associer une URL à un état de l&#8217;application.
En effet, on veut qu&#8217;un utilisateur puisse mettre une page en favori et y revenir plus tard,
et ça donne une meilleure expérience en général.</p>
</div>
<div class="paragraph">
<p>La partie en charge de ce travail s&#8217;appelle un routeur, et chaque framework a le sien (voire même plusieurs).</p>
</div>
<div class="paragraph">
<p>Le routeur d&#8217;Angular&#160;2 a un objectif simple&#160;: permettre d&#8217;avoir des URLs compréhensibles qui
reflètent l&#8217;état de notre application, et déterminer pour chaque URL quels composants initialiser et insérer dans la page.
Tout cela sans rafraîchir la page et sans lancer de requête auprès de notre serveur&#160;:
c&#8217;est tout l&#8217;intérêt d&#8217;avoir une <em>Single Page Application</em>.</p>
</div>
<div class="paragraph">
<p>Tu sais probablement qu&#8217;il y a un routeur natif dans AngularJS&#160;1.x,
maintenu par l&#8217;équipe du framework, dans un module nommé <code>ngRoute</code>.
Tu sais aussi peut-être qu&#8217;il est très basique&#160;: il suffit pour des applications simples,
mais il ne permet qu&#8217;une seule vue par URL, sans imbrication possible.
C&#8217;est donc trop limité pour de grosses applications, où on a souvent des vues dans des vues.
Il y a cependant un autre module très populaire dans la communauté, nommé <code>ui-router</code>,
que beaucoup de monde utilise et qui fait du très bon boulot.</p>
</div>
<div class="paragraph">
<p>Avec Angular&#160;2, l&#8217;équipe a décidé de réduire l&#8217;écart et a écrit un nouveau module <code>RouterModule</code>.
Et ce module va probablement répondre à tous tes besoins&#160;!</p>
</div>
<div class="paragraph">
<p>Quelques-unes des ses nouvelles fonctionnalités sont vraiment intéressantes.
Alors lançons-nous&#160;!</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Ce module <code>router</code> est toujours en cours d&#8217;évolution,
alors ce chapitre ne sera qu&#8217;une brève introduction.
On ira plus loin dans une mise à jour future,
quand le module sera vraiment finalisé.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_en_route">18.1. En route</h3>
<div class="paragraph">
<p>Commençons à utiliser le routeur.
C&#8217;est un module optionnel&#160;; il n&#8217;est donc pas inclus dans le noyau du framework.
Comme nous l&#8217;avons vu avec les autres modules,
tu dois l&#8217;inclure dans le module racine si tu veux l&#8217;utiliser.
Mais pour ça,
nous avons besoin d&#8217;une configuration
pour définir les associations entre les URLs et les composants.
Cela peut se faire dans un fichier dédié, généralement nommé <code>app.routes.ts</code>,
et contenant un tableau représentant la configuration&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { Routes } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/router</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { HomeComponent } from <span class="string"><span class="delimiter">'</span><span class="content">./home/home.component</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { RacesComponent } from <span class="string"><span class="delimiter">'</span><span class="content">./races/races.component</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> const ROUTES: Routes = [
  { <span class="key">path</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, <span class="key">component</span>: HomeComponent },
  { <span class="key">path</span>: <span class="string"><span class="delimiter">'</span><span class="content">races</span><span class="delimiter">'</span></span>, <span class="key">component</span>: RacesComponent }
];</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensuite nous devons importer le module routeur dans notre module racine,
initialisé avec la bonne configuration&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { NgModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/core</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { BrowserModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/platform-browser</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { RouterModule } from <span class="string"><span class="delimiter">'</span><span class="content">@angular/router</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { ROUTES } from <span class="string"><span class="delimiter">'</span><span class="content">./app.routes</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { HomeComponent } from <span class="string"><span class="delimiter">'</span><span class="content">./home/home.component</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> { RacesComponent } from <span class="string"><span class="delimiter">'</span><span class="content">./races/races.component</span><span class="delimiter">'</span></span>;


<span class="error">@</span>NgModule({
  <span class="key">imports</span>: [BrowserModule, RouterModule.forRoot(ROUTES)],
  <span class="key">declarations</span>: [PonyRacerAppComponent, HomeComponent, RacesComponent],
  <span class="key">bootstrap</span>: [PonyRacerAppComponent]
})
<span class="reserved">export</span> <span class="reserved">class</span> AppModule {
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Tu dois aussi déclarer tous les composants utilisés par le routeur
dans les <code>declarations</code> du module racine.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Comme tu le vois, les <code>Routes</code> sont un tableau d&#8217;objets, chacun d&#8217;eux étant une&#8230;&#8203; route.
Une configuration de route est en général une paire&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>path</code>&#160;: quelle URL va déclencher la navigation&#160;;</p>
</li>
<li>
<p><code>component</code>&#160;: quel composant sera initialisé et affiché&#160;.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tu te demandes peut-être où le composant sera inclus dans la page, et c&#8217;est une bonne question.
Pour qu&#8217;un composant soit inclus dans notre application, comme le <code>RacesComponent</code> de l&#8217;exemple ci-dessus,
il faut utiliser un tag spécial dans le template du composant principal&#160;: <code>&lt;router-outlet&gt;</code>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdYAAAGWCAIAAABKIDVhAAAbRUlEQVR42u3df2hV9/348UIWMnHBCUFEREQITop0IRBCkRBECMEFERmUUkRCGJNS/CMURxFXZMhAREREhCBSSieOIhJsJkJXJLgwBFtCKTKE1IVWstQZQluCzbff18f3ej5n9+benJuk+ah5PP6Qe88599z3/fXM+557Y174HoD/Iy+4CwAkGGAFJ/j/AbAsJBhAggEkWIIBJBhAggGQYAAJBkCCASQYAAkGkGAAJBhAggGQYAAJBkCCASQYQIIlGECCASQYAAkGkGAAJBhAggGQYAAJBkCCASQYAAkGkGAAJBjgeU/wCwArw1Oa4O8BnnfRukePHk1PT3/zzTczMzPfffedBAMsX4I///zzL7/88quvvooQR4UlGGD5Ejw6OvqPf/xjfHw8KhxzYQkGWL4EDw8Pf/zxx1HhmAvHRFiCAZYvwR988EFUOObCn3/++aNHjyQYYPkS/Kc//ekvf/nL3//+95gIf/XVVxIMIMEAEizBABIMIMESDCDBABIswQASDCDBEgwgwQASLMEAEgwgwRIMIMEAEizBgAQ/Jwku+dOkdXV1mzZtevvtt5fhfixRX1+/a9euiYmJ5X9QDx48mMZw8eLFJd/5+fPnW1tbVz3R1tZ29uzZlfA6ufKEXiDBNacwOXz48DInOOnt7V3mR3R2drapqSld++7du3+kuOd1d3evhNeJd2ZIcM0vlZmZmWPHjsWSdevWLfNL9L333oslq1evXuZHdGhoKP8mYGpqaqn2/OGHH6bdnjx58vETZ86cSUvihASDBM/9UkmHBbKzo6OjMT1Mb6VjBhdnSy4+Pj7+yiuvRD3jUl1dXV988UWs2rt3b8mMb/v27bEkvROvdL0NDQ3Z2RMnTmzZsiWy2NjYeODAgfwxipGRkR07dsTGcaWx6sGDB2l5ZO7o0aMbNmyIVS0tLZcvXy4Z6meffdbW1vbqq69my/fv3x/L9+3bF4OPExcuXMgPacMTt2/fjr3FBi+99NKNGzcKro37JHZ45MiR/A7T1cWdU/C+jVu9a9eu2Hlcxd27d2N4mzZtirOtra3x/CsyjAU/gkXuz/ILxk/x/JT/2rVrqoEEF01wvOSOHz8eS5qbm9OSe/furVmzJv+iirPZiz8tiZdofoM9e/Zks9p4ZcY+4+zDhw/T2vTyrjQL7uzsTGejNZXev3/66aeRkvyqrVu3xis/637eqVOn8kONpse/UY3s9kY+Ysm7775b/jNjzhsYtygGUGTtxo0bU/RLjnvEUNN9UuS+bW9vz9auX78+v3H8ECoyjAU/gkXuz/ILSjASvATHZGMGmjaIOWYK0+TkZGQ0JlNxNhbmL/6b3/wm3r9HXFI300w2KpPmlelFeOnSpfJqlNi8eXP0Im3Q09MTS6LLKSL5iXmaSMaVxjXGLCxVIBr60UcfxYlt27bFwtgsZoIxg45LpbPpKl5//fWUv+TKlSvp+EPctDT4dLrk/on5Xbr5cSLOxgCKrE03v8qdX+S+PXnyZNzMmPWns6dPn87OZndI9WEs+BEscn/OeUEHIpDgBSY4XmNRtJgIZxusXbs2lmdlTDWMhfmLxytwzml1eid+6NChON3b21s+hypPcLzXzuanMZ/65JNPopKxh/xu05zu/v376ezNmzffeeedqFK2WYn09jmd/vrrr/M3P42wo6MjTsdb/rTNwMBAyc3J5oxxIs42NTUVWTtvgmu6b0uilj9bfRgLfgSL3J+VHnoJRoKX5mOT8o6Uz78q7fD999+P0y+++GKcbm5uTocOKx0AefXVV9MsNS2JOVea3sbEqrOzs8jLO82Oy6WpdPmlIvHp1mVT/vSuP38sYs4bWP3mZ2vTgYisjMnY2Fi8Lfjwww9rvW/nTXCl/Sz4Eaz1/pRgJHjpE1wyh4qCpIOJRRIcYY2Axtm4s/JHIea8YMxkY0n2QVnMiOPs9evX0/HT/PaNjY3ZMeVw69atS5cu3b59+/Dhw7H8tddeK3hL0zWWyx+LSEuym58mmCU3v9LaNMU+evRo/kr37dsXC3t6emq9b+dNcKVhLPgRrPX+lGAkeOkTnB1JjCpNTk6m44wlRxKr7DDNbXfu3JkOa84bxOyDsjR3Gx0djf5GxfLb//rXv05piGns/fv302Q5pmbDw8PpDfidO3dis8HBwfQdgPyxy/w1pqOiczp//nzJYdb8zS8/Fjzn2vSltLghsbe4FfED6fTp0+ki586dq/W+nTfBlYax4Eew1vuzfEjffvutZCDBi0pwzJ7SrDMTs6psSjVvgq9evZpdMDt6O+cF0+d1LS0t6fBiR0dH/hrTienp6VgVRUiBzmSXKv8EPzuuXXKNU1NTMdtNH3Dlh/Hyyy+nnxn5S61bty7bYTSo5BsRldaGvr6+Kr+aUdN9O2+CKw1jMY9g8fuzZEn25Q3fiECCF5Xg7598qzSmTg1P7NmzJ5+YeRMcU7/0BbL29vbq13v37t20MGZq6d10a2trVLKzszOusb+/P3KWvZ5jgrZjx44IccTl4MGD2XGDmBfH2+d4/ceqtra2dNRyzmscGBhIU9SS38WIGWs6FpGGkS4VD3b6ym38e/PmzZJ9VlqbxIQ3rY37Ie6Ekl9QLn7fzpvgKsNY8CNY/P4sWfLuu+/GQxNXF4+UaiDB/5fS0c/sI69n7vGuct8+JUc8HXhFgiV4DrOzs2NjY+lYbZyQYAkGCV4+2bea8t+FkGAJBgleDn19fatWrero6Mh+4eKZk46fLmztUzJIkGD/ZTuABANIsAQDSDCABEswgAQDSLAEA0gwgARLMIAEA0iwBAMSLMEAEizBgARLMIAEA0iwBANIMIAESzCABJfeJIDlJMH/dZP8aAWWcyYrwRIMSLAEAxIswQASLMGABEswgARLMCDBEjz3Bcu/4rf47/1VuS7PXZBgCZZgQIIlGJBgCa6+8OTJk1u3bm1oaFi/fn1/f//Dhw+zVSdOnNiyZUtdXV1jY+OBAwcmJiayVbdu3Wppaamvr9++fftHH31UcJ9ps3v37nV0dMQqz3WQ4BWd4N7e3pLfDY90pmJeuHChZFV3d3e61N27dyPK2fLs9Lz7TGcj6/FvU1OT5zpI8POf4Er/DcfIyEicWLNmzejoaJwdGxtra2uLJYcOHYqzPT09cfq9996L0zFvjdMx581Htqura3JyMtoaJwruM23W19c3PT09OzvruQ4SvHITfPjw4TlXbdy4MdY+fvx4Zmbmk08+uXLlSgQ0P89dt25dnI77N52NEwX3mU5PTU15loMEr/QDEfv3758zl42NjbH2xo0bGzZsiLMNDQ2dnZ35XVXa7bz79KkdSLAE/2fhsWPH4sSOHTvmvPjmzZtj7fXr1+P07OxsfldNTU3pU7V0dmxsrOA+JRgkWIL/s/DOnTtxoq6u7v33308lbW1tjTnvG2+8EWfr6+tj7ejoaPT36NGj+V2lqW5XV9fDhw8nJyfzx4Kr71OCQYIl+H8X9vX1lRwxaG5uTl8+6+joyBauXbs2nZieno5Vn376aQp0snr16oL7lGCQYAn+r4UnTpzYunVrJHXDhg39/f0xq03L4+6LCWzMZzs7O6O5sSraeu3atbT2xo0bL730Ulwq/v3oo4/2PzHvPiUYJNh/0wMgwRIMSLAEA0iwBAMSLMGABEuwBAMSLMGABEswgARLMCDBEgwgwRIMSLAEA0iwBAMSLMEAEizBgARLMIAESzAgwRIMIMESDEiwBANIsAQDEizBgARLsAQDEizBgARLMIAESzAgwRIMIMESDEiwBANIsAQDEizBABIswYAESzCABEswIMESDCDBEgxI8NOYYIDlJMEAz+QMWoIBJFiCAQmWYAAJBpBgCQaQYAAJlmAACQaQYAkGkGAACZZgAAkGkGAJBpBgAAmWYAAJBpBgCQYkWIIBJFiCAQmWYAAJBpBgCQaQYAAJlmAACQaQYAkGkOAXAJaXBP/XTfKjFVjOmawESzAgwRIMSLAEA0iwBAMSLMEAEizBgARLMIAESzAgwRIMIMESDEiwBANIsAQDEizBABIswYAESzCABEswIMESDEiwBEswIMESDEiwBNdyqTnV19dv3779zJkzT//z4N133+3u7m5sbIwxx789PT2xZEmeXov8A4UgwRK8wARnTp48uYSP2e4fLMnepqamOjo65hz2zp07p6enFzOwWhO8tDcNJHhlJTi/cHZ29tChQ2n55s2bl/YxW8Kp5d69e7Pgfvrpp7Hk7t27u3btSgtj7WIGVutQzZqRYAlesiY+fvw4OyLxdCb45s2baVfbtm379ttvs+UzMzMvvvhiWjU8PCzBIMHPcII3bNiQLRwcHOzp6ckfdb1y5UrBkF27dq3kWMHAwEDaZmRkpLu7e9WqVbHblpaWU6dOzbnP8fHxffv2NTQ0pLD29vaW7Cdz4cKFtCq2WfDAyi9SaZxVbhpIsAQv5EBEf39/Wn706NG0sK+vb86jrlnmFla6q1evlu8z4l6+h61bt6YTMf+N5Vu2bEln79+/X3KjItZpVXNz81IluMo4JRgJluCl/zgupnuHDx9Om128eDEt3LRp0+3bt2PJnTt34nRJceZ9O19ydmZmpqmpKc52dXVNTEzE1PvIkSOV9rl79+4HDx6knxDxb0xFq7zxz27CwgZWsqSmcXplIsESvAQJjrf8hw4dSpu1t7dnc8bsskNDQ2nhjh07Fla6y5cvp7PxHj+7SCr7zp07Sy5y7969/MiLJDg7kL3IBNc0Tq9MJFiCF3Ug4osvvmhpaUnLBwcHY0nkOJ1NM9DseMUiJ5vZ4Y5ya9asqZ62zZs3Z8eIS1bF+Eu+zrHIBC9mnCDBElxbgsPp06fT8nPnzs2b4Fi7sNJVOr5cfZ/JgQMH0vILFy6UrKrp47giGyxmnCDBElxzgo8dO5aWv/766/kDEUNDQ9k22cdQsXbOvWWNrlS6M2fOpLPpIG9NI6zypbRYkv/gbgEDK1mymHGCBEtwzQl+66238gkeGBjIPo6Lu+z7J9/Q2rhxY8lHUo2NjWnJ1atXI3NHjx6tVLqpqak4OzY2VldXF2f379//8OHDWHL9+vV169bF1PLgwYPzpm3Pnj0lv5oR/3Z2dpb/akatAyu53prGme0BJFiCF5jgd955J/uoLc0xs+/hlog36dml3nzzzfyqtWvXluy/ubm55Jtb2QQzr7W1dXJyct4ERw2z4Jb/gnI+hQsYWKUJe6Vxlu8BJFiCF5jgzz77LFuVvZ0fHByMiWf2qxkxzcwfl8iOYMRMOTbYtm3brVu39v8grY25c3t7e/0Tly5dSgtjJ1HS9CsPbW1tx48fn5mZKf4GP/03PatXr46Lx7+7d+/O9ryYgZVfb/VxznnTQIIlGECCJRiQYAkGkGAJBiRYggEkWIIBCZZgAAmWYECCJRhAgiUYkGAJBpBgCQYkWIIBCZZgCQYkeIUn+MCBA//+97+X4bH3Jyr4kZ4MP/azq6b9P81PdQl+GhOc/mjmX//6Vwl+pu3+gQRLsAQ/YwlOfve73+X/pJsEr/CppdvuQIQEL+vTN/zyl7/87LPPvEhk6NmasP/Yt72mAT/Nb0ck+GlPcPjpT3965syZZQjEyMhId3d3+qtCLS0tp06dqr6Hc+fO7dixI22/devWY8eO5f8K0eDgYE9PT/YnmuL0lStX5hxAzPT379/f0NCwfv36N998M86ePXs2/YWkWNLf35+9Fdjwg9u3b8cI0/WeOHFidnY2v+d5r/r7J388tKurKwZfV1cX1/XGG2/k/7Tz+Ph4LGlubo5RpZ3Exvk/Z5cNPrZ85ZVX0t98isH84Q9/+D73h7Hn/VN41Ycx74OSH8a+fftitMPDw0XGX/3JUP3WFXkC1PTXtQveFdWfvcUHI8ESXFuCk127dv3zn//88RJ89erV8iuNeFW6eKwq376joyOt7evrm/NW9Pb2lg8g+yvOyebNm0sulf15umxJVDi/Qbx0s90WueqLFy+WbxD7TK/5sbGxpqamOXfy1ltvVR9JOHz4cMEEVx9GkQclWxjRyf5KYZHxF0zwnLeuyBOg1gTPe1dUH3BNg5FgCV5IgsPPfvazP//5zz9GgmO+kF600bKJiYnHjx8fOXKkSjuyv4Xc2dkZ28ckNF6Zacn777+fvZxiLhPT1dj+zp07cbpkh/lXdezhxo0b2ZK33347vySmciUXaW9vn3giTqQlMQnKv5KrX/XGjRvTktHR0biiP/7xj/m+xPwrnY0pedwVseTWrVuVRhKTxMnJydjJ6dOns78tXfCVX30YRR6U7CriXXaqVeynyPgLJrjSrav+BFhAgqvfFdUHXOtgJFiCv//5z3/+Qu0iwSk0S57gy5cvp9PxtjfbIJVr586d5ZfNwpdtH8/7eCO8d+/eGGG2NiaD2UWGhobSwni3WDKA8jeM2YGFSq/k9HY7H5c05Sl41VGibFYYjf7666+vPRGnY220O52dmppKKbxw4UKlkTx8+DC7B+btTonqwyjyoGRXce/evWybIuMvmOBKt676E2ABCa5+V1QfcK2DkWAJXsgsOJ5nS/u5XP552d/fX6n7a9asqdKOkoOwVdZmr+FVq1YVPz5Y6ZWc7blktwWv+uTJk/nbuH79+gMHDly/fj27SJS9r68v7vNsh0XyWmuCqw+jyINS6SrmHX/BBFfapvoTYAEJnvcRqbL/WgcjwRJcW4J/8pOf/P73v1/yb6fln5eVjp9WeutaX19f5TldvYPl7+WXLcH52xJP2XjZv/zyy+WHSs+ePZvOrlu37rXXXov34Plju0uY4OrDKPKgzHkVRca/yARXfwIs7OO4KndF9f3XOhgJluAaEvyLX/zib3/72496LfmjaVU+g8576aWX0vbx2Kcljx8/fvXVV1955ZWBgYHsjeHQ0FB2kawCsXbxCY5ZXloyPDyclsRLN/+etMpVT0xM3HwivXn/4osvsiOPKW0xBSu5NyYnJ5c8wfMOo8iDMudVFBn/IhNc/Qkw7w5LDmvMe1dUH3Ctg5FgCS4ax9/+9rc/3m8q55+XY2NjdXV16bsH6fBfvAeMOVS8AA4ePFh+2RMnTmRRGx8fj1fUoUOHsvbF8z77TCy9KkZGRrLPW8o/SlpAgiO48bqNxLS2tqYl58+fjw2KXHW81NPZ7du3379/P9/xLVu25KfS6YByFCH/gfsCEpyOyZaYdxhFHpQ5h1Fk/ItMcPUnQPkeGhsb09mrV6/GxkePHs1vMO9dUX3AtQ5GgiV4/mE0NTUNDg4uT+hLvuSQF4GLCVT5ZeNZvmvXrvLt9+zZkzbo7e2d8x10vLkuHtwqaYgS5Xfb3d2dXaTIVXd1dZVvEL1LzSrfQ1xdqmGYnp4umODm5ubqX0qrPowiD8qcwygy/kUmeN4nQMke3nzzzfxma9euLdlg3ruiyoBrHYwES/A8fvWrX/3rX/9atrl2tiSmDJ2dnenL7W1tbcePH8//qkV5hU+fPh3zjrR9zF9OnjyZPwIbP0LiNZD9fsTevXvzBwcWmeB4zqVfzYhZUoyz/Fczql91GnxHR0cMPn26Fe9bsw/fv/322yNHjsQ8OhKwYcOGmFLFjPvtt9/ue+Ly5csFExwT8Lh/6p+4dOlSpfuw0jCKPChzDqPI+BeZ4HmfAOV7OHbsWPp1m23btt26dWv/D4rfFUs4GAmWYJbmxwY8609pCZZgCQYJlmAkGAmWYJ5aDT9wVyDBEgwgwRIMSLAEA0iwBAMSLMEAEizBgARLMIAESzAgwRIMSLAESzAgwRIMSLAEA0iwBAMSLMEAEizBgARLMIAESzAgwc9ZggGWkwQDPJMzaAkGkGAJBiRYggEkGECCJRhAggEkWIIBJBhAgiUYQIIBJFiCASQYQIIlGECCASRYggEkGECCJRiQYAkGkGAJBiRYggEkGECCJRhAggEkWIIBJBhAgiUYQIJfAFheEvxfN8mPVmA5Z7ISLMGABEswIMESDCDBEgxIsAQDSPBTmOAqXzRpamry9AIk+HlI8O4feMqCBEtwaYKX4XFanisCJFiCJRgkWIKXooyDg4M9PT2NjY319fXxb5y+cuVK8W2uXbtWcohjYGAgrRoZGenu7l61alVcqqWl5dSpU3OObXx8fN++fQ0NDcPDw57xIMErKMF9fX1zHinu7e0tuE2lBF+9erX8ItHu8rFt3bo1nbh586ZnPEjwivg4bmZm5uLFi+n0pk2bbt++HdvfuXMnTudLWmSb8tbHzpuamuJsV1fXxMTE48ePjxw5Uukiu3fvfvDgQSyZnZ31jAcJXikJbm9vT6djJptdZGhoKC3csWNHnC2yTXmCL1++nM6OjIxkl0rh3rlzZ8lF7t2754kOErziDkQ0NDSktfnpZ5xOC1etWlVwm/Ir6u/vr5T+NWvWFDxIAkjwyk1wrC24TfkVVTp8XOUigASvrARnBxmGhoayhdnHa7G24DblV3TmzJl0Nh3kXcDYAAl+zhM8MDCQfdQW99H3T75GtnHjxvznZkW2yV/R1NRUnB0bG6urq4uz+/fvf/jwYSy5fv36unXrYgp88OBBCQYJluD/0dvbO+fhgr6+vpq2aW5uLvlSWjYRzmttbZ2cnJRgkGAJ/o/BwcE9e/Zkv3axd+/e/DGHgtvE1Li9vb3+iUuXLqWFsU1nZ2f61Yy2trbjx4/PzMw4EAES7D+rBJBgCQYkWIIBJFiCAQmWYAAJlmBAgiUYkGAJlmBAgiUYkGAJBpBgCQYkWIIBJFiCAQmWYAAJlmBAgiUYQIIlGJBgCQaQYAkGJFiCASRYggEJlmBAgiVYggEJlmBAgiUYQIIlGJBgCQaQYAkGJFiCASRYggEJlmAACZZgQIIlGECCJRiQYAkGkOAiNwlgOUkwwDM5g5ZgAAmWYECCJRhAggEkWIIBJBhAgiUYQIIBJFiCASQYQIIlGECCASRYggEkGECCJRhAggEkWIIBCZZgAAmWYECCJRhAggEkWIIBJBhAgiUYQIIBJFiCAZ6bBAOsBE9jgsOjR48+//zz0dHR4eHhDz744E8Az6PoW1QuWhfFi+49LQmenp7+8ssv48fCxx9/HOP7C8DzKPoWlYvWRfGie09Lgr/55puYk4+Pj8fI4ufD3wGeR9G3qFy0LooX3XtaEjwzMxM/EGJM8ZMh5uf/AHgeRd+ictG6KF5072lJ8HfffRejiZ8JMaxHjx59BfA8ir5F5aJ1Ubzo3tOSYAAkGECCAZBgAAkGQIIBJBhAgiUYQIIBJBgACQaQYAAkGECCAZBgAAkGQIIBJBgACQaQYAAkGECCASRYggEkGECCAZBggBWWYACWmQQDSDDAyvP/Ada26WPCqT3oAAAAAElFTkSuQmCC" alt="diag bce41779a0d2b9c84694333555976586" width="470" height="406">
</div>
</div>
<div class="paragraph">
<p>C&#8217;est évidemment une directive Angular,
dont le seul rôle est de marquer l&#8217;emplacement du template du composant de la route actuelle.
Le template de notre application ressemblera donc à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;header&gt;</span>
  <span class="tag">&lt;nav-bar&gt;</span>...<span class="tag">&lt;/nav-bar&gt;</span>
<span class="tag">&lt;/header&gt;</span>
<span class="tag">&lt;main&gt;</span>
  <span class="tag">&lt;router-outlet&gt;</span><span class="tag">&lt;/router-outlet&gt;</span>
  <span class="comment">&lt;!-- the component's template will be inserted here--&gt;</span>
<span class="tag">&lt;/main&gt;</span>
<span class="tag">&lt;footer&gt;</span>made with <span class="entity">&amp;lt;</span>3 by Ninja Squad<span class="tag">&lt;/footer&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand on naviguera, tout restera en place (le <em>header</em>, le <em>main</em>, et le <em>footer</em> ici),
et le composant correspondant à la route actuelle sera inséré à la suite de la directive <code>RouterOutlet</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_navigation">18.2. Navigation</h3>
<div class="paragraph">
<p>Comment peut-on naviguer entre différents composants&#160;?
Bien sûr, tu peux saisir manuellement l&#8217;URL correspondante et recharger la page,
mais cela n&#8217;est pas très pratique.
On ne veut pas non plus utiliser des liens "classiques", avec <code>&lt;a href=""&gt;&lt;/a&gt;</code>.
En effet, un clic sur un tel lien entraîne un rechargement de la page, et redémarre donc l&#8217;application Angular toute entière.
Le but d&#8217;Angular est justement d&#8217;éviter ces rechargements&#160;: on construit une <em>Single Page Application</em>.
Bien sûr, une solution existe.</p>
</div>
<div class="paragraph">
<p>Dans un template, tu peux insérer un lien avec la directive <code>RouterLink</code> pointant sur le chemin où tu veux aller.
On peut utiliser cette directive car notre module racine importe <code>RouterModule</code>,
rendant toutes les directives exportées par <code>RouterModule</code> disponibles dans le module racine.
La directive <code>RouterLink</code> peut recevoir soit une constante représentant le chemin vers lequel tu veux naviguer,
soit un tableau de chaînes de caractères,
représentant le chemin de la route et ses paramètres.
Par exemple, dans le template de <code>RacesComponent</code>, si on veut aller sur <code>HomeComponent</code>,
on peut imaginer écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">routerLink</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Home<span class="tag">&lt;/a&gt;</span>
<span class="comment">&lt;!-- same as --&gt;</span>
<span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="attribute-name">routerLink</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="error">[</span><span class="error">'</span><span class="error">/</span><span class="error">'</span><span class="error">]</span><span class="error">&quot;</span><span class="tag">&gt;</span>Home<span class="tag">&lt;/a&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A l&#8217;exécution, le lien <code>href</code> sera calculé par le routeur et pointera sur <code>/</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Le <em>slash</em> de début dans le chemin est nécessaire.
S&#8217;il n&#8217;est pas inclus, <code>RouterLink</code> construit une URL relativement au chemin courant
(ce qui peut être utile en cas de composants imbriqués, comme on le verra plus tard).
Ajouter un <em>slash</em> indique que l&#8217;URL doit être calculée depuis l&#8217;URL de base de l&#8217;application.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La directive <code>RouterLink</code> peut être utilisée avec la directive <code>RouterLinkActive</code>,
qui peut ajouter une classe CSS automatiquement si le lien pointe sur la route courante.
Cela permet notamment de styler une entrée de menu comme active quand elle pointe sur la page courante.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">routerLink</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">routerLinkActive</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">selected-menu</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Home<span class="tag">&lt;/a&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Il est aussi possible de naviguer depuis le code, en utilisant le service <code>Router</code> et sa méthode <code>navigate()</code>.
C&#8217;est souvent pratique quand on veut rediriger notre utilisateur suite à une action&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">export</span> <span class="reserved">class</span> RacesComponent {
  constructor(<span class="reserved">private</span> router: Router) {
  }

  saveAndMoveBackToHome() {
    <span class="comment">// ... save logic ...</span>
    <span class="local-variable">this</span>.router.navigate([<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>]);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>La méthode prend en paramètre un tableau dont le premier élément est le chemin
vers lequel tu souhaites rediriger l&#8217;utilisateur.</p>
</div>
<div class="paragraph">
<p>Il est également possible d&#8217;avoir des paramètres dans l&#8217;URL,
et c&#8217;est très pratique pour définir des URLs dynamiques.
Par exemple, on pourrait afficher une page de détail pour un poney,
et cette page aurait une URL significative comme <code>ponies/id-du-poney/le-nom-du-poney</code>.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, rien de compliqué.
On définit une route dans la configuration avec un (ou plusieurs) paramètre(s) dynamique(s).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">export</span> const routes: Routes = [
  { <span class="key">path</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, <span class="key">component</span>: HomeComponent },
  { <span class="key">path</span>: <span class="string"><span class="delimiter">'</span><span class="content">races</span><span class="delimiter">'</span></span>, <span class="key">component</span>: RacesComponent },
  { <span class="key">path</span>: <span class="string"><span class="delimiter">'</span><span class="content">races/:raceId/ponies/:ponyId</span><span class="delimiter">'</span></span>, <span class="key">component</span>: PonyComponent }
];</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut alors définir des liens dynamiques avec <code>routerLink</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="error">[</span><span class="attribute-name">routerLink</span><span class="error">]</span><span class="error">=</span><span class="error">&quot;</span><span class="error">[</span><span class="error">'</span><span class="error">/</span><span class="attribute-name">races</span><span class="error">'</span><span class="error">,</span> <span class="attribute-name">race.id</span><span class="error">,</span> <span class="error">'</span><span class="attribute-name">ponies</span><span class="error">'</span><span class="error">,</span> <span class="attribute-name">pony.id</span><span class="error">]</span><span class="error">&quot;</span><span class="tag">&gt;</span>See pony<span class="tag">&lt;/a&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Et bien sûr on peut récupérer ces paramètres assez facilement dans le composant cible.
Ici, grâce à l&#8217;injection de dépendances, notre composant <code>PonyComponent</code> reçoit un objet du type <code>ActivatedRoute</code>.
Cet objet peut être utilisé dans <code>ngOnInit</code>, et a un champ bien pratique&#160;: <code>snapshot</code>.
Ce champ contient tous les paramètres de l&#8217;URL dans <code>params</code>&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">export</span> <span class="reserved">class</span> PonyComponent <span class="reserved">implements</span> OnInit {
  <span class="key">pony</span>: any;

  constructor(<span class="reserved">private</span> ponyService: PonyService, <span class="reserved">private</span> route: ActivatedRoute) {
  }

  ngOnInit() {
    let id = <span class="local-variable">this</span>.route.snapshot.params[<span class="string"><span class="delimiter">'</span><span class="content">ponyId</span><span class="delimiter">'</span></span>];
    <span class="local-variable">this</span>.ponyService.get(id).subscribe(pony =&gt; <span class="local-variable">this</span>.pony = pony);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce hook est aussi le bon endroit pour faire travail d&#8217;initialisation du composant.</p>
</div>
<div class="paragraph">
<p>Comme tu l&#8217;as peut-être remarqué, nous utilisons <code>snapshot</code>. Cela veut-il dire qu&#8217;il y a une version non instantanée&#160;?
En effet. Et cela nous donne une façon de nous abonner aux changements de paramètre, avec,
tu l&#8217;as deviné, un observable.
Cet observable est appelé <code>params</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Très important: le routeur va réutiliser le composant s&#8217;il le peut&#160;!
Supposons que notre composant a un bouton "Suivant" pour le poney suivant.
Quand l&#8217;utilisateur cliquera sur le bouton, l&#8217;URL va changer de <code>/ponies/1</code> à <code>/ponies/2</code> par exemple.
Le routeur va alors réutiliser notre instance de composant&#160;:
cela veut dire que <code>ngOnInit</code> ne sera pas appelée à nouveau&#160;!
Si tu veux que ton composant se mette à jour pour ce genre de navigation,
il n&#8217;y a pas d&#8217;autre choix que d&#8217;utiliser l&#8217;observable <code>params</code>&#160;!
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">export</span> <span class="reserved">class</span> PonyReusableComponent <span class="reserved">implements</span> OnInit, OnDestroy {
  <span class="key">pony</span>: any;
  paramsSubscription: Subscription;

  constructor(<span class="reserved">private</span> ponyService: PonyService, <span class="reserved">private</span> route: ActivatedRoute) {
  }

  ngOnInit() {
    <span class="local-variable">this</span>.paramsSubscription = <span class="local-variable">this</span>.route.params.subscribe(params =&gt; {
      let id = params[<span class="string"><span class="delimiter">'</span><span class="content">ponyId</span><span class="delimiter">'</span></span>];
      <span class="local-variable">this</span>.ponyService.get(id).subscribe(pony =&gt; <span class="local-variable">this</span>.pony = pony);
    });
  }

  ngOnDestroy() {
    <span class="local-variable">this</span>.paramsSubscription.unsubscribe();
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici nous nous abonnons à l&#8217;observable offert par <code>ActivatedRoute</code>
et stockons l&#8217;abonnement dans un champ,
afin de nous désabonner plus tard dans <code>ngOnDestroy</code> pour éviter une fuite mémoire.
Maintenant, à chaque fois que l&#8217;URL changera de <code>/ponies/1</code> à <code>/ponies/2</code> par exemple,
l&#8217;observable <code>params</code> va émettre un événement,
et nous pourrons récupérer le bon poney à afficher à l&#8217;écran.</p>
</div>
<div class="paragraph">
<p>Note qu&#8217;au lieu de nous abonner au résultat du <code>PonyService</code>
dans l&#8217;abonnement des mises à jour des paramètres
on peut utiliser l&#8217;opérateur, plus élégant, <code>switchMap</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">export</span> <span class="reserved">class</span> PonySwitchMapComponent <span class="reserved">implements</span> OnInit, OnDestroy {
  <span class="key">pony</span>: any;
  paramsSubscription: Subscription;

  constructor(<span class="reserved">private</span> ponyService: PonyService, <span class="reserved">private</span> route: ActivatedRoute) {
  }

  ngOnInit() {
    <span class="local-variable">this</span>.paramsSubscription = <span class="local-variable">this</span>.route.params
      .map(params =&gt; params[<span class="string"><span class="delimiter">'</span><span class="content">ponyId</span><span class="delimiter">'</span></span>])
      .switchMap(id =&gt; <span class="local-variable">this</span>.ponyService.get(id))
      .subscribe(pony =&gt; <span class="local-variable">this</span>.pony = pony);
  }

  ngOnDestroy() {
    <span class="local-variable">this</span>.paramsSubscription.unsubscribe();
  }
}</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="zones">19. Les Zones et la magie d&#8217;Angular</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Développer avec AngularJS&#160;1.X dégageait un sentiment de "magie",
et Angular&#160;2 procure toujours ce même effet&#160;:
tu entres une valeur dans un <code>input</code> et hop!, magiquement, toute la page se met à jour en conséquence.</p>
</div>
<div class="paragraph">
<p>J&#8217;adore la magie, mais je préfère comprendre comment fonctionnent les outils que j&#8217;utilise.
Si tu es comme moi, je pense que cette partie devrait t&#8217;intéresser&#160;:
on va se pencher sur le fonctionnement interne d&#8217;Angular&#160;2&#160;!</p>
</div>
<div class="paragraph">
<p>Mais d&#8217;abord, laisse moi t&#8217;expliquer comment fonctionne AngularJS&#160;1.x,
ce qui devrait être intéressant, même si tu n&#8217;en as jamais fait.</p>
</div>
<div class="paragraph">
<p>Tous les frameworks JavaScript fonctionnent
d&#8217;une façon assez similaire&#160;: ils aident le développeur
à réagir aux événements de l&#8217;application, à mettre à jour son état
et à rafraîchir la page (le DOM) en conséquence.
Mais ils n&#8217;ont pas forcément tous le même moyen d&#8217;y parvenir.</p>
</div>
<div class="paragraph">
<p>EmberJS par exemple, demande aux développeurs d&#8217;utiliser des <em>setters</em>
sur les objets manipulés pour que le framework puisse "intercepter"
l&#8217;appel au setter et connaître ainsi les changements appliqués au modèle,
et pouvoir modifier le DOM en conséquence.
React, lui, a opté pour recalculer tout le DOM à chaque changement mais,
comme mettre à jour tout le DOM est une opération coûteuse,
il fait d&#8217;abord ce rendu dans un DOM virtuel, puis n&#8217;applique que la différence
entre le DOM virtuel et le DOM réel.</p>
</div>
<div class="paragraph">
<p>Angular, lui, n&#8217;utilise pas de <em>setter</em>, ni de DOM virtuel.
Alors comment fait-il pour savoir ce qui doit être mis à jour&#160;?</p>
</div>
<div class="sect2">
<h3 id="_angularjs_1_x_et_le_em_digest_cycle_em">19.1. AngularJS&#160;1.x et le <em>digest cycle</em></h3>
<div class="paragraph">
<p>La première étape est donc de détecter une modification du modèle.
Un changement est forcément déclenché par un événement provenant
soit directement de l&#8217;utilisateur
(par exemple un clic sur un bouton, ou une valeur entrée dans un champ de formulaire)
soit par le code applicatif (une réponse HTTP, une exécution de méthode asynchrone après un <code>timeout</code>, etc&#8230;&#8203;).</p>
</div>
<div class="paragraph">
<p>Comment fait donc le framework pour savoir qu&#8217;un événement est survenu&#160;?
Et bien c&#8217;est simple, il nous force à utiliser ses directives,
par exemple <code>ng-click</code> pour surveiller un clic, ou <code>ng-model</code> pour surveiller un input,
et ses services, par exemple <code>$http</code> pour les appels HTTP ou <code>$timeout</code> pour exécuter du code asynchrone.</p>
</div>
<div class="paragraph">
<p>Le fait d&#8217;utiliser ses directives et services permet au framework d&#8217;être parfaitement informé du fait qu&#8217;un
événement vient de se produire.
C&#8217;est ça la première partie de la magie&#160;!
Et c&#8217;est cette première partie qui va déclencher la seconde&#160;:
il faut maintenant que le framework analyse le changement qui vient de survenir,
et puisse déterminer quelle partie du DOM doit être mise à jour.</p>
</div>
<div class="paragraph">
<p>Pour cela, en version 1.x, le framework maintient une liste de <em>watchers</em> (des <em>observateurs</em>)
qui représente la liste de ce qu&#8217;il doit surveiller.
Pour simplifier, un <em>watcher</em> est créé pour chaque expression dynamique utilisée dans un template.
Il y a donc un <em>watcher</em> pour chaque petit bout dynamique de l&#8217;application,
et on peut donc avoir facilement plusieurs centaines de <em>watchers</em> dans une page.</p>
</div>
<div class="paragraph">
<p>Ces <em>watchers</em> ont un rôle central dans AngularJS&#160;1.x&#160;:
ils sont la mémoire du framework pour connaître l&#8217;état de notre application.</p>
</div>
<div class="paragraph">
<p>Ensuite, à chaque fois que le framework détecte un changement,
il déclenche ce que l&#8217;on appelle le <em>digest</em> (la <em>digestion</em>).</p>
</div>
<div class="paragraph">
<p>Ce <em>digest</em> évalue alors toutes les expressions stockées dans les <em>watchers</em>
et compare leur nouvelle valeur avec leur ancienne valeur.
Si un changement est constaté entre la nouvelle valeur d&#8217;une expression et son ancienne valeur,
alors le framework sait que l&#8217;expression en question doit être remplacée par sa nouvelle valeur dans le DOM
pour refléter ce changement.
Cette technique est ce que l&#8217;on appelle du <em>dirty checking</em>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag ef36dbea49aaa03c9f85be881e09e880" width="590" height="154">
</div>
</div>
<div class="paragraph">
<p>Pendant ce <em>digest</em>, AngularJS parcourt toute la liste des <em>watchers</em>,
et évalue chacun d&#8217;eux pour connaître la nouvelle valeur de l&#8217;expression surveillée.
Avec une subtilité de taille&#160;: ce cycle va être effectué dans son intégralité
tant que les résultats de tous les <em>watchers</em> ne sont pas stables,
c&#8217;est à dire tant que la dernière valeur calculée n&#8217;est pas la même que la nouvelle valeur.
Car bien sûr, un <em>watcher</em>, lorsqu&#8217;il détecte un changement de valeur de l&#8217;expression qu&#8217;il observe,
déclenche un callback.
Et ce callback peut lui-même modifier à nouveau le modèle,
et donc changer la valeur d&#8217;une ou plusieurs expressions surveillées&#160;!</p>
</div>
<div class="paragraph">
<p>Prenons un exemple minimaliste&#160;: une page avec deux champs à remplir par l&#8217;utilisateur,
son nom et son mot de passe, et un indice de robustesse du mot de passe. Un <em>watcher</em> est utilisé pour surveiller les
changements du mot de passe, et recalculer sa robustesse
chaque fois qu&#8217;il change.</p>
</div>
<div class="paragraph">
<p>Nous avons alors cette liste de <em>watchers</em> après la première
itération du cycle de <em>digest</em>,
lorsque l&#8217;utilisateur a saisi le premier caractère de son mot de passe&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="predefined">$$watchers</span> (expression -&gt; value)
- <span class="string"><span class="delimiter">&quot;</span><span class="content">user.name</span><span class="delimiter">&quot;</span></span> -&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">Cédric</span><span class="delimiter">&quot;</span></span>
- <span class="string"><span class="delimiter">&quot;</span><span class="content">user.password</span><span class="delimiter">&quot;</span></span> -&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">h</span><span class="delimiter">&quot;</span></span>
- <span class="string"><span class="delimiter">&quot;</span><span class="content">passwordStrength</span><span class="delimiter">&quot;</span></span> -&gt; <span class="integer">0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La fonction de callback du <em>watcher</em> qui observe le mot de
passe est alors appelée, et elle calcule la nouvelle valeur
de <code>passwordStrength</code>&#160;: 3.</p>
</div>
<div class="paragraph">
<p>Mais Angular n&#8217;a aucune idée des changements appliqués au modèle. Il lance donc une deuxième itération pour savoir si le
modèle est stable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="predefined">$$watchers</span>
- <span class="string"><span class="delimiter">&quot;</span><span class="content">user.name</span><span class="delimiter">&quot;</span></span> -&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">Cédric</span><span class="delimiter">&quot;</span></span>
- <span class="string"><span class="delimiter">&quot;</span><span class="content">user.password</span><span class="delimiter">&quot;</span></span> -&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">h</span><span class="delimiter">&quot;</span></span>
- <span class="string"><span class="delimiter">&quot;</span><span class="content">passwordStrength</span><span class="delimiter">&quot;</span></span> -&gt; <span class="integer">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce n&#8217;est pas le cas&#160;: la valeur de <code>passwordStrength</code> a
changé depuis la première itération. Une nouvelle itération
est donc lancée.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="predefined">$$watchers</span>
- <span class="string"><span class="delimiter">&quot;</span><span class="content">user.name</span><span class="delimiter">&quot;</span></span> -&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">Cédric</span><span class="delimiter">&quot;</span></span>
- <span class="string"><span class="delimiter">&quot;</span><span class="content">user.password</span><span class="delimiter">&quot;</span></span> -&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">h</span><span class="delimiter">&quot;</span></span>
- <span class="string"><span class="delimiter">&quot;</span><span class="content">passwordStrength</span><span class="delimiter">&quot;</span></span> -&gt; <span class="integer">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette fois, c&#8217;est stable.
C&#8217;est seulement à ce moment-là qu&#8217;AngularJS&#160;1.x applique les résultats sur le DOM.
Cette boucle de <em>digest</em> est donc jouée au moins 2 fois à chaque changement dans l&#8217;application.
Elle peut être jouée jusqu&#8217;à 10 fois mais pas plus&#160;: après 10 cycles,
si les résultats ne sont toujours pas stables,
le framework considère qu&#8217;il y a une boucle infinie et lance une exception.</p>
</div>
<div class="paragraph">
<p>Donc mon schéma précédent ressemble en fait plus à&#160;:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAk4AAAC2CAIAAACgZZX/AAAXp0lEQVR42u2de2gVR/vHCzbEQwwqBJEgIqXBCpU0BEKQIBICNlgJYgWREEREKpLaYsUiwajFUmK9Vm1LW9vaixe0tWp9vVBrrdVaRa1abS3Feo1GI1Ex3tvf1zyv89t395yTc445uZx8Pn+E3dmZ2dl5nn2+M7uzJ0/8CwAAkNI8QRcAAABSBwAAkBJS9w8AAEAKgdQBAABSBwAAgNQBAAAgdQAAAEgdAAAAUgcAAIDUAQAAIHUAAIDUAQAAIHUAAABIHQAAAFIHAACA1AEAACB1AAAASB0AACB1SB0AACB1AAAASB0AAABSBwAAgNQBAAAgdQAAAEgdAAAAUgcAAEgdAAAAUgcAAIDUAQAAIHUAAABIHQAAAFIHAACA1AEAAFKH1AEAAFLXHE9Aa5Fi7ohB8Ul8EpLhV8mSun8h+aifGxoabty40djYeOfOnfv376dAWMGs+CQ+CS3uV0hdxzb/6dOna2tr6+vr5QTyAMIK4JP4JH6F1KWa+Y8ePfrnn3+eO3dOHqDxDmEF8El8Er9C6lLN/Lt37z58+LA8QOMdDXYIK4BP4pP4FVKXaubfvHmzPEDjHc3uGxoaCCuAT+KT+BVSl2rmX7ly5ZYtW3755RcNdjSvJ6wAPolP4ldIHeZvbcaOHXv16tW29Ry3Xjnsbidxlda5ZHwSkDrw82ETqR1W1Mh+/frt2LGjk0vdsEcgdZ3EJ32fhYVCIZ100qRJdXV1vpwbN24cPnx4ZmZmWlqa/mpbKWGrWrVqlUt8//33W9OssZzl6yaQOkjQgTp6WDFef/31ZtdNtY7UpbbYIHXtxCcjfQo9YMCABw8euGwzZswIm2327NnBqioqKlzi6NGj25vUJa8xSB1S12HCinjuueeOHz/e5lLXJhMspK6z+aSvw2/durVgwYIuXbooURMyS/z1118t27hx4/7++2+lnDt3buLEiZaooz7zPfXUU67C7OxspK6jSt28efP69++fnp7eu3fvKVOmXL16VYmVlZWqUHZ12XRIKcoTpZTrd7mOhj8ZGRlpaWlDhw69cOFC9NO5gtqVz9lThfz8fPXv8uXL+/bt63ZjrCdsA3bt2uW93xKb9Xe4sCK6du26ePHipErdhx9+mJeXp94OhULDhw//448/mn2AqdCTm5trj49k9CtXrmQ/wuX5+eefS0tLVaeyqX6FLd95t27dKvsqg8KZ/ER+e/HiRaV/++23vk6I9NT63XffLSoqslPIozSuv3PnjtLHjh1rBXfv3u0b1CvnjRs3ohcPe8nNXk4nkbrk+WTYuD9z5kwljhw50nYnTJig3VGjRvmyjRkzRuk66q1KTqW/FkCkiy4lbAuD6d4U8+0DBw7YnSLn3759uzfznj177NDAgQN37tzpq23u3LkSXfm57hc5Z11dnTzN26XyeWW7d++e5qw6kWKjaluzZg1S9xCNa3wuqNtVsqF70na1YTkHDBig3VdffTVKKWda79hHlJWVRT+dKzhkyBDvUcmYd1cxJcZ6wjag00qdUVJScubMmWRIXUVFhe9cPXv2jC51wSLmYN4833zzTfAqpKPuvJ988kkwg0wvtYtR6lRbsIbBgwfr0I4dO2x32rRpLn/37t2VIsFrtnjwkpu9nE4ldUnyybAi9NdffymxV69etpuTk6Nd9ZUvm1IsknirKi8v118TjC+//NKlJCB1wdAkVfvtt9/sqEaH0jB3yG3bUY34fV2nMVNYqRsxYoQvZ8IjqtSROtMz3b1Hjx61MUtBQYFSJk+erF2NINx9bsMZ84/opSybRkbXrl178OCBWUjji2ZPZwW1rfGyCrpQtWjRIu1aWXlGjPWEbUDnfIDppVu3brppW1bqPv/8c3cPW/g4dOiQG/mGlbpVq1a5IbM9L9IY1jusUYpu46ysLG1r0qYBrMaqVVVVPtHq06ePpcgTZOu33nrLJ07RnzW98847boClU6gGFbSUdevWufqlwd77xcWUZovHezn4ZJKkztIteghtaNf76s5QijdWWFUmbxpbu4n+ihUrHkfq5ABXrlzRuFwb3heBNnz3HXVlbVClxjjldpfjzWZzQXnsuXPntKtZo2aBymm7nVfq3J3pQ3e4m/VrBGRPadx29FK27XUjZ4mECyapnmSElR49erTn3ylXWFm2bFnLSp0mMVa5dwHbf/7znyhS5+bu3iLa9uZR+PM9VxCmoMXFxbarqGR5pk+fLn29efPmt01oOxapKyws9J1CbjNy5EiNi+Xw2lW1lsGenNsdoQmreVezxeO9HHyyPUidT0I06XRTPXvwYEqTsNS5tzDa0K4GQLarSWfwqCursZFGSxoXfv311xrTB6u1bXfIR2KPMVNH6oIPkdzc2dvXmmLbmGLGjBnNlopi7IQLJqmezjaCVmgOuxbgMaXO6Y03dljUiCR1oVAobBFbPmB57N1wWDShd+9rfY+7Ne7eunVrjAtDwrbcy4kTJyyDTqRde3hQWVkZY3Hv2WO5HHwySVJnD6XcA0x7XhV8gHngwAHvIhRXlY1I7PWzdzydmNRFEuDoZTU/syef8jo3UgxmixQbbTrYeaVu9uzZ3hdgkYa9VVVVNg6SsZstFcVgCRdMUj2dJ6w8+eST1dXVkVZ4t77UmTtFl7rx48dH0gbv42iZQDo0aNAgbwbNxmKROteMKFdn8qbgcvXqVcu8Z8+eGIt7zx7j5eCTyZA6ixhuWYrZIrgsxdYcTZw40VeVvZyzRSv6+5hSp0mhd97mBjr2fNsdde+MbLdfv37atmGcu7mCp7AnXmowKzD/h0OHDqmU4ou9WlDn5ufn68Zz49ZFixbZuEN/c3NzYykVxdgJF0xGPW4FXcqHlWeeeUbROXkfGziZsTdYsTzAHDhwoG17V6C5ZSCWx70JsxWVQerq6nY1YdHhwoUL7l2d73VLpAuUS7s30O4xkWKZQp57f2a3gJzNvh32rjtvtnhcl9OppC55Pukz982bNxcsWGARzH1sYAHE3sCZ8+ivG4v4PjZwb6OtkuXLl0eROhv22Sfn165dc1N537s6DZuuXLnie1dnEzLfUVfWzm7vpN1Hgd5qb926pe3du3fbQ1F7hr9x48ZQE539XV3YwWZOTo77ZQFtuIH23LlzYykVXWkSLtiC9bjlD51hBeZLL73U7K8xPabU2XtcW2NiQV9/oy9LsVG2Wc3WFkmx3BoTy6MRjPmeQoCtrdWQtlevXoomNu5262klnGfOnHH3efAZlFDcCbZcLu0eoykWKIi4Vx2Sat8tYA9dZ86cGXvxuC6n80hdUn0yxk/I3ZqgZj8h14a9rjPsyVYkqSsrKwu7gNxbob2Tcz/m4lZgasM9JxAZGRnesu6NuHd5s43X3VkircB88803+djgv3ds//791cvZ2dkahmhA4T1aWlrqvlSLpVSzSpNwwZaqR2O0zMxMhRjvS53UCysa2W3YsKF1fnzAjUC975+iSN2dO3fcmo4o3ye4mZAXzeCdrYPntRmYm1/asvJICx0V+0pKSoI1uG9jgl8UWKSLsXi8l5PyUtcKPhl8OKxxT2VlZdgfBhs2bJh9equ/srL3sYQvbtjQzS0hiSR1Fy5ckE/KA6VhmtxLIyua8JaSjezjOf3VcM1bfPv27falqf7u3LnTW1Zmlauo5iFDhkgUFfE03LcGu4BmH4Dq5po2bZr0T/UUFBQk9pYuNaUOUi+svPDCC7q3W81zFPTnzZunW9E+IVes191Y8Yiwcf/WrVuaIWmwYnGhvLzcO3b2PgjVvW3fXOu+1fjUfaBt5120aJEGvDblkr6OGTPGLb/8t+nzAGlqWhPeXzL01aA8dgpNEHUhvmUm69atc7O3uIrHezn4ZGpHsw73c+dIHVLHP0x5LKRG25vwjrW17V1J2364d++eNWzp0qX4ZKr6JFKH1AFhpYWxX2ayT8rsRwhPnDjhllC7X2Zqcx40Ye91NPt8/CeN+CRSh9ThHEhdZwkrFy9etMXTQfLy8tqPorhfdWnBBdz4ZKeNZulNIHU4B1LXicLKtWvXZs6cmZ+fHwqFdP9nZmaWlpYuXbo00ufYbcK6devUtu7du48bNy64rgGfROqIdUgd5iesAD6JTyJ1SB1hhbAC+CQ+idThHIQVwgrgk4DU/Y9zQOuQemEF8El8Elrcr5IidaKhoeH06dNHjx7dvXv35s2bV0JyUN+qh9XP6m31+T8dHzwHn8QnocX9KllSd+PGjdraWsnv4cOH1b4tkBzUt+ph9bN6W32eAmEFz8En8Ulocb9KltQ1NjZqjnnu3Dm1TDr8CyQH9a16WP2s3o70X0g6FngOPolPQov7VbKk7s6dOxJetUkKrPnmn5Ac1LfqYfWzelt9ngJhBc/BJ/FJaHG/SpbU3b9/X62R9qpZDQ0N9ZAc1LfqYfWzelt9ngJhBc/BJ/FJaHG/SpbUAQAAtBNSR+pOnjy5a9cuLAr4BgCkrNRVV1e/8sorWBTwDQBIWal79tlns7KyUmPFF+AbAIDU+dmzZ499Ub9582aMCvgGAKSg1L322msWzl588UWMCvgGAKSg1GVlZVk469at2/Xr17Er4BsAkFJSt23bNu+vgq5YsQK7Ar4BACkldeXl5d5wVlJSgl0hBXyjR48eWBDwHKTuIdevX5ddff/uoa6uDtNCR/cNtRYjAp6D1D1kzZo1wf9sVFNTg2mho/sGAQvwHKTuvzz//PPBcFZYWIhpoaP7BgEL8Byk7iF1dXVdu3YN+y9rjx8/jnU7MyngGwQswHOQuofMnz8/0n9nr66uxrqdmRTwDQIW4DlI3UOKiooihbOnn34a63ZmUsA3CFiA5yB1GBhS3DfwZ8BzkDoMDEgdAJ6D1AEgdYC3A1IH3Py0GfB2pA4DAzc/bQY8B6nDwIBv0GbAc5A6DAz4Bv4MeA5Sh4EB38CfAc9B6jAwIHUAeA5Sh0UBqQO8nU5A6oCbnzYD3o7UYWDg5qfNgLcjdRgY8A3aDHgOUoeBAd/AnwHPQeowMOAb+DPgOUgdBgakDgDPQeowMCB1AHgOUgfc/Egd4O1IHVIH3Py0GfB2pA4DAzc/bQY8B6nDwIBv4M+A5yB1GBjayjc6IhgOiIRIHQYGACASInUAAEgdUofUAQAgdUgdBgYAIBIidRgYAIBIiNRhYAAAIiFSh4EBAIiESB0GhjhZu3Ztfn5+enp6KBQqKiratGlT+2lbVVVV0GmPHDkydOjQUBPFxcXaxYhAJETqMDBE07ngd9nr169v84Zdvny5pqYm+J34+fPne/bs6W2tdpWIKYFIiNRhYAhPYWGhvGL8+PGNjY23b9+eNGmSdjXJa9tW9e7dO9JPokydOlUpw4YNa2hoqK+vLy0t1a4SMSUQCZE6DAzhSU9Pl1dI52z37t272k1LS9P2hg0bTGkWLlxo0ynLPGLEiGS3atq0aZOaCEpdQUGBUvbu3Wu7P/74o3aV2LYNBiIhUoeBof3yQRNuV1MlOUkoFLLdiooK7fbp00cSaNOpXr16Xbp0qTU91ue0GRkZSlF7bFczUe0qsZ00GIiESB0GhvbOmDFj5CT6a7v19fX2LHHGjBnSP22sXr26lT3W57RdunTxpbhpaHtoMBAJkToMDO2X48eP27PB7Ozs2tpal/7VV1+5d2ajRo2KpaoePXpE+kcEOpRUqUuswYDUAVIHqU91dbXUQu6Rm5sbXM2oRFOOY8eOtb7H+pzW5mq+B5juiWubNxiIhEgdBoZ2hzTDFjGmp6fPmTPn/v37vgyrV692k6SysrI2l7q8vDyl7N+/33b37t2rXSW2kwYDkRCpw8DQ7pgxY4a8IjMz04mHl9ra2qysLGWoqalRHm18/PHHbSt1lZWVtqjyehPDhw/X7uTJk9tJg4FIiNRhYGh3+L5gMzTDs6PDhg3Tbk5OjmZ71dXV2u7evfvZs2fbUOpOnjxpGubQrhLbSYOBSIjUYWBoXzQ2NoZdPGJSp/mQ7X766af/NH2HYBpTUlLShlIn9u3bV1xcnN6ENtx8tD00GIiESB0GBgAgEiJ1GBgAgEiI1GFgAAAiIVKHgQEAiIRIHQAAUgdIHQAAUofUYWAAACIhUoeBAQCIhEhdKxsYAADQtlSWOgAAAKQOAACQOqQOAACQOgAAAKQOAAAAqQMAAEDqAOIlqYutWckNgNRBKjDsEVFSknQipC4l/QcAqYMOMCtKUnzvWNUidXQRIHWA1CF1QBcBUgftg7Nnz1ZWVubk5KSnp6elpWVmZg4dOvSDDz7QoU2bNvl+W+jll1/2pVhOsXfv3tLS0lAopEry8vLmz58fNt7pdKNHj87IyFC2/v37v/HGG2FPFGO1QVRQ2ZRZRYYPH/77778HQ228dS5btqyoqMjyq82zZs26ffu277r27dtn5x0wYEBNTU0s3RtLzzjee++93Nxcq2HixImXL1/OfkSM1+VO1NjYWFFRofb07t176tSp2l2yZEnfvn1VSilTpkxRSrx1xmtWAKQOWo9Tp05lZWWF/cW86dOnxy5169evD9YgpQnGRIVmX7Zp06ZFionNVutDEdyXuWfPnj6pi7dOHQrmHzx4sO+6evXq5c0gwWi2e2PpmUjXJUGN97pcYllZmTdPv379fKV0unjrjMusAEgdtCqacFgM0uj+7t27Svnpp58sRaP+SA+gfCma4lhA13zl0qVLqqeqqsoX2lwRjf01I7l///7ChQudGiVcrZfPPvvMhV3NsZRy8OBBTVa81cZb5+LFi+3okCFDlF/NVgS3lLVr13rbrHQd/eKLL2y3e/fu8XZvpJ5ZuXKl7epaDh8+rJTvv/9e0694r8vX1G3btrmU6upqb4q1LUlmBUDqoLXZv3//piYaGhosun300Ue+2NSs1K1evdp29+7d6/KYxhQXF/uK1NfXW4rCYvQTxVKtF820LP+GDRtc4ubNm73VxltnYWGhL7+aPXLkyBEjRixbtszbZqUHryKu7o3UM1LZ4HVpO97rcvmDT1/DNj5JZgVA6qAN0Dxj/Pjxiukay4f9rx/NSt2UKVMi/d8Qm9xEinfRTxRLtV5c+13gDkbeFqkzyiUEUxLoXl9iKBQKe11dunSJ67piWV4Ub18lYFYApA5amyVLlrhXTeXl5QsXLvS+X4kxRCqUR4qJUZ6CNhsTY6k2XqmLt860tLToYTp65yTWvb5E14YoUpeYCaKnJMmsAEgdtDbulU9tba2lXL58OV6pcy+0XCWxSEKzMTGWar0MGjTI8ktOIj3AjLfO3Nxct8DSUu7evTtmzJjRo0fb+6ronZNY9/oSBw4caNvbtm1zGb777rt4ryteqUuSWQGQOmht3EzI5OH8+fPeBYe+UGUvnIIpp06dshlGRUWFvbPZsmWL5jGqfOLEiQnExNir9bJs2TK3fMOUSX99y1LirbOmpsbKFhYWnj17VnOpyZMnW4pEtFm1iKt7I/XMrFmzbDsnJ+fIkSNK+eGHH/r06RPvdcUrdUkyKwBSB63NuHHjfM+mFMvck7Hr168rjyKsb7F4MMXNALzk5+drEhN7TEygWh9Dhw4NvlWKNFmMpU5pW0lJSTB/WVlZLGoRS/c22zO3b992q2OifESRgAlin6+3rFkBkDpoVRobG6uqqjT1UfzNzs7WlOXSpUvV1dXjm1i9evU/TR8RK9SmNbFy5cqwKfaocMiQIfatcUFBwZw5c9xKvxhjYgLVBpXp7bffViy2T8glSMeOHat4hPepZlx1Lly4UA2z/AMHDtQpwi5ZDKbE0r2x9IzqUan+/furHjWjvLz89OnTwYLxmiCWlCSZFQCpA4D/5+DBg9uakEy6RG2bnGRmZtJFAEgdQMdmwoQJpmrFxcWnTp1SyvHjx93HdjpKFwEgdQAdm9ra2uBvdxl5eXmRXlsCAFIH0JFoaGiorq7Oz88PhULp6emZmZmlpaVLliyJ9GE7ACB1AACA1CF1AACA1AEAACB1AAAASB0AAABSBwAAgNQBAAAgdQAAAEgdAAAgdQAAAEgdAAAAUgcAAIDUAQAAIHUAAABIHQAAAFIHAABIHVIHAABIHQAAAFIHAACA1AEAACB1AAAASZQ6AACAlASpAwAApA4AAKAj838f5L1GE45MDgAAAABJRU5ErkJggg==" alt="diag 199892eb2cd8a94dfb5836be12cc2535" width="590" height="182">
</div>
</div>
<div class="paragraph">
<p>Et j&#8217;insiste&#160;: c&#8217;est ce qui se passe après chaque événement de notre application.
Cela veut dire que si l&#8217;utilisateur entre 5 caractères dans un champ, le <em>digest</em> sera lancé 5 fois,
avec 3 boucles à chaque fois dans notre petit exemple, soit 15 boucles d&#8217;exécution.
Dans une application réelle, on peut avoir facilement plusieurs centaines de <em>watchers</em> et
donc plusieurs milliers d&#8217;évaluation d&#8217;expression à chaque événement.</p>
</div>
<div class="paragraph">
<p>Même si ça semble fou, cela marche très bien car les navigateurs modernes sont vraiment rapides,
et qu&#8217;il est possible d&#8217;optimiser deux ou trois choses si nécessaire.</p>
</div>
<div class="paragraph">
<p>Tout cela signifie deux choses pour AngularJS&#160;1.x&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>il faut utiliser les services et les directives du framework pour tout ce qui peut déclencher un changement&#160;;</p>
</li>
<li>
<p>modifier le modèle à la suite d&#8217;un événement non géré par Angular nous oblige à déclencher nous-même
le mécanisme de détection de changement (en ajoutant le fameux <code>$scope.$apply()</code> qui lance le <em>digest</em>).
Par exemple, si l&#8217;on veut faire une requête HTTP sans utiliser le service <code>$http</code>,
il faut appeler <code>$scope.$apply()</code> dans notre callback de réponse pour dire au framework&#160;:
"Hé, j&#8217;ai des nouvelles données, lance le <em>digest</em> s&#8217;il te plaît&#160;!".</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Et la magie du framework peut être scindée en deux parties&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>le déclenchement de la détection de changement à chaque événement&#160;;</p>
</li>
<li>
<p>la détection de changement elle-même, grâce au <em>digest</em>, et à ses multiples cycles.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Maintenant voyons comment Angular&#160;2 fonctionne, et quelle est la différence.</p>
</div>
</div>
<div class="sect2">
<h3 id="_angular_2_et_les_zones">19.2. Angular&#160;2 et les zones</h3>
<div class="paragraph">
<p>Angular&#160;2 conserve les mêmes principes, mais les implémente d&#8217;une façon différente,
et on pourrait même dire, plus intelligente.</p>
</div>
<div class="paragraph">
<p>Pour la première partie du problème&#8201;&#8212;&#8201;le déclenchement de la détection de changement&#8201;&#8212;&#8201;l&#8217;équipe Angular a construit un petit projet annexe appelé <a href="https://github.com/angular/zone.js">Zone.js</a>.
Ce projet n&#8217;est pas forcément lié à Angular,
car les <em>zones</em> sont un outil qui peut être utilisé dans d&#8217;autres projets.
Les <em>zones</em> ne sont pas vraiment un nouveau concept&#160;:
elles existent dans le language Dart (un autre projet Google) depuis quelques temps déjà.
Elles ont aussi quelques similarités avec les <em>Domains</em> de Node.js (abandonnés depuis)
ou les <em>ThreadLocal</em> en Java.</p>
</div>
<div class="paragraph">
<p>Mais c&#8217;est probablement la première fois que l&#8217;on voit les <em>Zones</em> en JavaScript&#160;:
pas d&#8217;inquiétude, on va les découvrir ensemble.</p>
</div>
<div class="sect3">
<h4 id="_zones">19.2.1. Zones</h4>
<div class="paragraph">
<p>Une zone est un contexte d&#8217;exécution.
Ce contexte va recevoir du code à exécuter,
et ce code peut être synchrone ou asynchrone.
Une zone va nous apporter quelques petits bonus&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>une façon d&#8217;exécuter du code avant et après le code reçu à exécuter&#160;;</p>
</li>
<li>
<p>une façon d&#8217;intercepter les erreurs éventuelles d&#8217;exécution du code reçu&#160;;</p>
</li>
<li>
<p>une façon de stocker des variables locales à ce contexte.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Prenons un exemple. Si j&#8217;ai du code dans une application qui ressemble à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// score computation -&gt; synchronous</span>
let score = computeScore();
<span class="comment">// player score update -&gt; synchronous</span>
updatePlayer(player, score);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand on exécute ce code, on obtient&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">computeScore: <span class="keyword">new</span> score: <span class="integer">1000</span>
udpatePlayer: player <span class="integer">1</span> has <span class="integer">1000</span> points</code></pre>
</div>
</div>
<div class="paragraph">
<p>Admettons que je veuille savoir combien de temps prend un tel code.
Je peux faire quelque chose comme ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">startTimer();
let score = computeScore();
updatePlayer(player, score);
stopTimer();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et cela produirait ce résultat&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">start
computeScore: <span class="keyword">new</span> score: <span class="integer">1000</span>
udpatePlayer: player <span class="integer">1</span> has <span class="integer">1000</span> points
stop: <span class="integer">12</span>ms</code></pre>
</div>
</div>
<div class="paragraph">
<p>Facile.
Mais maintenant, que se passe-t-il si <code>updatePlayer</code> est une fonction asynchrone&#160;?
JavaScript fonctionne de façon assez particulière&#160;:
les opérations asynchrones sont placées à la fin de la queue d&#8217;exécution,
et seront donc exécutées après les opérations synchrones.</p>
</div>
<div class="paragraph">
<p>Donc cette fois mon code précédent&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">startTimer();
let score = computeScore();
updatePlayer(player, score); <span class="comment">// asynchronous</span>
stopTimer();</code></pre>
</div>
</div>
<div class="paragraph">
<p>va en fait donner&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">start
computeScore: <span class="keyword">new</span> score: <span class="integer">1000</span>
stop: <span class="integer">5</span>ms
udpatePlayer: player <span class="integer">1</span> has <span class="integer">1000</span> points</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mon temps d&#8217;exécution n&#8217;est plus bon du tout,
vu qu&#8217;il ne mesure que le code synchrone&#160;!
Et c&#8217;est par exemple là que les zones peuvent être utiles.
On va lancer le code en question en utilisant zone.js
pour l&#8217;exécuter dans une zone&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let scoreZone = Zone.current.fork({ <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">scoreZone</span><span class="delimiter">'</span></span> });
scoreZone.run(() =&gt; {
  let score = computeScore();
  updatePlayer(player, score); <span class="comment">// asynchronous</span>
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pourquoi est-ce que cela nous aide dans notre cas&#160;?
Hé bien, si la librairie zone.js est chargée dans notre navigateur,
elle va commencer par patcher toutes les méthodes asynchrones de celui-ci.
Donc à chaque fois que l&#8217;on fera un <code>setTimeout()</code>, un <code>setInterval()</code>,
que l&#8217;on utilisera une API asynchrone comme les Promises, XMLHttpRequest,
WebSocket, FileReader, GeoLocation&#8230;&#8203;
on appellera en fait la version patchée de zone.js.
Zone.js connaît alors exactement quand le code asynchrone est terminé,
et permet aux développeurs comme nous d&#8217;exécuter du code à ce moment là,
par le biais d&#8217;un <em>hook</em>.</p>
</div>
<div class="paragraph">
<p>Une zone offre plusieurs <em>hooks</em> possibles&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>onInvoke</code> qui sera appelé avant l&#8217;exécution du code encapsulé dans la zone&#160;;</p>
</li>
<li>
<p><code>onHasTask</code> qui sera appelé après l&#8217;exécution du code encapsulé dans la zone&#160;;</p>
</li>
<li>
<p><code>onHandleError</code> qui sera appelé dès que l&#8217;exécution du code encapsulé dans la zone lance une erreur&#160;;</p>
</li>
<li>
<p><code>onFork</code> qui sera appelé à la création de la zone.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On peut donc utiliser une zone et ses hooks
pour mesurer le temps d&#8217;exécution de mon code asynchrone&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let scoreZone = Zone.current.fork({
  <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">scoreZone</span><span class="delimiter">'</span></span>,
  onInvoke(delegate, current, target, task, applyThis, applyArgs, source) {
    <span class="comment">// start the timer</span>
    startTimer();
    <span class="keyword">return</span> delegate.invoke(target, task, applyThis, applyArgs, source);
  },
  onHasTask(delegate, current, target, hasTaskState) {
    delegate.hasTask(target, hasTaskState);
    <span class="keyword">if</span> (!hasTaskState.macroTask) {
      <span class="comment">// if the zone run is done, stop the timer</span>
      stopTimer();
    }
  }
});
scoreZone.run(() =&gt; {
  let score = computeScore();
  updatePlayer(player, score);
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et cette fois-ci ça marche&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">start
computeScore: <span class="keyword">new</span> score: <span class="integer">1000</span>
udpatePlayer: player <span class="integer">1</span> has <span class="integer">1000</span> points
stop: <span class="integer">12</span>ms</code></pre>
</div>
</div>
<div class="paragraph">
<p>Vous voyez maintenant peut-être le lien qu&#8217;il peut y avoir avec Angular&#160;2.
En effet, le premier problème du framework est de savoir quand
la détection de changement doit être lancée.
En utilisant les zones, et en faisant tourner le code que nous écrivons dans une zone,
le framework a une très bonne vue de ce qu&#8217;il est en train de se passer.
Il est ainsi capable de gérer les erreurs assez finement,
mais surtout de lancer la détection de changement dès qu&#8217;un appel asynchrone est terminé&#160;!</p>
</div>
<div class="paragraph">
<p>Pour simplifier, Angular&#160;2 fait quelque chose comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">let angularZone = Zone.current.fork({
  <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">angular</span><span class="delimiter">'</span></span>,
  <span class="key">onHasTask</span>: triggerChangeDetection
});
angularZone.run(() =&gt; {
  <span class="comment">// your application code</span>
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et le premier problème est ainsi résolu&#160;!
C&#8217;est pour cela qu&#8217;en Angular&#160;2, contrairement à AngularJS&#160;1.x,
il n&#8217;est pas nécessaire d&#8217;utiliser des services spéciaux
pour profiter de la détection de changements.
Vous pouvez utiliser ce que vous voulez, les zones se chargeront du reste&#160;!</p>
</div>
<div class="paragraph">
<p>A noter que les zones sont en voie de standardisation,
et pourraient faire partie de la spécification officielle ECMAScript dans un futur proche.
Autre information intéressante, l&#8217;implémentation actuelle de zone.js
embarque également des informations pour WTF
(qui ne veut pas dire <em>What The Fuck</em> ici, mais <a href="https://google.github.io/tracing-framework/getting-started.html">Web Tracing Framework</a>).
Cette librairie permet de profiler votre application en mode développement,
et de savoir exactement quel temps a été passé dans chaque partie de votre application et du framework.
Bref, plein d&#8217;outils pour analyser les performances si besoin&#160;!</p>
</div>
</div>
<div class="sect3">
<h4 id="_la_détection_de_changement_en_angular_2">19.2.2. La détection de changement en Angular&#160;2</h4>
<div class="paragraph">
<p>La seconde partie du problème est la détection de changement en elle-même.
C&#8217;est bien beau de savoir quand on doit la lancer, mais comment fonctionne-t-elle&#160;?</p>
</div>
<div class="paragraph">
<p>Tout d&#8217;abord, il faut se rappeler qu&#8217;une application Angular&#160;2 est un arbre de composants.
Lorsque la détection de changement se lance,
le framework va parcourir l&#8217;arbre de ces composants pour voir si
les composants ont subi des changements qui impactent leurs templates.
Si c&#8217;est le cas, le DOM du composant en question sera mis à jour
(seulement la petite portion impactée par le changement, pas le composant en entier).
Ce parcours d&#8217;arbre se fait de la racine vers les enfants,
et contrairement à AngularJS&#160;1.x, il ne se fait qu&#8217;une seule fois.
Car il y a maintenant une grande différence&#160;:
la détection de changement en Angular&#160;2 ne change pas le modèle de l&#8217;application,
là où un <em>watcher</em> en AngularJS&#160;1.x pouvait changer le modèle lors de cette phase.
Et en Angular&#160;2, un composant ne peut maintenant modifier que le modèle de ses composants enfants
et pas de son parent.
Finis les changements de modèle en cascade&#160;!</p>
</div>
<div class="paragraph">
<p>La détection de changement est donc seulement là pour vérifier les changements
et modifier le DOM en conséquence.
Il n&#8217;y a plus besoin de faire plusieurs passages comme c&#8217;était le cas dans la version 1.x,
puisque le modèle n&#8217;aura pas changé&#160;!</p>
</div>
<div class="paragraph">
<p>Pour être tout à fait exact, ce parcours se fait deux fois lorsque l&#8217;on est en mode développement
pour vérifier qu&#8217;il n&#8217;y a pas d&#8217;effet de bords indésirables
(par exemple un composant enfant modifiant le modèle utilisé par son composant parent).
Si le second passage détecte un changement, une exception est lancée pour avertir le développeur.</p>
</div>
<div class="paragraph">
<p>Ce fonctionnement a plusieurs avantages&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>il est plus facile de raisonner sur nos applications,
car on ne peut plus avoir de cas où un composant parent passe des informations à un composant enfant
qui lui aussi passe des informations à son parent. Maintenant les données sont transmises dans un seul sens&#160;;</p>
</li>
<li>
<p>la détection de changement ne peut plus avoir de boucle infinie&#160;;</p>
</li>
<li>
<p>la détection de changement est bien plus rapide.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sur ce dernier point, c&#8217;est assez simple à visualiser&#160;:
là où précédemment la version effectuait (M watchers) * (N cycles) vérifications,
la version 2 ne fait plus que M vérifications.</p>
</div>
<div class="paragraph">
<p>Mais un autre paramètre entre en compte dans l&#8217;amélioration des performances d&#8217;Angular&#160;2&#160;:
le temps qu&#8217;il faut au framework pour faire cette vérification.
Là encore, l&#8217;équipe de Google fait parler sa connaissance profonde
des sciences informatiques et des machines virtuelles.</p>
</div>
<div class="paragraph">
<p>Pour cela, il faut se pencher sur la façon dont sont comparées
deux valeurs en AngularJS&#160;1.x et en Angular&#160;2.
Dans la version 1.x, le mécanisme est très générique&#160;:
il y a une méthode dans le framework qui est appelée pour chaque <em>watcher</em>
et qui est capable de comparer l&#8217;ancienne valeur et la nouvelle.
Seulement, les machines virtuelles, comme celle qui exécute le code JavaScript dans notre navigateur
(V8 si tu utilises Google Chrome par exemple),
n&#8217;aiment pas vraiment le code générique.</p>
</div>
<div class="paragraph">
<p>Et si tu le permets, je vais faire une petite parenthèse sur le fonctionnement des machines virtuelles.
Avoue que tu ne t&#8217;y attendais pas dans un article sur un framework JavaScript&#160;!
Les machines virtuelles sont des programmes assez extraordinaires&#160;:
on leur donne un bout de code et elles sont capables de l&#8217;exécuter sur n&#8217;importe quelle machine.
Vu que peu d&#8217;entres nous (certainement pas moi) sont capables de produire du code machine performant,
c&#8217;est quand même assez pratique.
On code avec notre language de haut niveau, et on laisse la VM se préoccuper du reste.
Evidemment, les VMs ne se contentent pas de traduire le code,
elles vont aussi chercher à l&#8217;optimiser.
Et elles sont plutôt fortes à ce jeu là,
à tel point que les meilleures VMs ont des performances aussi bonnes que du code machine optimisé
(voire bien meilleures, car elle peuvent profiter d&#8217;informations au runtime,
qu&#8217;il est plus difficile voire impossible de connaître à l&#8217;avance quand on fait l&#8217;optimisation à la compilation).</p>
</div>
<div class="paragraph">
<p>Pour améliorer les performances, les machines virtuelles,
notamment celles qui font tourner des languages dynamiques comme JavaScript,
utilisent un concept nommé <em>inline caching</em>.
C&#8217;est une technique très ancienne
(inventée pour SmallTalk je crois, soit près de 40 ans, une éternité en informatique),
pour un principe finalement assez simple&#160;:
si un programme appelle une méthode beaucoup de fois avec le même type d&#8217;objet,
la VM devrait se rappeler de quelle façon elle évalue les propriétés des objets en question.
Il y a donc un cache qui est créé, d&#8217;où le nom, <em>inline caching</em>.
La VM commence donc par regarder dans le cache si elle connaît le type d&#8217;objet qu&#8217;elle reçoit,
et si c&#8217;est le cas, utilise la méthode optimisée de chargement.</p>
</div>
<div class="paragraph">
<p>Ce genre de cache ne fonctionne vraiment que
si les arguments de la méthode ont la même forme.
Par exemple <code>{name: 'Cédric'}</code> et <code>{name: 'Cyril'}</code> ont la même forme.
Par contre <code>{name: 'JB', skills: []}</code> n&#8217;a pas la même forme.
Lorsque les arguments ont toujours la même forme,
on dit que le cache est <em>monomorphique</em>,
un bien grand mot pour dire qu&#8217;il n&#8217;a qu&#8217;une seule entrée,
ce qui donne des résultats très rapides.
Si il a quelques entrées, on dit qu&#8217;il est <em>polymorphique</em>,
cela veut dire que la méthode peut être appelée avec des types d&#8217;objets différents,
et le code est un peu plus lent.
Enfin, il arrive que la VM laisse tomber le cache si il y a trop de types d&#8217;objet différents,
c&#8217;est ce qu&#8217;on appelle un état <em>mégamorphique</em>.
Et tu l&#8217;as compris, c&#8217;est le cas le moins performant.</p>
</div>
<div class="paragraph">
<p>Si j&#8217;en reviens à notre détection de changement en AngularJS&#160;1.x,
on comprend vite que la méthode générique utilisée n&#8217;est pas optimisable
par la machine virtuelle&#160;: on est dans un état mégamorphique,
là où le code est le plus lent.
Et même si les navigateurs et machines modernes permettent de faire plusieurs milliers
de vérification de watchers par seconde, on pouvait quand même atteindre les limites.</p>
</div>
<div class="paragraph">
<p>D&#8217;où l&#8217;idée de faire un peu différemment en Angular&#160;2&#160;!
Cette fois, plutôt qu&#8217;avoir une seule méthode capable de comparer tous les types d&#8217;objet,
l&#8217;équipe Google a pris le parti de générer dynamiquement des comparateurs pour chaque type.
Cela veut dire qu&#8217;au démarrage de l&#8217;application,
le framework va parcourir l&#8217;arbre des composants et
générer un arbre de <em>ChangeDetectors</em> spécifiques.</p>
</div>
<div class="paragraph">
<p>Par exemple, pour un composant <code>User</code>
avec un champ <code>name</code> affiché dans le template,
on aura un <code>ChangeDetector</code> qui ressemble à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">class</span> User_ChangeDetector {
  detectChanges() {
    <span class="keyword">if</span> (<span class="local-variable">this</span>.name !== <span class="local-variable">this</span>.previousName) {
      <span class="local-variable">this</span>.previousName = <span class="local-variable">this</span>.name;
      isChanged = <span class="predefined-constant">true</span>;
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un peu comme si on avait écrit le code de comparaison à la main.
Ce code est du coup très rapide (monomorphique si vous suivez),
permet de savoir si le composant a changé,
et donc de mettre à jour le DOM en conséquence.</p>
</div>
<div class="paragraph">
<p>Donc non seulement Angular&#160;2 fait moins de comparaison que la version 1.x
(une seule passe suffit) mais en plus ces comparaisons sont beaucoup plus rapides&#160;!</p>
</div>
<div class="paragraph">
<p>Depuis le début, l&#8217;équipe Google surveille d&#8217;ailleurs les performances,
avec des <a href="https://github.com/angular/angular/tree/master/modules/benchmarks_external">benchmarks</a>
entre AngularJS&#160;1.x, Angular&#160;2 et même Polymer et React
sur des cas d&#8217;utilisation un peu tordus afin de voir si la nouvelle version est toujours la plus rapide.
Il est même possible d&#8217;aller encore plus loin,
puisque la stratégie de <em>ChangeDetection</em> peut même être modifiée de sa valeur par défaut,
et être encore plus rapide dans certains cas.
Mais ça c&#8217;est pour un autre chapitre&#160;!</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ending">20. Ce n&#8217;est qu&#8217;un au revoir</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Merci d&#8217;avoir lu ce livre&#160;!</p>
</div>
<div class="paragraph">
<p>Quelques chapitres seront ajoutés dans des versions ultérieures&#160;:
l&#8217;utilisation du routeur (qui n&#8217;était pas finalisé pour cette première version),
des sujets avancés, et d&#8217;autres surprises.
Ils ont encore besoin d&#8217;être fignolés, mais je pense que tu les apprécieras.
Et bien sûr, nous tiendrons à jour ce contenu avec les nouvelles versions du framework,
pour que tu ne rates pas les nouvelles fonctionnalités à venir.
Et toutes ces révisions du livres seront gratuites, bien évidemment&#160;!</p>
</div>
<div class="paragraph">
<p>Si tu as aimé cette lecture, parles-en à tes amis&#160;!
Et si tu as envie d&#8217;aller plus loin, tu devrais jeter un œil au pack pro qu&#8217;on propose,
avec lequel tu pourras mettre toutes tes nouvelles connaissances en pratique,
et maîtriser encore plus profondément le sujet&#160;!</p>
</div>
<div class="paragraph">
<p>On a essayé de te donner toutes les clés,
mais l&#8217;apprentissage du web se passe souvent comme ça&#160;:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<a class="image" href="http://oktop.tumblr.com/post/15352780846"><img src="data:image/png;base64,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O8UgNGNLfdClx5Aa07zFrtQLn+pt396iHGrIMpt2UY9Z7I/emYd0akC/9GRo9XzcAdhAHX+kO7epFWnSI7KwMpxy0ZRb24F7iG+w07R5rR9xowcpQh2EwISGupFTur7VVgHgGKPY3+jc62FcrVR/zijNwkuyqif20N0iL+L2iVCq7jxLvj0XFcetrr5vz23X33rKYXeYbDDnZaCeotdqZCe7pdA6lrsppk0iNxK4T+f2U2mWSlA+Ue6fVNO1jSNnI7xDtQRImqiRU2p+Jb7IOHuH3puI3NsbLdIbPm8c4jhxTba/yQk0Ql2fweFbI8Yx48Zaxg7NBOyg2LQwTYoTWg+Eda/qQanhnmttzezSZcCMcZ2FIrElM7g6FHRoNfq3WyqBh391Rr+5TJYsCJGhRW4kOO1GjtDqDTLdAAKfYI09CylKhERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQFH8Yymy5FIu7Npldu5aJxwZg68tHR9P66ff91VlZHfbPj1pdu17uMaBCY8bzzmo0+776/cucuEuUMW+6W3JLLZsllRZ781nInYtofdYMDkOvR3xqAlsYb6Fy79T+FVlOnSc65QIEqHEmTmGZE5wmorbp0EnjoO1RCntV1EqrYLnHKspt2Yca8ausCeXmWP3OFEajutk08bsoXe1cJo6CYiOrAeHxES6OUqEREBERAREQEREBERAREQEREHm44DQVNyoiAU51rX1LS4Zk9nzDHY9/sMrzmDI2oB1HUuYlUSpWlfR3itNxhyizYtgd0lXW5x4bsiG8zDF0up50gLURH017+X6lyPnVyuFjtVknYlLymzWWXbmmZGzT8Jg5QtADpAXSJiYtAX4hIlUzpNU7fK5W+l3paKzWBuBM1kUi1cp2pNULXfX068+7mtguTfJslPyM2x/IbzfRmvO224W/wCtkbnHYY7Aw3Ii2Hbd0ur2RXT1jvlnvsc5FmusO4stnUDcivi6IlT2a6pU5JptERFKhERAREQEREBERAREQEREBERAREQEREBERARE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" alt="How to draw a horse by Van Oktop" width="400"></a>
</div>
<div class="title">How to draw a horse. Credit to Van Oktop.</div>
</div>
<div class="paragraph">
<p>Alors on propose aussi <a href="http://ninja-squad.fr/training/angular2">une formation</a>,
en France et en Europe essentiellement, mais pourquoi pas dans le monde entier.
On peut aussi faire du conseil pour aider ton équipe,
ou même travailler avec toi pour t&#8217;aider à construire ton produit.
Envoie un email à <a href="mailto:hello@ninja-squad.com">hello@ninja-squad.com</a> et on en discutera&#160;!</p>
</div>
<div class="paragraph">
<p>Mais surtout, j&#8217;adorerais avoir ton retour sur ce que tu as aimé, adoré, ou détesté dans ce livre.
Cela peut être une petite faute de frappe, une grosse erreur,
ou juste pour nous raconter comment tu as trouvé le job de tes rêves grâce à ce livre (on ne sait jamais&#8230;&#8203;).</p>
</div>
<div class="paragraph">
<p>Je ne peux pas conclure sans remercier quelques personnes.
Ma petite amie tout d&#8217;abord, qui a été d&#8217;un soutien formidable,
même quand je passais mon dimanche sur la dixième réécriture d&#8217;un chapitre dans une humeur détestable.
Mes collègues ninjas, pour leur travail et retours sans relâche,
leur gentillesse et encouragements, et pour m&#8217;avoir laissé le temps nécessaire à cette folle idée.
Et mes amis et ma famille, pour les petits mots qui redonnent l&#8217;énergie au bon moment.</p>
</div>
<div class="paragraph">
<p>Et merci surtout à toi, pour avoir acheté ce livre, et l&#8217;avoir lu jusqu&#8217;à cette toute dernière ligne.</p>
</div>
<div class="paragraph">
<p>À très bientôt.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="changelog">21. Historique des versions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Voici ci-dessous les changements que nous avons apportés à cet ebook
depuis sa première version.
C&#8217;est en anglais, mais ça devrait t&#8217;aider à voir les nouveautés depuis ta dernière lecture&#160;!</p>
</div>
<div class="paragraph">
<p>N&#8217;oublie pas qu&#8217;acheter cet ebook te donne droit à toutes ses mises à jour ultérieures, gratuitement.
Rends-toi sur la page <a href="https://books.ninja-squad.com/claim" class="bare">https://books.ninja-squad.com/claim</a> pour obtenir la toute dernière version.</p>
</div>
<div class="sect2">
<h3 id="_v1_2_2016_08_25">21.1. v1.2 - 2016-08-25</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to <code>rc.5</code> <span class="small">(2016-08-23)</span></p>
</li>
<li>
<p>Bump to <code>rc.4</code> <span class="small">(2016-07-08)</span></p>
</li>
<li>
<p>Bump to <code>rc.3</code> <span class="small">(2016-06-28)</span></p>
</li>
<li>
<p>Bump to <code>rc.2</code> <span class="small">(2016-06-16)</span></p>
</li>
<li>
<p>Bump to <code>rc.1</code> <span class="small">(2016-06-08)</span></p>
</li>
<li>
<p>Code examples now follow the official style guide <span class="small">(2016-06-08)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>From zero to something</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Small introduction to NgModule when you start your app from scratch <span class="small">(2016-08-12)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>The templating syntax</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace the deprecated <code>ngSwitchWhen</code> with <code>ngSwitchCase</code> <span class="small">(2016-06-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Dependency Injection</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduce modules and their role in DI.
Changed the example to use a custom service instead of Http. <span class="small">(2016-08-15)</span></p>
</li>
<li>
<p>Remove deprecated <code>provide()</code> method and use <code>{provide: &#8230;&#8203;}</code> instead <span class="small">(2016-06-09)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Pipes</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Date pipe is now fixed in <code>rc.2</code>, no more problem with Intl API <span class="small">(2016-06-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Styling components and encapsulation</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New chapter on styling components and the different encapsulation strategies! <span class="small">(2016-06-08)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Services</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the service to the module&#8217;s providers <span class="small">(2016-08-21)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Testing your app</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tests now use the TestBed API instead of the deprecated TestComponentBuilder one. <span class="small">(2016-08-15)</span></p>
</li>
<li>
<p>Angular 2 does not provide Jasmine wrappers and custom matchers for unit tests in <code>rc.4</code> anymore <span class="small">(2016-07-08)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Forms now use the new form API (FormsModule and ReactiveFormsModule). <span class="small">(2016-08-22)</span></p>
</li>
<li>
<p>Warn about forms module being rewritten (and deprecated) <span class="small">(2016-06-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the HttpModule import <span class="small">(2016-08-21)</span></p>
</li>
<li>
<p><code>http.post()</code> now autodetects the body type, removing the need of using <code>JSON.stringify</code> and setting the <code>ContentType</code> <span class="small">(2016-06-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduce RouterModule <span class="small">(2016-08-21)</span></p>
</li>
<li>
<p>Update the router to the API v3! <span class="small">(2016-07-08)</span></p>
</li>
<li>
<p>Warn about router module being rewritten (and deprecated) <span class="small">(2016-06-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Changelog</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mention free updates and web page for obtaining latest version <span class="small">(2016-07-25)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v1_1_2016_05_11">21.2. v1.1 - 2016-05-11</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to <code>rc.0</code>. All packages have changed! <span class="small">(2016-05-03)</span></p>
</li>
<li>
<p>Bump to <code>beta.17</code> <span class="small">(2016-05-03)</span></p>
</li>
<li>
<p>Bump to <code>beta.15</code> <span class="small">(2016-04-16)</span></p>
</li>
<li>
<p>Bump to <code>beta.14</code> <span class="small">(2016-04-11)</span></p>
</li>
<li>
<p>Bump to <code>beta.11</code> <span class="small">(2016-03-20)</span></p>
</li>
<li>
<p>Bump to <code>beta.9</code> <span class="small">(2016-03-11)</span></p>
</li>
<li>
<p>Bump to <code>beta.8</code> <span class="small">(2016-03-10)</span></p>
</li>
<li>
<p>Bump to <code>beta.7</code> <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Display the Angular 2 version used in the intro and in the chapter "Zero to something". <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Bump to <code>beta.6</code> (<code>beta.4</code> and <code>beta.5</code> were broken) <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Bump to <code>beta.3</code> <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Bump to <code>beta.2</code> <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Diving into TypeScript</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>typings</code> instead of <code>tsd</code>. <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>The templating syntax</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>*ngFor</code> now uses <code>let</code> instead of <code><mark></code> to declare a variable <code>*ngFor="let pony of ponies"</code> [small]</mark>(2016-05-03)#</p>
</li>
<li>
<p><code>*ngFor</code> now also exports a <code>first</code> variable <span class="small">(2016-04-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Dependency Injection</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Better explanation of hierarchical injectors <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Pipes</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>replace</code> pipe has been introduced <span class="small">(2016-04-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Reactive Programming</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Observables are not scheduled for ES7 anymore <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Building components and directives</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Explain how to remove the compilation warning when using <code>@Input</code> and a setter at the same time <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Add an explanation on <code>isFirstChange</code> for <code>ngOnChanges</code> <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Testing your app</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>injectAsync</code> is now deprecated and replaced by <code>async</code> <span class="small">(2016-05-03)</span></p>
</li>
<li>
<p>Add an example on how to test an event emitter <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>A pattern validator has been introduced to make sure that the input matches a regexp <span class="small">(2016-04-16)</span></p>
</li>
<li>
<p>Add a mnemonic tip to rememeber the <code>[()]</code> syntax: the banana box! <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Examples use <code>module.id</code> to have a relative <code>templateUrl</code> <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Fix error <code>ng-no-form</code> &#8594; <code>ngNoForm</code> <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Fix errors <code>(ngModel)</code> &#8594; <code>(ngModelChange)</code>, <code>is-old-enough</code> &#8594; <code>isOldEnough</code> <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>JSON.stringify</code> before sending data with a POST <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Add a mention to <code>JSONP_PROVIDERS</code> <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduce the new router (previous one is deprecated), and how to use parameters in URLs! <span class="small">(2016-05-06)</span></p>
</li>
<li>
<p><code>RouterOutlet</code> inserts the template of the component just after itself and not inside itself <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Zones and the Angular magic</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New chapter! Let&#8217;s talk about how Angular 2 works under the hood!
First part is about how AngularJS 1.x used to work,
and then we&#8217;ll see how Angular 2 differs,
and uses a new concept called zones. <span class="small">(2016-05-03)</span></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-06-09 20:39:06 UTC
</div>
</div>
</body>
</html>